(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1162:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"y",(function(){return u})),n.d(t,"u",(function(){return h})),n.d(t,"s",(function(){return p})),n.d(t,"o",(function(){return f})),n.d(t,"c",(function(){return g})),n.d(t,"v",(function(){return m})),n.d(t,"C",(function(){return b})),n.d(t,"B",(function(){return y})),n.d(t,"b",(function(){return v})),n.d(t,"g",(function(){return w})),n.d(t,"A",(function(){return I})),n.d(t,"z",(function(){return C})),n.d(t,"m",(function(){return O})),n.d(t,"l",(function(){return S})),n.d(t,"D",(function(){return R})),n.d(t,"j",(function(){return j})),n.d(t,"q",(function(){return x})),n.d(t,"p",(function(){return E})),n.d(t,"d",(function(){return k})),n.d(t,"r",(function(){return T})),n.d(t,"w",(function(){return P})),n.d(t,"i",(function(){return _})),n.d(t,"e",(function(){return L})),n.d(t,"h",(function(){return M})),n.d(t,"f",(function(){return D})),n.d(t,"n",(function(){return $})),n.d(t,"t",(function(){return N})),n.d(t,"k",(function(){return V})),n.d(t,"x",(function(){return q}));n(435),n(1207),n(1206);var i=n(1165),r=n(1203),o=n(1163),s=n(439),a=n.n(s),c=n(852),l=n(1167);const d=49;function u(){return Object(o.a)((function(...e){return e}),(function(e){return l.a.apply(this,e)}))}function h(e,t){const n=t.innerWidth;t.innerHeight;return(e.mediaPayloads||[]).reduce(((e,t)=>{var i,r;const o=(null==t||null===(i=t.globalWindow)||void 0===i?void 0:i.maxWidth)||1/0,s=(null==t||null===(r=t.globalWindow)||void 0===r?void 0:r.minWidth)||0;return n<=o&&n>=s&&e.push(t.payload),e}),[e])}function p(e){let t=0;const n=e.clientWidth,i=e.clientHeight,r=.7*c.b*2,o=.7*c.a*2;return n>r&&i>o&&(t=1),n>2*r&&i>2*o&&(t=2),t}function f(e,t){const n=e.replace(/([.$?*|{}()[\]\\/+^])/g,"\\$1"),i=t.cookie.match(new RegExp(`(?:^|; )${n}=([^;]*)`));return i?decodeURIComponent(i[1]):void 0}function g(e){const{searchParams:t}=new URL(e);return!!t.get("relap_debug")}function m(e){const{width:t,height:n}=Object(r.a)(e,(e=>e.width));return t&&9999!==t&&n&&9999!==n?t/n:null}function b(e){const t=window.global.open();t.opener=null,t.location=e,t.target="_blank"}const y=a()(Math.random(),Math.random());function v(e="some_hash"){return a()(`${e}-${Math.random()}`,y)}function w(e={}){var t;return!(null===(t=e.flyRoll)||void 0===t||!t.enable)}function I(e,t){return e.reduce(((e,n)=>{switch(n.type){case"slot":e.push(t(n));break;case"grid":e.push({...n,slots:I(n.slots,t)})}return e}),[])}function C(e,t){return e.reduce(((e,n)=>{switch(n.type){case"slot":e.push(t(n));break;case"grid":e.push(t({...n,slots:C(n.slots,t)}))}return e}),[])}function O(e){return e.reduce(((e,t)=>{switch(t.type){case"slot":e.push(t);break;case"grid":e.push(...O(t.slots))}return e}),[])}function S(e,t){return Object(i.a)(O(e),t)}function R(e,t){return O(e).some(t)}function j(e,t){return e.reduce(((e,n)=>{switch(n.type){case"slot":t(n)&&e.push(n);break;case"grid":e.push({...n,slots:j(n.slots,t)})}return e}),[])}const x=({instance:{slots:e=[]}={},articleId:t})=>j(e,(e=>{var n;return!(e.recId&&!e.swapping||null!==(n=e.filters)&&void 0!==n&&n.includes("inline_article")&&!t)})),E=({widgetInstances:e,articleId:t})=>Object.values(e).reduce(((e,n)=>{const i=x({instance:n,articleId:t});return O(i).length?(e.push({instanceId:n.id,slots:i}),e):e}),[]),k=({widgetInstances:e,articleId:t})=>E({widgetInstances:e,articleId:t}).some((({slots:e})=>R(e,(({types:e})=>e.includes("ad")))));function T(e,{string:t="",type:n}={}){if(!t)return e;const i=e.split("#")[0];switch(n){case"anchor":return`${i}#${new URLSearchParams(t)}`;case"search":default:const n=new URL(e);return new URLSearchParams(t).forEach(((e,t)=>{n.searchParams.set(t,e)})),`${n}`}}function P(e,t,{utm:n}={}){return"normal"!==t?e:T(e,n)}function W({size:e,filters:t=[],recId:n,bgRecs:i=[]}){return"normal"===e&&t.includes("video_custom")&&!i.includes(n)}function _({customRec:{name:e}={}}){return"videocap"===e}function L({recId:e,instance:{slots:t=[]}}){return R(t,(({bgRecs:t=[]})=>t.includes(e)))}function A(e){return O(e).reduce(((e,{recId:t,bgRecs:n=[]})=>(t&&e.push(t),n.forEach((t=>{e.push(t)})),e)),[])}function M({id:e,widgetInstances:t}){return Object.values(t).some((t=>A(t.slots).includes(e)))}function D({recId:e,instance:{slots:t=[]}}){return R(t,(({recId:t,bgRecs:n=[]})=>e!==t&&n.includes(e)))}function z(e,t){return e.reduce(((e,n)=>(t[n]&&e.push(t[n]),e)),[])}function $(e,t){return z(A(e),t)}function N(e,t){return z(function(e){return O(e).reduce(((e,{recId:t})=>(t&&e.push(t),e)),[])}(e),t)}function B({instance:{slots:e},recs:t}){return $(e,t).some(_)?null:S(e,W)||null}function V({recId:e,instance:{slots:t}}){return S(t,(({bgRecs:t=[]})=>t.includes(e)))}function q({widgetInstances:e,recs:t}){const n=Object.values(e);for(let e=0;e<n.length;e++){const i=B({instance:n[e],recs:t});if(i)return{slot:i,instanceId:n[e].id}}return{}}},1167:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(1200),r=n(1188);function o({schema:e,cols:t,rows:n}){const r=t*n;if(e.length===r)return e;if(e.length>r)return e.slice(0,r);if(e.length<r){const t=[];for(let n=0;n<r;n++)t.push(Object(i.a)(e[n%e.length]));return t}}const s=["schema","fallbackPayloads"];function a(...e){var t,n;const i=Object(r.a)({},...e,((e,t,n)=>{if(s.includes(n))return t}));var a;return null!=i&&null!==(t=i.grid)&&void 0!==t&&null!==(n=t.simple)&&void 0!==n&&n.schema?{...i,grid:{...null==i?void 0:i.grid,simple:{...null==i||null===(a=i.grid)||void 0===a?void 0:a.simple,schema:o(i.grid.simple)}}}:i}},1170:function(e,t,n){"use strict";function i({anchorEl:e,position:t,frameType:n,cfgId:i="",instanceId:r="",globalObj:o,wrapped:s=!1,isFlyRollable:a}){const c=document.createElement("iframe");switch(c.setAttribute("frameborder","no"),n){case"relapWidget":c.style.width="0",c.style.height="0",c.style.maxWidth="100%",c.style.minWidth="100%","img_overlay"!==t&&(c.style.maxHeight="100%",c.style.minHeight="100%"),c.className="js-relap-widget",c.setAttribute("data-relap-widget-cfg-id",i),c.setAttribute("data-relap-widget-instance-id",r);break;case"relapAdmin":case"relapCustomRec":c.style.width="0",c.style.height="0",c.style.maxWidth="100%",c.style.maxHeight="100%",c.style.minWidth="100%",c.style.minHeight="100%";break;default:c.style.position="absolute",c.style.visibility="hidden",c.style.left="-9999px",c.style.top="-9999px"}let l;const d=new Promise((e=>{l=function(e){return function(){var t,i;c.contentWindow&&!c.contentWindow.initialized&&"complete"===(null===(t=c.contentWindow)||void 0===t||null===(i=t.document)||void 0===i?void 0:i.readyState)&&(n&&(c.contentWindow.frameType=n),o&&Object.keys(o).forEach((e=>{c.contentWindow[e]=o[e]})),c.contentWindow.initialized=!0,e())}}(e),c.onload=l,c.src="about:blank"}));let u,h;if(s){if(h=document.createElement("div"),h.className="js-relap-widget-wrapper",h.style.height="0",h.style.lineHeight="0",h.style.fontSize="0",h.style.visibility="hidden",h.style.flexGrow="1",a){const e=document.createElement("div");e.className="js-relap-widget-inner";const t=document.createElement("div");t.className="js-relap-widget-placeholder",e.appendChild(c),t.appendChild(e),h.appendChild(t)}else if("img_overlay"===t){const e=document.createElement("div");e.style.position="absolute",e.style.zIndex="5",e.className="js-relap-widget-inner-wrapper",h.style.position="relative",h.appendChild(e),e.appendChild(c)}else h.appendChild(c);u=h}else u=c;if(e)switch(t){case"img_overlay":if("IMG"===e.tagName)e.parentNode.insertBefore(u,e);else{const{firstChild:t}=e;t?e.insertBefore(u,t):e.appendChild(u)}break;case"prepend":const{firstChild:t}=e;t?e.insertBefore(u,t):e.appendChild(u);break;case"append":e.appendChild(u);break;case"after":const n=e.parentNode,i=e.nextSibling;i?n.insertBefore(u,i):n.appendChild(u);break;case"before":default:e.parentNode.insertBefore(u,e)}else window.global.document.body.appendChild(u);if(h){const e=h.offsetWidth;h.style.width=`${e}px`,h.style.position="absolute"}return l(),{el:u,iframeEl:c,promise:d}}n.d(t,"a",(function(){return i}))},1266:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var i=n(0),r=n.n(i),o=n(2),s=n.n(o);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class c extends i.PureComponent{constructor(e){super(e),a(this,"sendIsInViewport",(()=>{const{rec:{id:e},isInViewport:t}=this.props;this._source.postMessage(JSON.stringify({recId:e,payload:{type:"inViewportChange",isInViewport:t}}),"*")})),a(this,"handlePostMessage",(e=>{const{rec:t,isInViewport:n,onReady:i,onError:r,onComplete:o,onCustomEvent:s,onRecFollow:a}=this.props,{id:c}=t;let l;try{l=JSON.parse(e.data)}catch(e){console.log(e)}if(!l||c!==l.recId)return;this._source=e.source;const{payload:d}=l,{extCfgsDataStorage:u={}}=window;switch(d.type){case"initialized":this._source.postMessage(JSON.stringify({recId:c,payload:{type:"initialParams",rec:t,isInViewport:n,extCfgsDataStorage:u}}),"*");break;case"heightChange":this.setState({height:d.height});break;case"ready":i();break;case"error":r();break;case"complete":o();break;case"customEvent":s(d.event);break;case"recFollow":a()}})),this.state={height:0}}componentWillMount(){const{local:e}=this.context;e.addEventListener("message",this.handlePostMessage)}componentDidUpdate(e){const{isInViewport:t}=this.props;e.isInViewport!==t&&this._source&&this.sendIsInViewport()}componentWillUnmount(){const{local:e}=this.context;e.removeEventListener("message",this.handlePostMessage)}render(){const{rec:{id:e,customRec:{name:t}}}=this.props,{height:n}=this.state;return r.a.createElement("iframe",{title:"Custom rec",src:`https://relap.io/v7/external_recs/${t}/index.html?id=${e}`,frameBorder:"no",scrolling:"no",style:{width:"100%",height:`${n}px`}})}}a(c,"propTypes",{rec:s.a.shape({id:s.a.string.isRequired,customRec:s.a.shape({name:s.a.string.isRequired}).isRequired}).isRequired,isInViewport:s.a.bool,onRecFollow:s.a.func,onReady:s.a.func,onError:s.a.func,onComplete:s.a.func,onCustomEvent:s.a.func}),a(c,"contextTypes",{local:s.a.object.isRequired}),a(c,"defaultProps",{isInViewport:!1,onRecFollow:()=>{},onReady:()=>{},onError:()=>{},onComplete:()=>{},onCustomEvent:()=>{}})},1367:function(e,t,n){"use strict";t.a={"@global":{"body, dy, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, section, summary, time, mark, audio, video, button":{margin:0,padding:0,border:0,"font-size":"100%",font:"inherit","vertical-align":"baseline"},"article, aside, details, figcaption, figure, footer, header, hgroup, menu, nav, section":{display:"block"},body:{"line-height":1,overflow:"hidden"},"ol, ul":{"list-style":"none"},"blockquote, q":{quotes:"none"},"blockquote:before, blockquote:after, q:before, q:after":{content:"none",fallbacks:{content:""}},table:{"border-collapse":"collapse","border-spacing":0},"a, button":{color:"inherit"},a:{"text-decoration":"none"},":focus":{outline:0},"*, :before, :after":{"box-sizing":"border-box"}}}},1368:function(e,t,n){"use strict";n.d(t,"a",(function(){return Bt}));var i=n(0),r=n.n(i),o=n(2),s=n.n(o),a=n(1392),c=n(1378),l=n(10),d=n(1382),u=n(473),h=n(1162),p=(n(435),n(1496)),f=n(1372),g=n(1163),m=n(1383),b=n(1502),y=n(1369),v=n.n(y);var w={simpleGrid:{margin:"0 auto",display:"flex","flex-direction":"column","align-items":({positioningAlign:e})=>(e=>{switch(e){case"left":return"flex-start";case"right":return"flex-end";case"center":default:return"center"}})(e),padding:e=>(({cfg:{gutter:e},float:t})=>"left"===t?`0 ${e/2}px ${e/2}px 0`:"right"===t?`0 0 ${e/2}px ${e/2}px`:"")(e)},mainTitleWrapper:{width:"100%"},itemsContainerWrapper:{extend:"mainTitleWrapper"},row:{display:"flex","flex-wrap":"wrap","justify-content":"flex-start","&$rowWithAlignStart":{"align-items":"flex-start"},"&$rowWithAlignEnd":{"align-items":"flex-end"},"&$rowWithAlignCenter":{"align-items":"center"},"&$rowWithAlignStretch":{"align-items":"stretch"}},rowWithAlignStart:{},rowWithAlignEnd:{},rowWithAlignCenter:{},rowWithAlignStretch:{},rowItem:{display:"flex","& > *":{display:"flex",width:"100%"}},logoWrapper:{extend:"mainTitleWrapper"},loadMoreButtonWrapper:{extend:"mainTitleWrapper"}};function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const C={},O=new l.b,S=({itemsLength:e})=>e,R=({cols:e})=>e,j=({rows:e})=>e,x=({preserveRowsQuantity:e})=>e;class E extends i.PureComponent{constructor(e){super(e),I(this,"componentDidMount",(()=>{const{local:e}=this.context,{slotId:t,elWidthExceeding:n,cfg:i}=this.props,{visibleItems:r}=this.state;this.handleElWidthExceeding({slotId:t,elWidthExceeding:n});const o=this.calcCols(i),s=this.calcVisibleItems(o);this.setState({cols:o,visibleItems:s},(()=>{this.handlePositionFloat(),this.handleOverflow(),this.handleVisibleItems(r)})),e.addEventListener("resize",this.handleWindowResize)})),I(this,"componentWillReceiveProps",(e=>{this.handleElWidthExceeding({slotId:e.slotId,elWidthExceeding:e.elWidthExceeding}),this.updateStyles(e);const t=this.calcCols(e.cfg),n=this.calcVisibleItems(t);this.setState({cols:t,visibleItems:n})})),I(this,"componentDidUpdate",(()=>{const{cfg:e}=this.props,{cols:t,visibleItems:n}=this.state,i=this.calcCols(e),r=this.calcVisibleItems(i);i!==t?this.setState({cols:i},(()=>{this.handlePositionFloat(),this.handleOverflow()})):(this.handlePositionFloat(),this.handleOverflow()),r!==n?this.setState({visibleItems:r},(()=>{this.handleVisibleItems(n)})):this.handleVisibleItems(n)})),I(this,"componentWillUnmount",(()=>{const{local:e}=this.context;Object(u.c)({widgetId:e.id,styleSheetsDict:C,sheetsManager:O}),e.removeEventListener("resize",this.handleWindowResize),this.handleWindowResize.cancel()})),I(this,"calcVisibleItems",(e=>{const{items:t,cfg:{rows:n,preserveRowsQuantity:i}}=this.props;return this.memoizedCalcVisibleItems({itemsLength:t.length,cols:e,rows:n,preserveRowsQuantity:i})})),I(this,"updateStyles",(e=>{const{local:t}=this.context;C[t.id].sheet.update(e)})),I(this,"handleVisibleItems",(e=>{const{onVisibleItemsChange:t}=this.props,{visibleItems:n}=this.state;e!==n&&t(n)})),I(this,"handlePositionFloat",(()=>{const{local:{iframeEl:e}}=this.context,{cfg:{gutter:t},float:n}=this.props;if(e)if("left"===n||"right"===n){const n=this.calcMinRowWidth()+t/2;e.style.width=`${n}px`}else e.style.width="0"})),I(this,"handleOverflow",(()=>{const{onOverflow:e}=this.props,t=this._wrapper,n=this._itemsWrapper.offsetWidth-t.offsetWidth;this._overflowedBy!==n&&(this._overflowedBy=n,e(n))})),I(this,"handleElWidthExceeding",(({slotId:e,elWidthExceeding:t})=>{const{local:{el:n}}=this.context;if(!n||!t)return;const i=t&&!e?t/2:0;n.style.marginLeft=`-${i}px`,n.style.marginRight=`-${i}px`})),I(this,"updateItemsSizes",(()=>{const{onRecsSizeChange:e}=this.props,{itemsSizes:t,itemElems:n}=Object.entries(this.itemElems).filter((([e,t])=>e&&t)).reduce(((e,[t,n])=>{const{width:i,height:r}=n.getBoundingClientRect();return e.itemsSizes[t]={width:i,height:r},e.itemElems[t]=n,e}),{itemsSizes:{},itemElems:{}});this.itemElems=n,e(t)})),I(this,"handleWindowResize",(()=>{const{cfg:e}=this.props;this.updateItemsSizes(),this.setState({cols:this.calcCols(e)},this.handleOverflow)})),I(this,"calcCols",(({minColWidth:e,gutter:t,cols:n})=>{const{cols:i}=this.state,r=this._wrapper;if(!r)return i;const o=r.clientWidth;let s=1;for(let i=n;i>0;i--){if(i*e+i*t<=o){s=i;break}}return s})),I(this,"calcMinRowWidth",(()=>{const{cfg:{minColWidth:e,gutter:t}}=this.props,{cols:n}=this.state;return n*e+n*t})),I(this,"calcMaxRowWidth",(()=>{const{cfg:{maxColWidth:e,gutter:t}}=this.props,{cols:n}=this.state;return n*e+n*t})),this.state={cols:1,visibleItems:[]},this._overflowedBy=0,this.itemElems={},this.memoizedCalcVisibleItems=Object(g.a)([S,R,j,x],((e,t,n,i)=>{const r=[];for(let o=0;o<e;o++)i&&o>=t*n||r.push(o);return r})),this.handleWindowResize=Object(f.a)(this.handleWindowResize,300)}componentWillMount(){const{local:e}=this.context;Object(u.b)({jss:e.jss,stylesSrc:w,styleSheetsDict:C,widgetId:e.id,sheetsManager:O,createStyleSheetOptions:{link:!0}}),this.updateStyles(this.props)}renderMainTitle(){const{local:e}=this.context,{mainTitle:t}=this.props,n=C[e.id].sheet,i=this.calcMaxRowWidth(),o=this.calcMinRowWidth();return t?r.a.createElement("div",{className:n.classes.mainTitleWrapper,style:{maxWidth:`${i}px`,minWidth:`${o}px`}},t):null}renderItems(){const{items:e,cfg:{maxColWidth:t,gutter:n,rows:i,preserveRowsQuantity:o}}=this.props,{local:s}=this.context,{cols:a}=this.state,c=C[s.id].sheet;return e.map((({id:e,item:s},l)=>{const d=o&&l>=a*i;return r.a.createElement("div",{key:e,ref:t=>{this.itemElems[e]=t},className:c.classes.rowItem,style:{position:d?"absolute":"",visibility:d?"hidden":"",top:d?"-9999px":"",left:d?"-9999px":"",width:100/a+"%",maxWidth:`${t+n}px`,padding:n/2+"px"}},s)}))}renderLoadMoreButton(){const{local:e}=this.context,{loadMoreButton:t}=this.props,n=C[e.id].sheet,i=this.calcMaxRowWidth(),o=this.calcMinRowWidth();return t?r.a.createElement("div",{className:n.classes.loadMoreButtonWrapper,style:{maxWidth:`${i}px`,minWidth:`${o}px`}},t):null}renderLogo(){const{local:e}=this.context,{logo:t}=this.props,n=C[e.id].sheet,i=this.calcMaxRowWidth(),o=this.calcMinRowWidth();return t?r.a.createElement("div",{className:n.classes.logoWrapper,style:{maxWidth:`${i}px`,minWidth:`${o}px`}},t):null}render(){const{local:e}=this.context,{widgetStyles:t,cfg:{gutter:n,verticalAlign:i="stretch"}}=this.props,o=C[e.id].sheet;let s;switch(i){case"top":s="rowWithAlignStart";break;case"center":s="rowWithAlignCenter";break;case"bottom":s="rowWithAlignEnd";break;case"stretch":default:s="rowWithAlignStretch"}const a=v()(o.classes.row,o.classes[s]),c=this.calcMaxRowWidth(),l=this.calcMinRowWidth();return r.a.createElement("div",{ref:e=>{this._wrapper=e},className:o.classes.simpleGrid},this.renderMainTitle(),r.a.createElement("div",{ref:e=>{this._itemsWrapper=e},className:o.classes.itemsContainerWrapper,style:{maxWidth:`${c}px`,minWidth:`${l}px`}},r.a.createElement("div",{className:t.classes.itemsContainer},r.a.createElement("div",{className:a,style:{marginTop:`-${n/2}px`,marginLeft:`-${n/2}px`,marginRight:`-${n/2}px`,marginBottom:`-${n/2}px`}},this.renderItems()))),this.renderLoadMoreButton(),this.renderLogo())}}I(E,"propTypes",{slotId:s.a.string,widgetStyles:s.a.object,mainTitle:s.a.node,items:s.a.arrayOf(s.a.shape({id:s.a.string.isRequired,item:s.a.node.isRequired})),loadMoreButton:s.a.node,logo:s.a.node,cfg:s.a.shape({minColWidth:s.a.number.isRequired,maxColWidth:s.a.number.isRequired,gutter:s.a.number.isRequired,verticalAlign:s.a.oneOf(["top","center","bottom","stretch"]),cols:s.a.number.isRequired,rows:s.a.number.isRequired,preserveRowsQuantity:s.a.bool}).isRequired,float:s.a.oneOf(["left","right","none",""]),elWidthExceeding:s.a.number,onOverflow:s.a.func,onRecsSizeChange:s.a.func.isRequired,onVisibleItemsChange:s.a.func}),I(E,"contextTypes",{local:s.a.object.isRequired}),I(E,"defaultProps",{slotId:null,widgetStyles:{classes:{}},mainTitle:null,items:[],loadMoreButton:null,logo:null,elWidthExceeding:0,float:"",onOverflow:()=>{},onVisibleItemsChange:()=>{}});var k=n(1373),T=n(1569),P=n.n(T),W={svg:{width:"40px",height:"40px",color:"rgba(191, 196, 200, 0.5)",animation:"1s linear 0s normal none infinite rotate","& circle":{animation:"$circularDash 1.4s ease-in-out infinite","stroke-dasharray":"80px, 200px","stroke-dashoffset":"0px"}},"@keyframes circularDash":{"0%":{"stroke-dasharray":"1px, 200px","stroke-dashoffset":"0px"},"50%":{"stroke-dasharray":"100px, 200px","stroke-dashoffset":"-15px"},"100%":{"stroke-dasharray":"100px, 200px","stroke-dashoffset":"-125px"}}};function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}const L=(e,t)=>{const{local:n}=t,{classes:i}=Object(k.a)(n,W);return r.a.createElement(P.a,_({className:i.svg},e))};L.contextTypes={local:s.a.object.isRequired};var A=Object(i.memo)(L);var M={simpleGrid:{margin:"0 auto",display:"flex","flex-direction":"column","align-items":"center",padding:e=>(({cfg:{gutter:e},float:t})=>"left"===t?`0 ${e/2}px ${e/2}px 0`:"right"===t?`0 0 ${e/2}px ${e/2}px`:"")(e)},mainTitleWrapper:{width:"100%"},itemsContainer:{margin:0,overflow:"hidden"},itemsContainerWrapper:{extend:"mainTitleWrapper"},itemScrollWrapper:{overflowX:"scroll",overflowY:"hidden"},row:{display:"flex",paddingBottom:"0.1px","flex-wrap":"nowrap","justify-content":"flex-start","align-items":"flex-start","&$rowWithAlignStart":{"align-items":"flex-start"},"&$rowWithAlignEnd":{"align-items":"flex-end"},"&$rowWithAlignCenter":{"align-items":"center"},"&$rowWithAlignStretch":{"align-items":"stretch"},"&::-webkit-scrollbar":{display:"none"}},rowWithAlignStart:{},rowWithAlignEnd:{},rowWithAlignCenter:{},rowWithAlignStretch:{},rowItem:{display:"flex","& > *":{display:"flex",width:"100%"}},logoWrapper:{extend:"mainTitleWrapper"},loadMoreButtonWrapper:{extend:"mainTitleWrapper"},carouselLoaderWrapper:{display:"flex",alignItems:"center",justifyContent:"center"}};function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const z={},$=new l.b,N="never",B="always",V="ontouchstart"in window;class q extends i.PureComponent{constructor(e){super(e),D(this,"componentDidMount",(()=>{const{local:e}=this.context,{slotId:t,elWidthExceeding:n,onMoreRecsLoad:i,items:{length:r},cfg:{gutter:o}}=this.props;this.handleElWidthExceeding({slotId:t,elWidthExceeding:n});const s=document.createElement("div");s.style.overflowX="scroll",this._itemScrollWrapper.append(s);const a=s.offsetHeight-s.clientHeight;s.remove();const c=a>0?`-${a}px`:"-17px",l=a>0?o/2+"px":17+o/2+"px";this._itemScrollWrapper.style.marginBottom=c,this._itemScrollWrapper.style.paddingBottom=l,e.addEventListener("resize",this.handleWindowResize),this.updateShownQuantity(),this._itemsInFrameQuantity>=r-1&&i(),this.setScrollHandlers(),this.initVisibleElementsObserver()})),D(this,"componentWillReceiveProps",(e=>{this.handleElWidthExceeding({slotId:e.slotId,elWidthExceeding:e.elWidthExceeding}),this.updateStyles(e)})),D(this,"componentDidUpdate",(()=>{const{items:{length:e}}=this.props;this.updateShownQuantity(),this._loadedItemsQuantity!==e&&this.setVisibleElementsObserver(this._loadedItemsQuantity)})),D(this,"componentWillUnmount",(()=>{const{local:e}=this.context;Object(u.c)({widgetId:e.id,styleSheetsDict:z,sheetsManager:$}),e.removeEventListener("resize",this.handleWindowResize),this.handleWindowResize.cancel()})),D(this,"handleSwipe",(()=>{const{global:e}=this.context,t=navigator.userAgent.toLowerCase().includes("firefox"),n=this._itemScrollWrapper,i=e=>(e.preventDefault(),e.stopImmediatePropagation(),!1);let r=n.scrollLeft;const o=e=>e.target===this._nextItemsButton||e.target===this._prevItemsButton,s=a=>{if(o(a))return;n.onmousemove=null;const c=r-n.scrollLeft>0?1:-1;this.makeMove(c,!0),setTimeout((()=>{[...n.children].forEach((e=>{("DIV"===(null==e?void 0:e.tagName)?e:e[0]).removeEventListener("click",i,!0)}))}),0),n.removeEventListener("mouseup",s,!1),e&&(e.removeEventListener("mouseup",s,!1),t&&e.removeEventListener("mouseover",s,!1)),r=n.scrollLeft};n.addEventListener("mousedown",(a=>{if(o(a))return;a.preventDefault();const c=a.clientX;r=n.scrollLeft,n.onmousemove=e=>{((e,t,r)=>{[...n.children].forEach((e=>{("DIV"===(null==e?void 0:e.tagName)?e:e[0]).addEventListener("click",i,!0)})),n.scroll(t+(r-e.clientX),0)})(e,r,c)},n.addEventListener("mouseup",s,!1),e&&(e.addEventListener("mouseup",s,!1),t&&e.addEventListener("mouseover",s,!1))})),V&&(n.addEventListener("touchend",s,!1),null==e||e.addEventListener("touchend",s,!1))})),D(this,"handleElWidthExceeding",(({slotId:e,elWidthExceeding:t})=>{const{local:{el:n}}=this.context,i=t&&!e?t/2:0;n.style.marginLeft=`-${i}px`,n.style.marginRight=`-${i}px`})),D(this,"updateStyles",(e=>{const{local:t}=this.context;z[t.id].sheet.update(e)})),D(this,"updateShownQuantity",(()=>{this._itemsInFrameQuantity=Math.floor(this._itemsContainer.offsetWidth/this._itemsContainer.childNodes[1].offsetWidth)})),D(this,"handleWindowResize",(()=>{this.updateShownQuantity(),this.makeMove(1,!0)})),D(this,"makeMove",((e,t=!1)=>{const{widgetStyles:n,cfg:{carousel:{buttons:{animationDuration:i}}}}=this.props,{local:r}=this.context,o=z[r.id].sheet,s=v()(o.classes.animate,n.classes.animate).split(" ");this.updateShownQuantity();const a=this.calcScrollDelta({direction:e,isCorrecting:t});0!==a&&(this._itemsContainer.style.marginLeft=`${a}px`,setTimeout((()=>{this._itemsContainer.classList.remove(...s),this._itemsContainer.style.marginLeft="0",this._itemScrollWrapper.scrollLeft-=a,this._itemsContainer.classList.add(...s),this.updateShownQuantity()}),1e3*i))})),D(this,"toggleLeftScrollVisible",(()=>{const{widgetStyles:e,cfg:{carousel:{buttons:{leftButtonHide:t}}}}=this.props;if(!t)return;const{local:n}=this.context,i=z[n.id].sheet;let r=v()(i.classes.sideButtonLeftHideAtStart,e.classes.sideButtonLeftHideAtStart);r=r.split(" "),0===this._itemScrollWrapper.scrollLeft?this._prevItemsButton.classList.add(...r):this._prevItemsButton.classList.remove(...r)})),this._itemsInFrameQuantity=-1,this._observer=null,this._loadedItemsQuantity=0,this.handleWindowResize=Object(f.a)(this.handleWindowResize,300),this.setVisibleElementsObserver=Object(a.a)(this.setVisibleElementsObserver,1e3)}componentWillMount(){const{local:e}=this.context;Object(u.b)({jss:e.jss,stylesSrc:M,styleSheetsDict:z,widgetId:e.id,sheetsManager:$,createStyleSheetOptions:{link:!0}}),this.updateStyles(this.props)}getButtonsShowBehavior(){const{cfg:{carousel:{buttons:{showIfMouse:e,showIfTouch:t}}}}=this.props;return V?t:e}setVisibleElementsObserver(e){if(!this._itemsContainer)return;const t=this._itemsContainer.childNodes;for(let n=e;n<t.length;n++)t.item(n).dataset.indexInCollection=n,this._observer.observe(t[n]);const{items:{length:n}}=this.props;this._loadedItemsQuantity=n}setScrollHandlers(){this.handleSwipe();const{cfg:{carousel:{buttons:{leftButtonHide:e,animationDuration:t}}}}=this.props;if(this.getButtonsShowBehavior()===N)return;const n=Object(f.a)(this.makeMove,1300*t);e&&this._itemScrollWrapper.addEventListener("scroll",this.toggleLeftScrollVisible),this._prevItemsButton.addEventListener("click",(()=>{n(-1)})),this._nextItemsButton.addEventListener("click",(()=>{n(1)}))}calcScrollDelta({direction:e,isCorrecting:t}){const{cfg:{gutter:n}}=this.props,i=this._itemsContainer.childNodes[1].clientWidth,r=this._itemScrollWrapper.scrollLeft,o=this._itemScrollWrapper.offsetWidth;if(0===r&&-1===e)return 0;let s;const a=Math.ceil(r/i);if(t)s=a*i-1.5*n;else{const t=r+o-a*i+n,c=Math.floor(t/i),l=a+c-1;s=(e>0?l+1:a-c)*i-1.5*n}s<0&&(s=0);return r-s}initVisibleElementsObserver(){const{slotId:e,onMoreRecsLoad:t}=this.props,n=this._itemsContainer.childNodes,i={root:this._itemScrollWrapper,threshold:0};this._observer=new IntersectionObserver(((i,r)=>{i.forEach((i=>{i.intersectionRatio>0&&(i.target!==n[n.length-this._itemsInFrameQuantity-2]&&i.target!==n[n.length-1]||t({slotId:e}),r.unobserve(i.target))}))}),i)}renderMainTitle(){const{local:e}=this.context,{mainTitle:t}=this.props,n=z[e.id].sheet;return t?r.a.createElement("div",{className:n.classes.mainTitleWrapper,style:{maxWidth:"100%",minWidth:"100%"}},t):null}renderPreviousItemsButton(){const{widgetStyles:e,cfg:{carousel:{buttons:{leftButtonHide:t}}}}=this.props;if(this.getButtonsShowBehavior()===N)return null;const n=v()(e.classes.sideButtonInner,e.classes.sideButtonLeft,e.classes.sideButtonLeftHideEffect,{[e.classes.sideButtonLeftHideAtStart]:t});return r.a.createElement("div",{className:e.classes.sideButtonWrapper,style:{left:0}},r.a.createElement("div",{ref:e=>{this._prevItemsButton=e},className:n},"<"))}renderNextItemsButton(){const{widgetStyles:e}=this.props;if(this.getButtonsShowBehavior()===N)return null;const t=v()(e.classes.sideButtonInner,e.classes.sideButtonRight,e.classes.sideButtonRightHideEffect);return r.a.createElement("div",{className:e.classes.sideButtonWrapper,style:{right:0}},r.a.createElement("div",{ref:e=>{this._nextItemsButton=e},className:t},">"))}renderItems(){const{items:e,cfg:{maxColWidth:t,minColWidth:n,gutter:i}}=this.props,{local:o}=this.context,s=z[o.id].sheet,a={minWidth:`${n+i}px`,maxWidth:`${t+i}px`,padding:i/2+"px"};return e.map((({id:e,recId:t,item:n})=>r.a.createElement("div",{key:e,className:t?s.classes.rowItem:void 0,style:t?a:void 0},n)))}renderLogo(){const{local:e}=this.context,{logo:t}=this.props,n=z[e.id].sheet;return t?r.a.createElement("div",{className:n.classes.logoWrapper,style:{maxWidth:"100%",minWidth:"100%"}},t):null}render(){const{local:e}=this.context,{widgetStyles:t,cfg:{gutter:n,verticalAlign:i="stretch"}}=this.props,o=z[e.id].sheet;let s;switch(i){case"top":s="rowWithAlignStart";break;case"center":s="rowWithAlignCenter";break;case"bottom":s="rowWithAlignEnd";break;case"stretch":default:s="rowWithAlignStretch"}const a=v()(o.classes.animate,t.classes.animate,o.classes.row,o.classes[s]),c=v()(o.classes.itemsContainer,o.classes.itemsContainerWrapper),l=v()(o.classes.itemScrollWrapper,t.classes.itemScrollWrapper),d=v()(t.classes.itemsContentWrapper),u=v()(o.classes.carouselLoaderWrapper,t.classes.carouselLoaderWrapper);return r.a.createElement("div",{className:o.classes.simpleGrid},this.renderMainTitle(),r.a.createElement("div",{className:c},r.a.createElement("div",{style:{position:"relative",overflow:"hidden"}},r.a.createElement("div",{ref:e=>{this._itemScrollWrapper=e},className:l},r.a.createElement("div",{className:d},this.renderPreviousItemsButton(),r.a.createElement("div",{ref:e=>{this._itemsContainer=e},className:a,style:{marginTop:`-${n/2}px`,transform:`translateX(-${n/2}px)`,marginBottom:`-${n/2}px`}},this.renderItems(),r.a.createElement("div",{className:u},r.a.createElement(A,null))),this.renderNextItemsButton())))),this.renderLogo())}}D(q,"propTypes",{slotId:s.a.string,widgetStyles:s.a.object,mainTitle:s.a.node,items:s.a.arrayOf(s.a.shape({id:s.a.string.isRequired,item:s.a.node.isRequired})),logo:s.a.node,cfg:s.a.shape({minColWidth:s.a.number.isRequired,maxColWidth:s.a.number.isRequired,gutter:s.a.number.isRequired,verticalAlign:s.a.oneOf(["top","center","bottom","stretch"]),rows:s.a.number.isRequired,preserveRowsQuantity:s.a.bool,carousel:s.a.shape({buttons:s.a.shape({animationDuration:s.a.number.isRequired,leftButtonHide:s.a.bool.isRequired,showIfMouse:s.a.oneOf([B,N]).isRequired,showIfTouch:s.a.oneOf([B,N]).isRequired}).isRequired}).isRequired}).isRequired,elWidthExceeding:s.a.number,onMoreRecsLoad:s.a.func.isRequired}),D(q,"contextTypes",{local:s.a.object.isRequired}),D(q,"defaultProps",{slotId:null,widgetStyles:{classes:{}},mainTitle:null,items:[],logo:null,elWidthExceeding:0});var F=n(1165);var U={itemsContainer:{display:"grid",gap:e=>`${function({cfg:e}){var t,n;return`${(null===(t=e.composite)||void 0===t?void 0:t.rowGutter)||0}${(null===(n=e.composite)||void 0===n?void 0:n.rowGutterUnit)||"px"}`}(e)} ${function({cfg:e}){var t,n;return`${(null===(t=e.composite)||void 0===t?void 0:t.colGutter)||0}${(null===(n=e.composite)||void 0===n?void 0:n.colGutterUnit)||"px"}`}(e)}`,"align-items":e=>function({cfg:e}){var t;return{top:"start",center:"center",bottom:"end",stretch:"stretch"}[null===(t=e.composite)||void 0===t?void 0:t.verticalAlign]||"stretch"}(e),"grid-auto-flow":"row dense"}};function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const G={},Q=new l.b;class K extends i.PureComponent{constructor(e){super(e),H(this,"componentDidMount",(()=>{const{local:e}=this.context;e.addEventListener("resize",this.handleWindowResize),this.handleWindowResize()})),H(this,"componentWillReceiveProps",(e=>{this.updateStyles(e)})),H(this,"componentWillUnmount",(()=>{const{local:e}=this.context;Object(u.c)({widgetId:e.id,styleSheetsDict:G,sheetsManager:Q}),e.removeEventListener("resize",this.handleWindowResize),this.handleWindowResize.cancel()})),H(this,"handleWindowResize",(()=>{const e=this._rootEl;e&&this.setState({rootElWidth:e.clientWidth})})),H(this,"updateStyles",(e=>{const{local:t}=this.context;G[t.id].sheet.update(e)})),H(this,"renderSlots",(()=>{const{widgetStyles:e,slots:t,items:n,GridLayout:i,onOverflow:o,onRecsSizeChange:s,onVisibleItemsChange:a,onMoreRecsLoad:c}=this.props,{rootElWidth:l}=this.state;return t.reduce(((t,{slotId:d,recId:u,type:p,colsWidth:f,rowsHeight:g,media:m,slots:b,grid:y})=>{const v=(({width:e,defaultValue:t=1,media:n=[]})=>{if(!Number.isFinite(e)||!n.length)return t;const i=[...n].sort(((e,t)=>e.parentMaxWidth-t.parentMaxWidth)),r=Object(F.a)(i,(({parentMaxWidth:t})=>t>e));return r?r.colsWidth:t})({width:l,defaultValue:f,media:m}),w={gridColumnEnd:v>1?`span ${v}`:"",gridRowEnd:g?`span ${g}`:""};switch(p){case"slot":const{item:l}=Object(F.a)(n,{recId:u})||{};if(!l||!u)return t;t.push(r.a.createElement("div",{key:u,style:w},l));break;case"grid":const p=Object(h.m)(b).reduce(((e,{recId:t})=>{const i=Object(F.a)(n,{recId:t});return i&&e.push(i),e}),[]);if(!p.length||!y||!u)return t;t.push(r.a.createElement("div",{key:u,style:w},r.a.createElement(i,{slotId:d,widgetStyles:e,items:p,slots:b,cfg:y,onOverflow:o,onVisibleItemsChange:a,onRecsSizeChange:s,onMoreRecsLoad:c})))}return t}),[])})),this.state={rootElWidth:1/0},this.handleWindowResize=Object(f.a)(this.handleWindowResize,300)}componentWillMount(){const{local:e}=this.context;Object(u.b)({jss:e.jss,stylesSrc:U,styleSheetsDict:G,widgetId:e.id,sheetsManager:Q,createStyleSheetOptions:{link:!0}}),this.updateStyles(this.props)}render(){const{local:e}=this.context,{widgetStyles:t,mainTitle:n,logo:i,loadMoreButton:o,cfg:{composite:{maxWidth:s}}}=this.props,{classes:a}=G[e.id].sheet;return r.a.createElement("div",{ref:e=>{this._rootEl=e},style:{maxWidth:s}},n,r.a.createElement("div",{className:t.classes.compositeGridItemsContainer},r.a.createElement("div",{className:a.itemsContainer,style:{gridTemplateColumns:"repeat(12, 1fr)"}},this.renderSlots())),r.a.createElement("div",null,o),i)}}function J(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}H(K,"propTypes",{widgetStyles:s.a.object,mainTitle:s.a.node,items:s.a.arrayOf(s.a.shape({id:s.a.string.isRequired,recId:s.a.string,item:s.a.node.isRequired})),slots:s.a.arrayOf(s.a.shape({recId:s.a.string,type:s.a.oneOf(["slot","grid"]).isRequired,slots:s.a.array})),loadMoreButton:s.a.node,logo:s.a.node,cfg:s.a.shape({composite:s.a.shape({maxWidth:s.a.number,colGutter:s.a.number.isRequired,colGutterUnit:s.a.oneOf(["px","%"]),verticalAlign:s.a.oneOf(["top","center","bottom","stretch"]),itemsPositioning:s.a.shape({type:s.a.oneOf(["auto"])}).isRequired,schema:s.a.arrayOf(s.a.shape({grid:s.a.object}))}).isRequired}).isRequired,GridLayout:s.a.func.isRequired,onOverflow:s.a.func,onRecsSizeChange:s.a.func,onVisibleItemsChange:s.a.func,onMoreRecsLoad:s.a.func}),H(K,"contextTypes",{local:s.a.object.isRequired}),H(K,"defaultProps",{widgetStyles:{classes:{}},mainTitle:null,items:[],slots:[],loadMoreButton:null,logo:null,onOverflow:()=>{},onRecsSizeChange:()=>{},onVisibleItemsChange:()=>{},onMoreRecsLoad:()=>{}});class X extends i.PureComponent{render(){const{slotId:e,widgetStyles:t,mainTitle:n,items:i,cfg:o,loadMoreButton:s,loadMoreInProgress:a,logo:c,slots:l,positioningAlign:d,onOverflow:u,onRecsSizeChange:h,onVisibleItemsChange:p,onMoreRecsLoad:f}=this.props,{type:g,elWidthExceeding:m,float:b,simple:y}=o;switch(g){case"simple":switch(y.subtype||"simple"){case"simple":return r.a.createElement(E,{slotId:e,widgetStyles:t,mainTitle:n,items:i,loadMoreButton:s,logo:c,cfg:y,float:b,elWidthExceeding:m,onOverflow:u,onVisibleItemsChange:p,onRecsSizeChange:h,positioningAlign:d});case"carousel":return r.a.createElement(q,{slotId:e,widgetStyles:t,mainTitle:n,items:i,loadMoreInProgress:a,logo:c,cfg:y,float:b,elWidthExceeding:m,onOverflow:u,onVisibleItemsChange:p,onMoreRecsLoad:f});default:return null}case"composite":return r.a.createElement(K,{slotId:e,widgetStyles:t,mainTitle:n,items:i,slots:l,loadMoreButton:s,logo:c,cfg:o,GridLayout:X,onOverflow:u,onVisibleItemsChange:p,onRecsSizeChange:h,onMoreRecsLoad:f});default:return null}}}J(X,"propTypes",{slotId:s.a.string,widgetStyles:s.a.object,mainTitle:s.a.node,items:s.a.arrayOf(s.a.shape({id:s.a.string.isRequired,item:s.a.node.isRequired})),cfg:s.a.shape({elWidthExceeding:s.a.number,type:s.a.oneOf(["simple","composite"]).isRequired,float:s.a.string,simple:s.a.object}).isRequired,loadMoreButton:s.a.node,loadMoreInProgress:s.a.bool,logo:s.a.node,slots:s.a.array,positioningAlign:s.a.string,onOverflow:s.a.func,onRecsSizeChange:s.a.func,onVisibleItemsChange:s.a.func,onMoreRecsLoad:s.a.func}),J(X,"defaultProps",{slotId:null,widgetStyles:{classes:{}},mainTitle:null,items:[],loadMoreButton:null,loadMoreInProgress:!1,logo:null,slots:[],positioningAlign:"center",onOverflow:()=>{},onRecsSizeChange:()=>{},onVisibleItemsChange:()=>{},onMoreRecsLoad:()=>{}});var Y=n(1375),Z=n.n(Y),ee={recItemInner:{position:"relative"},closeButton:{display:"none","z-index":1e4,"&$visible":{display:"block"}},visible:{},video:{position:"relative","z-index":1e3},thumbnail:{position:"relative","z-index":100}};function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ne={},ie=new l.b;class re extends i.PureComponent{constructor(...e){super(...e),te(this,"componentWillUnmount",(()=>{const{local:e}=this.context;Object(u.c)({widgetId:e.id,styleSheetsDict:ne,sheetsManager:ie})})),te(this,"renderCloseButton",(()=>{const{local:e}=this.context,{styles:t,closeButtonOverlay:n,recSizes:{width:i},isFlyrolled:o,flyRollCfg:s}=this.props,a=ne[e.id].sheet,c=(l=o?s.width:i)<=300?"Small":l<510?"Medium":"Large";var l;const d=v()(a.classes.closeButton,t.classes.closeButton,t.classes[`closeButton${c}`],{[a.classes.visible]:n});return r.a.createElement("div",{className:d},n,r.a.createElement(Z.a,null))})),te(this,"renderVideo",(()=>{const{local:e}=this.context,{styles:t,recComposition:n,video:i}=this.props;if(!i)return null;const o=ne[e.id].sheet,s=v()(o.classes.video,t.classes.video);switch(n){case"normalPlate":case"normalList":case"fullPlate":case"fullList":return r.a.createElement("div",{className:s},i);default:return null}})),te(this,"renderThumbnail",(()=>{const{local:e}=this.context,{styles:t,recComposition:n,renderLink:i,thumbnail:o}=this.props;if(!o)return null;const s=ne[e.id].sheet,a=v()(s.classes.thumbnail,t.classes.thumbnail);switch(n){case"normalPlate":case"normalList":return i({children:o,className:a});case"fullPlate":case"fullList":return r.a.createElement("div",{className:a},o);default:return null}})),te(this,"renderTitle",(()=>{const{styles:e,recComposition:t,renderLink:n,title:i}=this.props;if(!i)return null;switch(t){case"normalPlate":case"normalList":return n({children:i,className:e.classes.title});case"fullPlate":case"fullList":return r.a.createElement("div",{className:e.classes.title},i);default:return null}})),te(this,"renderDescription",(()=>{const{styles:e,description:t}=this.props;return t?r.a.createElement("div",{className:e.classes.description},t):null})),te(this,"renderDisclaimer",(()=>{const{styles:e,disclaimer:t}=this.props;return t?r.a.createElement("div",{className:e.classes.disclaimer},t):null})),te(this,"renderLabel",(()=>{const{styles:e,type:t,label:n}=this.props;if(!n)return null;switch(t){case"ad":const t=v()(e.classes.label,e.classes.adLabel);return r.a.createElement("div",{className:t},n);case"promo":const i=v()(e.classes.label,e.classes.promoLabel);return r.a.createElement("div",{className:i},n);case"exchange":const o=v()(e.classes.label,e.classes.exchangeLabel);return r.a.createElement("div",{className:o},n);default:return null}})),te(this,"renderCategory",(()=>{const{styles:e,category:t,categoryUrl:n}=this.props;if(!t)return null;if(t&&n){const i=v()(e.classes.recCategory,e.classes.recCategoryWithLink);return r.a.createElement("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:i},t)}return r.a.createElement("div",{className:e.classes.recCategory},t)}))}componentWillMount(){const{local:e}=this.context;Object(u.b)({jss:e.jss,stylesSrc:ee,styleSheetsDict:ne,widgetId:e.id,sheetsManager:ie})}render(){const{local:e}=this.context,{styles:t,RecLayout:n,type:i,size:o,renderLinkOverlay:s,recComposition:a,meta:c,pubDate:l}=this.props,d=ne[e.id].sheet,u=v()(d.classes.recItemInner,t.classes.recItemInner),h="fullPlate"===a||"fullList"===a?s({zIndex:200}):null;return r.a.createElement("div",{className:u},r.a.createElement(n,{styles:t,type:i,size:o,linkOverlay:h,closeButton:this.renderCloseButton(),video:this.renderVideo(),thumbnail:this.renderThumbnail(),title:this.renderTitle(),description:this.renderDescription(),disclaimer:this.renderDisclaimer(),label:this.renderLabel(),category:this.renderCategory(),pubDate:l,meta:c}))}}te(re,"propTypes",{styles:s.a.object,RecLayout:s.a.func.isRequired,recComposition:s.a.string.isRequired,recSizes:s.a.object,type:s.a.oneOf(["normal","ad","promo","exchange"]),size:s.a.oneOf(["normal","wide"]),renderLink:s.a.func,renderLinkOverlay:s.a.func,closeButtonOverlay:s.a.node,video:s.a.node,thumbnail:s.a.node,title:s.a.node,description:s.a.node,disclaimer:s.a.node,label:s.a.node,category:s.a.string,categoryUrl:s.a.string,pubDate:s.a.string,meta:s.a.object,isFlyrolled:s.a.bool,flyRollCfg:s.a.object}),te(re,"contextTypes",{local:s.a.object.isRequired}),te(re,"defaultProps",{styles:{classes:{}},type:"normal",size:"normal",recSizes:{},renderLink:()=>{},renderLinkOverlay:()=>{},closeButtonOverlay:null,video:null,thumbnail:null,title:null,description:null,disclaimer:null,label:null,category:"",categoryUrl:"",pubDate:"",meta:{},isFlyrolled:!1,flyRollCfg:{width:450}});var oe=n(1529),se=n(1389);function ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ce extends i.PureComponent{render(){const{title:e,titleCfg:t,onReady:n}=this.props;return r.a.createElement(se.a,{maxLines:t.maxLines,text:e,onReady:n})}}function le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}ae(ce,"propTypes",{styles:s.a.object,type:s.a.oneOf(["normal","ad","promo","exchange"]),size:s.a.oneOf(["normal","wide"]),title:s.a.string,titleCfg:s.a.shape({maxLines:s.a.number}),description:s.a.string,descriptionCfg:s.a.shape({maxLines:s.a.number}),label:s.a.string,category:s.a.string,categoryUrl:s.a.string,pubDate:s.a.string,meta:s.a.object,onReady:s.a.func}),ae(ce,"defaultProps",{styles:{classes:{}},type:"normal",size:"normal",title:"",titleCfg:{},description:"",descriptionCfg:{},label:"",category:"",categoryUrl:"",pubDate:"",meta:{},onReady:()=>{}});class de extends i.PureComponent{render(){const{description:e,descriptionCfg:t,onReady:n}=this.props;return r.a.createElement(se.a,{maxLines:t.maxLines,text:e,onReady:n})}}le(de,"propTypes",{styles:s.a.object,type:s.a.oneOf(["normal","ad","promo","exchange"]),size:s.a.oneOf(["normal","wide"]),title:s.a.string,titleCfg:s.a.shape({maxLines:s.a.number}),description:s.a.string,descriptionCfg:s.a.shape({maxLines:s.a.number}),label:s.a.string,category:s.a.string,categoryUrl:s.a.string,pubDate:s.a.string,meta:s.a.object,onReady:s.a.func}),le(de,"defaultProps",{styles:{classes:{}},type:"normal",size:"normal",title:"",titleCfg:{},description:"",descriptionCfg:{},label:"",category:"",categoryUrl:"",pubDate:"",meta:{},onReady:()=>{}});var ue={moveForward:{"animation-name":"$moveForward"},moveBack:{"animation-name":"$moveBack"},"@keyframes moveForward":{from:{transform:"translateX(var(--mws))"},to:{transform:"translateX(var(--mwf))"}},"@keyframes moveBack":{from:{transform:"translateX(var(--mws))"},to:{transform:"translateX(var(--mwf))"}}};function he(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const pe={},fe=new l.b;class ge extends i.PureComponent{constructor(e){super(e),he(this,"componentWillUnmount",(()=>{const{local:e}=this.context;Object(u.c)({widgetId:e.id,styleSheetsDict:pe,sheetsManager:fe})})),he(this,"handleDisclaimerReady",(()=>{const{onReady:e}=this.props;e()})),he(this,"getTranslateX",(()=>Math.abs(+getComputedStyle(this._text).transform.match(/([^)]+)\((.*)\)/)[2].split(",")[4]))),he(this,"moveForward",(()=>{const{local:e}=this.context,{clientWidth:t}=this._text,n=this._text.parentNode.clientWidth,i=n-t,r=this.getTranslateX(),o={"animation-duration":(t-n-r)/50+"s","--mws":`-${r}px`,"--mwf":`${i<0?i:0}px`};this.setState({animation:"forward"},(()=>{e.jss.createRule(o).applyTo(this._text)}))})),he(this,"moveBack",(()=>{const{local:e}=this.context,t=this.getTranslateX(),n={"animation-duration":t/50+"s","--mws":`-${t}px`,"--mwf":"0px"};this.setState({animation:"back"},(()=>{e.jss.createRule(n).applyTo(this._text)}))})),this.state={animation:"none"},this.handleDisclaimerReady=Object(c.a)(this.handleDisclaimerReady)}componentWillMount(){const{local:e}=this.context;Object(u.b)({jss:e.jss,stylesSrc:ue,styleSheetsDict:pe,widgetId:e.id,sheetsManager:fe})}componentDidMount(){const{local:e}=this.context;e.jss.createRule({"animation-fill-mode":"forwards","animation-direction":"normal","animation-delay":"0s","animation-iteration-count":1,"animation-timing-function":"linear","animation-duration":"var(--ms)"}).applyTo(this._text),this.handleDisclaimerReady()}render(){const{local:e}=this.context,{disclaimer:t,styles:n}=this.props,{animation:i}=this.state,o=v()(n.classes.disclaimerText,{[pe[e.id].sheet.classes.moveForward]:"forward"===i,[pe[e.id].sheet.classes.moveBack]:"back"===i});return r.a.createElement("div",{onFocus:this.moveForward,onMouseOver:this.moveForward,onMouseLeave:this.moveBack,ref:e=>{this._text=e},className:o},t)}}function me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}he(ge,"propTypes",{styles:s.a.object,type:s.a.oneOf(["normal","ad","promo","exchange"]),size:s.a.oneOf(["normal","wide"]),title:s.a.string,titleCfg:s.a.shape({maxLines:s.a.number}),description:s.a.string,descriptionCfg:s.a.shape({maxLines:s.a.number}),disclaimer:s.a.string,label:s.a.string,category:s.a.string,categoryUrl:s.a.string,pubDate:s.a.string,meta:s.a.object,onReady:s.a.func}),he(ge,"contextTypes",{local:s.a.object.isRequired}),he(ge,"defaultProps",{styles:{classes:{}},type:"normal",size:"normal",title:"",titleCfg:{},description:"",descriptionCfg:{},disclaimer:"",label:"",category:"",categoryUrl:"",pubDate:"",meta:{},onReady:()=>{}});class be extends i.PureComponent{render(){const{mainTitle:e,styles:t}=this.props;return e.label?r.a.createElement("div",{className:t.classes.mainTitle},e.label):null}}me(be,"propTypes",{styles:s.a.object,mainTitle:s.a.shape({label:s.a.string})}),me(be,"defaultProps",{styles:{classes:{}},mainTitle:{}});var ye=n(1380);function ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class we extends i.PureComponent{render(){const{recIndex:e,src:t,aspectRatio:n,aspectRatioFallback:i,onPreload:o,onLoad:s,setThumbItem:a,aspectRatioApplyToRecs:c,aspectRatioApplyToRecTypes:l,recSize:d,recType:u,isInViewport:h,isInViewportAnimation:p}=this.props;return r.a.createElement(ye.a,{src:t,aspectRatio:n,aspectRatioFallback:i,aspectRatioApplyToRecs:c,aspectRatioApplyToRecTypes:l,recSize:d,recType:u,isInViewport:h,recIndex:e,isInViewportAnimation:p,onPreload:o,onLoad:s,setThumbItem:a})}}ve(we,"propTypes",{src:s.a.arrayOf(s.a.shape({width:s.a.number.isRequired,height:s.a.number.isRequired,src:s.a.string.isRequired})),aspectRatio:s.a.number,aspectRatioFallback:s.a.number,aspectRatioApplyToRecs:s.a.array,aspectRatioApplyToRecTypes:s.a.array,recSize:s.a.string,recType:s.a.string,isInViewport:s.a.bool,isInViewportAnimation:s.a.bool,recIndex:s.a.number,onPreload:s.a.func,onLoad:s.a.func,setThumbItem:s.a.func}),ve(we,"defaultProps",{src:[],aspectRatio:null,aspectRatioFallback:21/16,aspectRatioApplyToRecs:["normal"],aspectRatioApplyToRecTypes:["ad"],recSize:"",recType:"",isInViewport:!1,isInViewportAnimation:!1,recIndex:0,onPreload:()=>{},onLoad:()=>{},setThumbItem:()=>{}});var Ie=n(1376),Ce=n(1497),Oe=n(20),Se=n(1410),Re=n(61),je=n(439),xe=n.n(je),Ee=n(1377);function ke(e=[],t=1e3){return new Promise((n=>{const i=e.map((e=>new Promise((n=>{switch(e.type){case"img":const i=new Image;i.onload=n,i.onerror=n,i.src=e.src,setTimeout(n,t)}}))));Promise.all(i).then(n)}))}var Te=n(3);const Pe=["mute","unmute","pause","resume"];class We{constructor({tracking:e,trackingTimeout:t=500}={}){this._tracking=e,this._trackingTimeout=t,this._pixelsShooted=[]}track({pixels:e,tracking:t}){const n=this._pixelsShooted,i=t||this._tracking,r=this._trackingTimeout;if(!i)return Promise.resolve();return new Promise((t=>{const o=e.map((e=>{const t=i[e];return!Object(Te.a)(t)||n.includes(e)&&!Pe.includes(e)?Promise.resolve():(n.includes(e)||n.push(e),o=t,new Promise((e=>{const t=o.map((e=>new Promise((t=>{const n=new Image;n.onload=t,n.onerror=t,n.src=e,setTimeout(t,r)}))));Promise.all(t).then(e)})));var o}));Promise.all(o).then(t)}))}}var _e=n(1370),Le=n(1371),Ae={root:{display:"none",position:"fixed",top:0,left:0,right:0,bottom:0,"z-index":99999,overflow:"auto","font-size":0,"line-height":0,"&$visible":{display:"block"}},visible:{}},Me=n(1570);function De(){return(De=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const $e={},Ne=new l.b;class Be extends i.PureComponent{constructor(e){super(e),ze(this,"componentWillUnmount",(()=>{const{local:e}=this.context;Object(u.c)({widgetId:e.id,styleSheetsDict:$e,sheetsManager:Ne}),this.unlockGlobalScroll()})),ze(this,"lockGlobalScroll",(()=>{var e,t;const{global:n}=this.context;null!==(e=n.document)&&void 0!==e&&null!==(t=e.body)&&void 0!==t&&t.style&&(n.document.body.style.overflow="hidden")})),ze(this,"unlockGlobalScroll",(()=>{var e,t;const{global:n}=this.context;null!==(e=n.document)&&void 0!==e&&null!==(t=e.body)&&void 0!==t&&t.style&&(n.document.body.style.overflow="")})),ze(this,"handleVisibility",(({popupArticleVisible:e})=>{e?this.lockGlobalScroll():this.unlockGlobalScroll()})),ze(this,"handleCloseButtonClick",(()=>{const{onCloseButtonClick:e}=this.props;e(),this.unlockGlobalScroll()})),ze(this,"getRootRef",(()=>this._rootElRef)),this._rootElRef=Object(i.createRef)()}componentWillMount(){const{local:e}=this.context;Object(u.b)({jss:e.exposedJss,stylesSrc:Ae,styleSheetsDict:$e,widgetId:e.id,sheetsManager:Ne})}componentDidMount(){this.handleVisibility(this.props)}componentDidUpdate(){this.handleVisibility(this.props)}render(){const{local:e}=this.context,{popupArticleVisible:t}=this.props,n=$e[e.id].sheet,i=v()(n.classes.root,{[n.classes.visible]:t});return r.a.createElement("div",{className:i,ref:this._rootElRef},r.a.createElement(Le.a,De({},this.props,{Content:Me.a,getScrollableElRef:this.getRootRef,onCloseButtonClick:this.handleCloseButtonClick})))}}ze(Be,"propTypes",{popupArticleVisible:s.a.bool,onCloseButtonClick:s.a.func}),ze(Be,"contextTypes",{local:s.a.object.isRequired,global:s.a.object.isRequired}),ze(Be,"defaultProps",{popupArticleVisible:!1,onCloseButtonClick:()=>{}});var Ve={customRecWrapper:{display:"flex"}};function qe(){return(qe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function Fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ue={},He=new l.b,Ge=1e3,Qe=2e3,Ke=1e3,Je={position:"absolute",left:"-9999px",top:"-9999px",visibility:"hidden"};class Xe extends i.PureComponent{constructor(e){super(e),Fe(this,"isAtLeastOneVisibleField",(()=>{const{rec:e,cfg:t,onRecError:n}=this.props;if(e.article||e.customRec)return;const i=["recTitle","recDescription","recThumbnail","recVideo"],r=["title","description","thumbnails","video"],o=i.reduce(((e,t,n)=>({...e,[t]:r[n]})),{}),s=i.reduce(((e,n)=>{var i;return{...e,[n]:null===(i=t[n])||void 0===i?void 0:i.visible}}),{}),a=r.reduce(((t,n)=>({...t,[n]:Object(Oe.a)(e[n])?!!e[n]&&e[n].length>0:!!e[n]})),{}),c=i.reduce(((e,t)=>({...e,[t]:s[t]&&a[o[t]]})),{});Object.values(c).some((e=>!0===e))||n({id:e.id,errorType:"empty_rec"})})),Fe(this,"componentWillUnmount",(()=>{var e;const{local:t,global:n}=this.context,{onRecUnmount:i,rec:{id:r}}=this.props;Object(u.c)({widgetId:t.id,styleSheetsDict:Ue,sheetsManager:He}),this.removeExternalEventListeners();const o=null===(e=n.document)||void 0===e?void 0:e.getElementById(this.getRecPopupElId());o&&(Object(Re.render)(null,o),o.remove()),i(r)})),Fe(this,"checkHasPopupArticle",(()=>{const{rec:{article:e}}=this.props;return"popup_article"===(null==e?void 0:e.type)})),Fe(this,"getTarget",(()=>{const{rec:{type:e},cfg:{recOpenInNewTab:t=!1}}=this.props;return"ad"!==e&&!t||this.checkHasPopupArticle()?void 0:"_blank"})),Fe(this,"checkIsImgOverlay",(()=>{const{cfg:{preset:e}}=this.props;return"imgOverlay"===e})),Fe(this,"checkIsCriteoHbCustom",(()=>{const{rec:{customRec:e={}}}=this.props;return"criteo_hb"===e.name})),Fe(this,"checkIsWideInlineLocalAd",(()=>{const{rec:{adOrigin:e="",size:t,type:n}}=this.props;return"local"===e&&"wide"===t&&"ad"===n})),Fe(this,"getVisibilityThreshold",(()=>this.checkIsImgOverlay()?95:50)),Fe(this,"checkIsClickable",(()=>{const{rec:{vastCfg:e}}=this.props;return!(null!=e&&e.pending||"vpaid"===(null==e?void 0:e.playertype))})),Fe(this,"getRecPopupElId",(()=>{const{rec:{id:e}}=this.props;return`relap-popup-${e}`})),Fe(this,"removeExternalEventListeners",(()=>{const{global:e}=this.context;this._intersectionObserver&&this._intersectionObserver.disconnect(),e.document.removeEventListener("visibilitychange",this.handlePageVisibilityChange)})),Fe(this,"handleOnLoadEvents",(()=>{const{rec:{onLoad:e}}=this.props;return ke(e)})),Fe(this,"handleOnShowEvents",(()=>{const{rec:{onShow:e}}=this.props;return ke(e)})),Fe(this,"handleOnClickEvents",(()=>{const{rec:{onClick:e}}=this.props;return ke(e)})),Fe(this,"handleCustomRecComponent",(({rec:{id:e,customRec:t},onRecError:n})=>{const{loadCustomRec:i}=this.context,{instanceId:r,cfgId:o}=this.props,{CustomRec:s}=this.state;t&&!s&&(t.name?(Object(d.e)({id:`load ${t.name} custom rec`,instanceId:r,cfgId:o}),i(t.name).then((e=>{Object(d.d)({id:`load ${t.name} custom rec`,instanceId:r,cfgId:o}),this.setState({CustomRec:e})})).catch((t=>{console.error("custom_rec_fetch_fail: ",t),n({id:e,errorType:"custom_rec_fetch_fail"})}))):n({id:e,errorType:"custom_rec_no_name"}))})),Fe(this,"handleVideoComponent",(({rec:{video:e}})=>{const{loadVideoComponent:t}=this.context,{Video:n}=this.state;e&&!n&&(Object(d.c)({id:"load video chunk",groupId:"init"}),t().then((e=>{const t=e.default;Object(d.b)({id:"load video chunk",groupId:"init"}),this.setState({Video:t})})))})),Fe(this,"handleArticleComponent",(({rec:{article:e}})=>{const{loadArticleComponent:t}=this.context,{Article:n}=this.state;e&&!n&&(Object(d.c)({id:"load article chunk",groupId:"init"}),t().then((e=>{const t=e.default;Object(d.b)({id:"load article chunk",groupId:"init"}),this.setState({Article:t})})))})),Fe(this,"handleRecInViewport",(()=>{const{rec:{id:e},onRecInViewport:t}=this.props;t(e)})),Fe(this,"handleRecOutOfViewport",(()=>{const{rec:{id:e},onRecOutOfViewport:t}=this.props;t(e)})),Fe(this,"handleRecShow",(()=>{const{rec:{id:e},onRecShow:t}=this.props;this.handleOnShowEvents(),t(e)})),Fe(this,"getRequiredTimeInViewport",(()=>{const e=this.checkIsImgOverlay(),t=this.checkIsCriteoHbCustom(),n=this.checkIsWideInlineLocalAd();return e?Qe:t?Ge:n?Ke:0})),Fe(this,"checkShouldRecShowBeDelayed",(()=>!![this.checkIsImgOverlay(),this.checkIsCriteoHbCustom(),this.checkIsWideInlineLocalAd()].filter((e=>e)).length)),Fe(this,"delayedRecShowStart",(()=>{this.delayedRecShowSent||this.inViewportInterval||(this.inViewportTimeStart=new Date,this.inViewportInterval=setInterval((()=>{new Date-this.inViewportTimeStart>=this.getRequiredTimeInViewport()&&(this.handleRecShow(),this.delayedRecShowSent=!0,clearInterval(this.inViewportInterval),this.inViewportInterval=null)}),100))})),Fe(this,"delayedRecShowStop",(()=>{clearInterval(this.inViewportInterval),this.inViewportInterval=null,this.inViewportTimeStart=1/0})),Fe(this,"getRecSubtype",(()=>{const{rec:{article:e}}=this.props;return"inline_article"===(null==e?void 0:e.type)?"inlineArticle":"banner"})),Fe(this,"intersectionObserverCallback",(e=>{const{global:t}=this.context;e.forEach((e=>{const n=this.checkShouldRecShowBeDelayed(),i="visible"===t.window.document.visibilityState;e.isIntersecting&&i?(this.handleRecInViewport(),n?this.delayedRecShowStart():this.handleRecShow(),this.setState({isInViewport:!0})):(this.handleRecOutOfViewport(),n&&!this.delayedRecShowSent&&this.delayedRecShowStop(),this.setState({isInViewport:!1}))}))})),Fe(this,"handlePageVisibilityChange",(()=>{const{global:e}=this.context,{isInViewport:t}=this.state;"visible"!==e.window.document.visibilityState&&t&&this.setState({isInViewport:!1}),this._recEl&&(this._intersectionObserver.unobserve(this._recEl),this._intersectionObserver.observe(this._recEl))})),Fe(this,"handleNewTabOpen",(()=>{const{onNewTabOpen:e,rec:{id:t,type:n}}=this.props;this.handleTrackingEvents(["clicktracking"]),this.handleOnClickEvents(),e({id:t,type:n,clickOrigin:"banner"})})),Fe(this,"handleSameTabOpen",(()=>{const e=this.checkHasPopupArticle();e&&this.setState({popupArticleVisible:!0}),this.handleRecHrefFollow({follow:!e,clickOrigin:e?"popupArticle":"banner"})})),Fe(this,"handleTrackingEvents",(e=>{const{rec:{vastCfg:t}}=this.props,n=null==t?void 0:t.tracking;return n?this._videoEventTracker.track({pixels:e,tracking:n}):Promise.resolve()})),Fe(this,"handleVideoComplete",(()=>{const{rec:{id:e},onRecClose:t,onRecComplete:n,isFlyrolled:i}=this.props;n({id:e}),i&&t({id:e})})),Fe(this,"handleRecHrefFollow",(({follow:e=!0,clickOrigin:t="banner"}={})=>{const{onSameTabOpen:n,onNewTabOpen:i,rec:{id:r,type:o},cfg:{recOpenInNewTab:s=!1},onRecClose:a,isFlyrolled:c}=this.props;if(s||"ad"===o)return this.handleTrackingEvents(["clicktracking"]),this.handleOnClickEvents(),void i({id:r,type:o,manually:e,clickOrigin:t});n({id:r,recPromise:new Promise((e=>{Promise.all([this.handleTrackingEvents(["clicktracking"]),this.handleOnClickEvents()]).then(e)}))}),c&&a({id:r})})),Fe(this,"handleArticleScrollUpdate",(e=>{const{rec:{id:t},onRecArticleScrollPercentUpdate:n}=this.props;n({id:t,percent:e})})),Fe(this,"handleInlineArticleVisibleAreaUpdate",(e=>{this.handleArticleScrollUpdate(e),e>=50&&this.handleRecShow()})),Fe(this,"handleArticleLinkClick",(()=>{const{rec:{id:e},onRecArticleClick:t}=this.props;t({id:e})})),Fe(this,"handleInlineArticleLinkClick",(()=>{this.handleArticleLinkClick(),this.handleRecHrefFollow({follow:!1,clickOrigin:"inlineArticle"})})),Fe(this,"handlePopupArticleVisibleAreaUpdate",(e=>{this.handleArticleScrollUpdate(e)})),Fe(this,"handlePopupArticleLinkClick",(()=>{this.handleArticleLinkClick()})),Fe(this,"handlePopupArticleCloseButtonClick",(()=>{const{rec:{id:e},onRecComplete:t}=this.props;this.setState({popupArticleVisible:!1}),t({id:e})})),Fe(this,"handleVideoError",(({errorType:e,errorText:t,errorCode:n,errorStage:i,errorDescription:r})=>{const{rec:{id:o},onRecError:s}=this.props;s({id:o,errorType:e,errorGroup:"video",errorText:t,errorCode:n,errorStage:i,errorDescription:r})})),Fe(this,"handleVideoTimePercentUpdate",(e=>{const{rec:{id:t,video:{vastDomain:n}},onRecVideoTimePercentUpdate:i}=this.props;i({id:t,vastDomain:n,percent:e})})),Fe(this,"handleRecClose",(()=>{const{rec:{id:e},onRecClose:t}=this.props;this.handleTrackingEvents(["close"]),t({id:e})})),Fe(this,"handleCustomRecError",(()=>{const{rec:{id:e},onRecError:t}=this.props;t({id:e,errorType:"custom_rec",errorGroup:"customRec"})})),Fe(this,"handleCustomRecComplete",(()=>{const{rec:{id:e},onRecComplete:t}=this.props;t({id:e})})),Fe(this,"handleCustomRecEvent",(({category:e,action:t,userInput:n,tags:i})=>{const{rec:{id:r,customRec:{name:o}},onRecCustomEvent:s}=this.props;s({id:r,project:o,category:e,action:t,userInput:n,tags:i})})),Fe(this,"renderLink",(({children:e,className:t})=>{const{isPreview:n}=this.context,{rec:{href:i,type:o,title:s},cfg:a}=this.props,c=this.getTarget();return this.checkIsClickable()?r.a.createElement(_e.a,{isPreview:n,href:Object(h.w)(i,o,a),target:c,className:t,onNewTabOpen:this.handleNewTabOpen,onSameTabOpen:this.handleSameTabOpen,title:s,dataTest:"rec-link"},e):r.a.createElement("div",{className:t},e)})),Fe(this,"renderLinkOverlay",(({zIndex:e})=>{const{isPreview:t}=this.context,{rec:{href:n,type:i,title:o},cfg:s}=this.props,a=this.getTarget();return this.checkIsClickable()?r.a.createElement(Ie.a,{isPreview:t,href:Object(h.w)(n,i,s),target:a,zIndex:e,onNewTabOpen:this.handleNewTabOpen,onSameTabOpen:this.handleSameTabOpen,title:o,dataTest:"rec-link"}):null})),Fe(this,"renderCloseButtonOverlay",(()=>{const{widgetStyles:e,cfg:{recClose:{visible:t}={}},isFlyrolled:n}=this.props;return t||n?r.a.createElement(Ie.a,{className:e.classes.closeButtonOverlay,zIndex:1e5,dataTest:"rec-close-button",onClick:this.handleRecClose}):null})),Fe(this,"renderVideo",(()=>{const{cfg:{recVideo:{visible:e,sizingType:t,aspectRatioWidth:n,aspectRatioHeight:i,lastFrameControls:o}={}},rec:{id:s,video:a,vastCfg:c,size:l},onRecError:d}=this.props,{isInViewport:u,Video:h}=this.state;if(!a||!e)return null;let p,f,g,m,b,y=!0;switch(a.type){case"normal":p="regular",f=a.normal.srcs;break;case"vast2.0":c.pending?p="loader":(p=c.playertype,f=c.mediafile,g=c.adparameters,y=c.hasControls);break;case"vast":p="vast",m=a.vast,b=a.vastDomain;break;default:return d({id:s,errorType:"unknown_video_type",errorGroup:"video"}),null}const v=this.callbackPromisizer.createCb("video");if(!h)return null;const w="wide"===l?16:n,I="wide"===l?9:i;return r.a.createElement(h,{playertype:p,vastString:m,vastDomain:b,mediafile:f,adparameters:g,hasControls:y,sizingType:t,aspectRatioWidth:w,aspectRatioHeight:I,lastFrameControls:o,paused:!u,isInViewport:u,onReady:v,onError:this.handleVideoError,onTimePercentUpdate:this.handleVideoTimePercentUpdate,onClickThrough:this.handleRecHrefFollow,onTrackingEvents:this.handleTrackingEvents,onComplete:this.handleVideoComplete})})),Fe(this,"setThumbItem",(e=>{this.setState({thumbItem:e})})),Fe(this,"setLabelEl",(e=>{this.setState({labelEl:e})})),Fe(this,"renderThumbnail",(()=>{const{rec:{thumbnails:e,size:t,type:n,title:i},recIndex:o,cfg:{recThumbnail:{visible:s,aspectRatioWidth:a=4,aspectRatioHeight:c=3,aspectRatioApplyToRecs:l=["normal"],aspectRatioApplyToRecTypes:d=["ad"],isInViewportAnimation:u=!1}={}},ThumbnailLayout:p}=this.props,{isInViewport:f}=this.state;if(!s||!e)return null;const g=a/c,m="wide"!==t||l.includes("wide")?g:Object(h.v)(e),b=this.callbackPromisizer.createCb("thumbnail"),y=xe()(i,e[0].src);return r.a.createElement(p,{key:y,src:e,aspectRatio:m,aspectRatioFallback:g,aspectRatioApplyToRecs:l,aspectRatioApplyToRecTypes:d,recSize:t,recType:n,recIndex:o,isInViewportAnimation:u,isInViewport:f,onPreload:b,setThumbItem:this.setThumbItem})})),Fe(this,"renderTitle",(()=>{const{widgetStyles:e,rec:t,cfg:{recTitle:n={},recDescription:i={},recAd:o={},recItem:s={},recThumbnail:{visible:a=!1}},TitleLayout:c}=this.props,{thumbItem:l,labelEl:d}=this.state,{cutTextUntilThumbnailBottom:u}=s;if(!n.visible||!t.title)return null;const h=this.callbackPromisizer.createCb("title");return r.a.createElement(c,{styles:e,type:t.type,size:t.size,title:t.title,titleCfg:n,description:t.description,descriptionCfg:i,label:o.label,category:t.category,categoryUrl:t.categoryUrl,pubDate:t.pubDate,meta:t.meta,onReady:h,cutTextUntilThumbnailBottom:u&&a,cutUntilEl:l,labelEl:d})})),Fe(this,"renderDescription",(()=>{const{widgetStyles:e,rec:t,cfg:{recTitle:n={},recDescription:i={},recAd:o={},recItem:s={},recThumbnail:{visible:a=!1}},DescriptionLayout:c}=this.props,{thumbItem:l,labelEl:d}=this.state,{cutTextUntilThumbnailBottom:u}=s;if(!i.visible||!t.description)return null;const h=this.callbackPromisizer.createCb("description");return r.a.createElement(c,{styles:e,type:t.type,size:t.size,title:t.title,titleCfg:n,description:t.description,descriptionCfg:i,label:o.label,category:t.category,categoryUrl:t.categoryUrl,pubDate:t.pubDate,meta:t.meta,onReady:h,cutTextUntilThumbnailBottom:u&&a,cutUntilEl:l,labelEl:d})})),Fe(this,"renderDisclaimer",(()=>{const{widgetStyles:e,rec:t,cfg:{recTitle:n={},recDescription:i={},recAd:o={}},DisclaimerLayout:s}=this.props;if(!t.disclaimer)return null;const a=this.callbackPromisizer.createCb("disclaimer");return r.a.createElement(s,{styles:e,type:t.type,size:t.size,title:t.title,titleCfg:n,description:t.description,descriptionCfg:i,disclaimer:t.disclaimer,label:o.label,category:t.category,categoryUrl:t.categoryUrl,pubDate:t.pubDate,meta:t.meta,onReady:a})})),Fe(this,"renderLabel",(()=>{var e;const{rec:t,cfg:{recAd:n={},recPromo:i={},recExchange:r={}},isAdLabelInsideRec:o}=this.props;if(!o)return null;const s=null==r||null===(e=r.label)||void 0===e?void 0:e.visible;switch(t.type){case"ad":return n.label?n.label:null;case"promo":return i.label?i.label:null;case"exchange":return s?t.exchangeDomain:null;default:return null}})),Fe(this,"handleRootElRef",(e=>{this._recEl=e,this._intersectionObserver&&e&&this._intersectionObserver.observe(e)})),Fe(this,"renderCustomRec",(()=>{const{local:e,isPreview:t}=this.context,{previewCfg:n,isHidden:i,widgetStyles:o,cfg:{recAd:s={}},isAdLabelInsideRec:a,onSliderButtonContentSizeChange:c}=this.props,{CustomRec:l,isInViewport:d}=this.state,u=this.callbackPromisizer.createCb("customRec");if(this._cpShouldBeFinalized=!0,!l)return null;const h=Ue[e.id].sheet,p=v()(o.classes.customRecWrapper,h.classes.customRecWrapper),f=Object(Se.a)(this.props,["onRecMount","onRecLoad","onRecShow","onRecInViewport","onRecOutOfViewport","onRecUnmount","onNewTabOpen","onSameTabOpen","onRecVideoTimePercentUpdate","onRecError","onRecComplete","onRecClose","onRecCustomEvent"]);return r.a.createElement("div",{className:p,ref:this.handleRootElRef,style:i?Je:void 0},r.a.createElement(l,qe({},f,{isInViewport:d,isPreview:t,previewCfg:n,adLabel:a&&s.label?s.label:null,onSliderButtonContentSizeChange:c,onReady:()=>{u()},onError:this.handleCustomRecError,onComplete:this.handleCustomRecComplete,onRecFollow:this.handleRecHrefFollow,onCustomEvent:this.handleCustomRecEvent,onRecClose:this.handleRecClose})))})),Fe(this,"renderInlineArticle",(()=>{const{widgetStyles:e,isHidden:t,ArticleHeaderLayout:n,rec:{article:i}}=this.props,{Article:o}=this.state,s=this.callbackPromisizer.createCb("article");return this._cpShouldBeFinalized=!0,o?r.a.createElement("div",{className:e.classes.inlineArticle,ref:this.handleRootElRef,style:t?Je:void 0},r.a.createElement(o,qe({},i,{widgetStyles:e,ArticleHeaderLayout:n,onReady:s,onVisibleAreaUpdate:this.handleInlineArticleVisibleAreaUpdate,onLinkClick:this.handleInlineArticleLinkClick}))):null})),Fe(this,"renderPopupArticle",(()=>{const{global:e}=this.context,{widgetStylesSrc:t,ArticleHeaderLayout:n,rec:{article:i},cfg:o}=this.props,{Article:s,popupArticleVisible:a}=this.state,c=this.getRecPopupElId();if(!s||(()=>{const{global:e}=this.context,{popupArticleVisible:t}=this.state,n=this.getRecPopupElId();return!e.document.getElementById(n)&&!t})())return null;const l=e.document.getElementById(c)||(e=>{const{global:t}=this.context,n=document.createElement("div");return n.id=e,t.document.body.appendChild(n),n})(c);return Object(Re.createPortal)(r.a.createElement(Be,{cfg:o,popupArticleVisible:a,widgetStylesSrc:t,ArticleComponent:s,ArticleHeaderLayout:n,article:i,onVisibleAreaUpdate:this.handlePopupArticleVisibleAreaUpdate,onLinkClick:this.handlePopupArticleLinkClick,onCloseButtonClick:this.handlePopupArticleCloseButtonClick}),l)})),this.state={CustomRec:null,Video:null,Article:null,isInViewport:!1,popupArticleVisible:!1,thumbItem:null,labelEl:null},this._isLoaded=!1,this._videoEventTracker=new We,this.inViewportInterval=null,this.delayedRecShowSent=!1,this.inViewportTimeStart=1/0,this._intersectionObserver=new IntersectionObserver(this.intersectionObserverCallback,{threshold:this.getVisibilityThreshold()/100}),this.handleOnLoadEvents=Object(c.a)(this.handleOnLoadEvents),this.handleOnShowEvents=Object(c.a)(this.handleOnShowEvents),this.handleOnClickEvents=Object(c.a)(this.handleOnClickEvents),this.handleRecShow=Object(c.a)(this.handleRecShow)}componentWillMount(){const{local:e}=this.context,{onRecLoad:t,rec:{id:n}}=this.props;Object(u.b)({jss:e.jss,stylesSrc:Ve,styleSheetsDict:Ue,widgetId:e.id,sheetsManager:He}),this.callbackPromisizer=new Ee.a((()=>{this.handleOnLoadEvents(),this._isLoaded=!0,t({id:n})})),this.handleCustomRecComponent(this.props),this.handleVideoComponent(this.props),this.handleArticleComponent(this.props)}componentDidMount(){const{global:e}=this.context,{onRecMount:t,rec:{id:n}}=this.props;e.document.addEventListener("visibilitychange",this.handlePageVisibilityChange),this._cpShouldBeFinalized&&this.callbackPromisizer.finalize(),t({id:n,recEl:this._recEl}),this.isAtLeastOneVisibleField()}componentWillReceiveProps(e){this.handleCustomRecComponent(e),this.handleVideoComponent(e),this.handleArticleComponent(e)}componentDidUpdate(){this._cpShouldBeFinalized&&this.callbackPromisizer.finalize()}render(){var e;const{isHidden:t,rec:n,slot:i,recComposition:o,recIndex:s,recsLength:a,recsSizes:c,widgetStyles:l,RecPreLayout:d,RecLayout:u,onRecError:h,cfg:{flyRoll:p},isFlyrolled:f}=this.props,g=c[i.slotId],{classes:m}=l;if(n.error)return h({...n.error,id:n.id}),null;if(n.customRec)return this.renderCustomRec();if("inline_article"===(null===(e=n.article)||void 0===e?void 0:e.type))return this.renderInlineArticle();const b=this.checkHasPopupArticle()?this.renderPopupArticle():null;let y;this._cpShouldBeFinalized=!0;const w={[m.recItemNormalSize]:"normal"===n.size,[m.recItemWideSize]:"wide"===n.size};switch(o){case"normalPlate":case"normalList":y=v()({...w,[m.recItemNormalPlate]:"normalPlate"===o,[m.recItemNormalList]:"normalList"===o});break;case"fullPlate":case"fullList":default:y=v()({...w,[m.recItemFullPlate]:"fullPlate"===o,[m.recItemFullList]:"fullList"===o})}return r.a.createElement("div",{ref:this.handleRootElRef,style:t?Je:void 0,className:y,"data-index":s,"data-is-first-child":0===s,"data-is-last-child":s===a-1,"data-is-odd-child":!!((s+1)%2),"data-is-even-child":!((s+1)%2)},b,r.a.createElement(d,{styles:l,recSizes:g,flyRollCfg:p,isFlyrolled:f,RecLayout:u,recComposition:o,type:n.type,size:n.size,renderLink:this.renderLink,renderLinkOverlay:this.renderLinkOverlay,closeButtonOverlay:this.renderCloseButtonOverlay(),video:this.renderVideo(),thumbnail:this.renderThumbnail(),title:this.renderTitle(),description:this.renderDescription(),disclaimer:this.renderDisclaimer(),label:this.renderLabel(),category:n.category,categoryUrl:n.categoryUrl,pubDate:n.pubDate,meta:n.meta,setLabelEl:this.setLabelEl}))}}function Ye(){return(Ye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}Fe(Xe,"propTypes",{widgetStyles:s.a.object,widgetStylesSrc:s.a.object.isRequired,isHidden:s.a.bool,RecPreLayout:s.a.func.isRequired,RecLayout:s.a.func.isRequired,TitleLayout:s.a.func.isRequired,DescriptionLayout:s.a.func.isRequired,DisclaimerLayout:s.a.func.isRequired,ArticleHeaderLayout:s.a.func,ThumbnailLayout:s.a.func.isRequired,instanceId:s.a.string.isRequired,cfgId:s.a.string.isRequired,previewCfg:s.a.object,cfg:s.a.shape({recClose:s.a.shape({visible:s.a.bool}),recThumbnail:s.a.shape({visible:s.a.bool,aspectRatioWidth:s.a.number,aspectRatioHeight:s.a.number,aspectRatioApplyToRecs:s.a.array,aspectRatioApplyToRecTypes:s.a.array}),recVideo:s.a.shape({visible:s.a.bool,sizingType:s.a.oneOf(["contain","crop"]),aspectRatioWidth:s.a.number,aspectRatioHeight:s.a.number,lastFrameControls:s.a.bool}),recTitle:s.a.shape({visible:s.a.bool,maxLines:s.a.number}),recItem:s.a.shape({cutTextUntilThumbnailBottom:s.a.bool}),recDescription:s.a.shape({visible:s.a.bool,maxLines:s.a.number}),recAd:s.a.shape({label:s.a.string}),recPromo:s.a.shape({label:s.a.string}),recOpenInNewTab:s.a.bool,flyRoll:s.a.object,recExchange:s.a.object,preset:s.a.string}).isRequired,isAdLabelInsideRec:s.a.bool,rec:s.a.shape({id:s.a.string.isRequired,href:s.a.string.isRequired,customRec:s.a.shape({name:s.a.string}),thumbnails:s.a.arrayOf(s.a.shape({width:s.a.number.isRequired,height:s.a.number.isRequired,src:s.a.string.isRequired})),video:s.a.shape({type:s.a.oneOf(["normal","vast2.0","vast"]),vastDomain:s.a.string,normal:s.a.shape({srcs:s.a.array}),vast20:s.a.shape({id:s.a.string.isRequired,raw:s.a.string}),vast:s.a.string}),title:s.a.string,description:s.a.string,disclaimer:s.a.string,article:s.a.shape({type:s.a.oneOf(["inline_article","popup_article"]).isRequired}),type:s.a.oneOf(["normal","ad","promo","exchange"]).isRequired,size:s.a.oneOf(["normal","wide"]).isRequired,vastCfg:s.a.object,category:s.a.string,categoryUrl:s.a.string,pubDate:s.a.string,error:s.a.object,onLoad:s.a.arrayOf(s.a.shape({type:s.a.oneOf(["img"]),src:s.a.string})),onShow:s.a.arrayOf(s.a.shape({type:s.a.oneOf(["img"]),src:s.a.string})),onClick:s.a.arrayOf(s.a.shape({type:s.a.oneOf(["img"]),src:s.a.string})),meta:s.a.object,exchangeDomain:s.a.string,adOrigin:s.a.string}).isRequired,recComposition:s.a.oneOf(["normalPlate","fullPlate","normalList","fullList"]),slot:s.a.shape({slotId:s.a.string.isRequired}).isRequired,recsSizes:s.a.object,recIndex:s.a.number.isRequired,recsLength:s.a.number.isRequired,vastCfgs:s.a.object,isFlyrolled:s.a.bool,onRecMount:s.a.func,onRecLoad:s.a.func,onRecInViewport:s.a.func,onRecOutOfViewport:s.a.func,onRecShow:s.a.func,onRecUnmount:s.a.func,onNewTabOpen:s.a.func,onSameTabOpen:s.a.func,onRecVideoTimePercentUpdate:s.a.func,onRecArticleScrollPercentUpdate:s.a.func,onRecArticleClick:s.a.func,onRecError:s.a.func,onRecComplete:s.a.func,onRecClose:s.a.func,onRecCustomEvent:s.a.func,onSliderButtonContentSizeChange:s.a.func}),Fe(Xe,"contextTypes",{local:s.a.object.isRequired,global:s.a.object.isRequired,isPreview:s.a.bool,loadCustomRec:s.a.func.isRequired,loadVideoComponent:s.a.func.isRequired,loadArticleComponent:s.a.func.isRequired}),Fe(Xe,"defaultProps",{isAdLabelInsideRec:!0,widgetStyles:{classes:{}},isHidden:!1,ArticleHeaderLayout:void 0,recComposition:"normalPlate",vastCfgs:{},isFlyrolled:!1,recsSizes:{},previewCfg:{},onRecMount:()=>{},onRecLoad:()=>{},onRecInViewport:()=>{},onRecOutOfViewport:()=>{},onRecShow:()=>{},onRecUnmount:()=>{},onNewTabOpen:()=>{},onSameTabOpen:()=>{},onRecVideoTimePercentUpdate:()=>{},onRecArticleScrollPercentUpdate:()=>{},onRecArticleClick:()=>{},onRecError:()=>{},onRecComplete:()=>{},onRecClose:()=>{},onRecCustomEvent:()=>{},onSliderButtonContentSizeChange:()=>{}});const Ze=e=>{const{widgetRecs:t,slot:{recId:n,bgRecs:i=[]}}=e,o=e=>t.find((({id:t})=>t===e));return n?Object(Ce.a)([n,...i]).map(((t,n)=>r.a.createElement(Xe,Ye({key:t},e,{isHidden:0!==n,rec:o(t)})))):null};Ze.propTypes={slot:s.a.shape({recId:s.a.string,bgRecs:s.a.arrayOf(s.a.string)}).isRequired,widgetRecs:s.a.array},Ze.defaultProps={widgetRecs:[]};var et=Object(i.memo)(Ze),tt={logo:{"font-family":"Verdana, Arial, Helvetica, sans-serif","font-size":"13px",color:"#bfc4c8","&$logoWithLink:hover":{color:"#78d8de"}},logoWithLink:{},logoAligner:{display:"inline-flex","align-items":"center"},logoText:{position:"relative",top:"1px","margin-left":"0.35em"}},nt=n(1449),it=n.n(nt);function rt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ot={},st=new l.b;class at extends i.PureComponent{constructor(...e){super(...e),rt(this,"componentWillUnmount",(()=>{const{local:e}=this.context;Object(u.c)({widgetId:e.id,styleSheetsDict:ot,sheetsManager:st})})),rt(this,"renderLabelWithRelap",(()=>{const{label:e,labelPosition:t}=this.props;switch(t){case"right":return r.a.createElement("span",null,"Relap ",e);case"left":default:return r.a.createElement("span",null,e," Relap")}})),rt(this,"renderContent",(()=>{const{local:e}=this.context,{label:t,onlyLabel:n}=this.props,i=ot[e.id].sheet;return n?r.a.createElement("div",null,t):r.a.createElement("div",{className:i.classes.logoAligner},r.a.createElement(it.a,null),r.a.createElement("div",{className:i.classes.logoText},this.renderLabelWithRelap()))}))}componentWillMount(){const{local:e}=this.context;Object(u.b)({jss:e.jss,stylesSrc:tt,styleSheetsDict:ot,widgetId:e.id,sheetsManager:st})}render(){const{local:e}=this.context,{linkless:t,onlyLabel:n}=this.props,i=ot[e.id].sheet,o=v()(i.classes.logo,{[i.classes.logoWithLink]:!t&&!n});return t||n?r.a.createElement("div",{className:o},this.renderContent()):r.a.createElement("a",{href:"https://relap.io/?utm_source=publishers_ad&utm_medium=widget&utm_content=promo_ad_link&utm_campaign=From%20widget",className:o,target:"_blank",rel:"noopener noreferrer"},this.renderContent())}}function ct(){return(ct=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function lt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}rt(at,"propTypes",{linkless:s.a.bool,label:s.a.string,labelPosition:s.a.oneOf(["left","right"]),onlyLabel:s.a.bool}),rt(at,"contextTypes",{local:s.a.object.isRequired}),rt(at,"defaultProps",{linkless:!1,label:null,labelPosition:"left",onlyLabel:!1});const dt=({float:e})=>e,ut=({grid:e})=>e;class ht extends i.PureComponent{constructor(e){super(e),lt(this,"componentWillUnmount",(()=>{const{global:e}=this.context;e.removeEventListener("resize",this.handleWindowResize),this.handleWindowResize.cancel(),this._intersectionObserver&&this._intersectionObserver.disconnect()})),lt(this,"assignRecReadyPromises",(e=>{const t=this._recReadyPromises||{};return e.reduce(((e,n)=>{if(t[n.id])return e[n.id]=t[n.id],e;let i,r;const o=new Promise(((e,t)=>{i=e,r=t}));return e[n.id]={id:n.id,resolve:i,reject:r,promise:o},e}),{})})),lt(this,"handleWidgetVisibility",(({id:e,ready:t,cfg:{positioning:{windowMinWidth:n,windowMaxWidth:i}},onWidgetShouldBeVisible:r,onWidgetShouldBeHidden:o})=>{const{global:s,isPreview:a}=this.context;if(a||!t)return;const c=s.innerWidth;Object(p.a)(i)&&c>i||Object(p.a)(n)&&c<n?o(e):r(e)})),lt(this,"handleWindowResize",(()=>{this.handleWidgetVisibility(this.props)})),lt(this,"checkReadyToW8ForRecsLoad",(()=>{const{cfg:{recsLackBehaviour:{destroyOnLack:e=!1}={}},slots:t}=this.props;if(!e)return!0;const n=Object(h.m)(t);return n.length&&n.every((({recId:e})=>e))})),lt(this,"handleReadyPromises",(()=>{const{initialized:e}=this.state;if(!this.checkReadyToW8ForRecsLoad())return;const t=Object.values(this._recReadyPromises).map((e=>e.promise));t.length&&(t.push(this._externalFontsPromise),Promise.all(t).then((()=>{e||this.setState({initialized:!0})})).catch((e=>{console.error("_recReadyPromises reject: ",e)})))})),lt(this,"handleWidgetReady",(()=>{const{id:e,cfgId:t,onWidgetReady:n}=this.props,{local:{el:i}}=this.context;n({el:i,instanceId:e,cfgId:t})})),lt(this,"handleNoRecsLeft",(()=>{const{id:e,cfgId:t,onNoRecsLeft:n}=this.props,{local:{el:i}}=this.context;n({el:i,instanceId:e,cfgId:t})})),lt(this,"handleWidgetCloseByUser",(()=>{const{id:e,cfgId:t,onWidgetCloseByUser:n}=this.props,{local:{el:i}}=this.context;n({el:i,instanceId:e,cfgId:t})})),lt(this,"handleRemoval",(()=>{const{initialFetchStatus:e,recs:t,cfg:{recsLackBehaviour:{destroyOnLack:n=!1}={}},slots:i,lastSlotRemovedBy:r}=this.props;if("complete"!==e)return;const o=()=>{switch(r){case"user":this.handleWidgetCloseByUser();break;case"widget":default:this.handleNoRecsLeft()}},s=Object(h.t)(i,t);n&&(()=>{const e=Object(h.m)(i);return!e.length||e.some((({recId:e})=>!e))})()?o():s.length||o()})),lt(this,"handleInit",(()=>{const{initialized:e}=this.state;e&&this.handleWidgetReady()})),lt(this,"handleWidgetInViewport",(()=>{const{id:e,cfgId:t,onWidgetShow:n}=this.props,{local:{el:i}}=this.context;n({el:i,instanceId:e,cfgId:t})})),lt(this,"handleRecLoad",(({id:e})=>{const{id:t,cfgId:n,onRecLoad:i}=this.props,r=this._recReadyPromises;r[e]?(r[e].resolve(),r[e].promise.then((()=>{i({instanceId:t,cfgId:n,recId:e})})).catch((e=>{console.error("_recReadyPromises rejected",e)}))):i({instanceId:t,cfgId:n,recId:e})})),lt(this,"handleFormLoad",(({recId:e,sequenceId:t,formId:n})=>{const{onFormLoad:i}=this.props,r=this._recReadyPromises;r[e]&&(r[e].resolve(),r[e].promise.then((()=>{i({formId:n,recId:e,sequenceId:t})})).catch((e=>{console.error("_recReadyPromises rejected",e)})))})),lt(this,"handleRecShow",(e=>{const{cfgId:t,onRecShow:n}=this.props;n({cfgId:t,recId:e}),this.handleWidgetInViewport()})),lt(this,"handleFormShow",(({formId:e,sequenceId:t,recId:n})=>{const{onFormShow:i}=this.props;i({formId:e,sequenceId:t,recId:n})})),lt(this,"handleFormAnswer",(e=>{const{onFormAnswer:t}=this.props;t({...e})})),lt(this,"handleFormComplete",(({formId:e,sequenceId:t,recId:n})=>{const{onFormComplete:i}=this.props;i({formId:e,sequenceId:t,recId:n})})),lt(this,"handleFormSessionActive",(({sequenceId:e,sessionTickInterval:t,formId:n})=>{const{onFormSessionActive:i}=this.props;i({formId:n,sequenceId:e,sessionTickInterval:t})})),lt(this,"handleFormSessionInactive",(({formId:e,sequenceId:t})=>{const{onFormSessionInactive:n}=this.props;n({formId:e,sequenceId:t})})),lt(this,"handleRecUnmout",(e=>{var t;const{onRecUnmount:n}=this.props;null===(t=this._recReadyPromises[e])||void 0===t||t.reject(),n(e)})),lt(this,"handleNewTabOpen",(({id:e,type:t,manually:n,clickOrigin:i})=>{const{id:r,cfgId:o,onNewTabOpen:s}=this.props,{local:{el:a}}=this.context;s({instanceId:r,el:a,cfgId:o,recId:e,recType:t,manually:n,clickOrigin:i})})),lt(this,"handleSameTabOpen",(({id:e,recPromise:t})=>{const{id:n,cfgId:i,onSameTabOpen:r}=this.props,{local:{el:o}}=this.context;r({instanceId:n,el:o,cfgId:i,recId:e,recPromise:t})})),lt(this,"handleVideoTimePercentUpdate",(({id:e,vastDomain:t,percent:n})=>{const{cfgId:i,onRecVideoTimePercentUpdate:r}=this.props;r({recId:e,cfgId:i,vastDomain:t,percent:n})})),lt(this,"handleArticleScrollPercentUpdate",(({id:e,percent:t})=>{const{cfgId:n,onRecArticleScrollPercentUpdate:i}=this.props;i({recId:e,cfgId:n,percent:t})})),lt(this,"handleArticleClick",(({id:e})=>{const{cfgId:t,onRecArticleClick:n}=this.props;n({recId:e,cfgId:t})})),lt(this,"handleRecError",(({id:e,errorType:t,errorGroup:n,errorText:i,errorCode:r,errorStage:o,errorDescription:s})=>{const{id:a,cfgId:c,onRecError:l}=this.props;l({recId:e,instanceId:a,cfgId:c,errorType:t,errorGroup:n,errorText:i,errorCode:r,errorStage:o,errorDescription:s})})),lt(this,"handleRecComplete",(({id:e})=>{const{id:t,cfgId:n,onRecComplete:i}=this.props;i({recId:e,instanceId:t,cfgId:n})})),lt(this,"handleRecClose",(({id:e})=>{const{id:t,onRecClose:n}=this.props;n({instanceId:t,recId:e})})),lt(this,"handleRecSize",(e=>{this.setState({recsSizes:e})})),lt(this,"handleCustomRecEvent",(({id:e,project:t,category:n,action:i,userInput:r,tags:o})=>{const{cfgId:s,onRecCustomEvent:a}=this.props;a({cfgId:s,recId:e,project:t,category:n,action:i,userInput:r,tags:o})})),lt(this,"handleLoadMoreButtonClick",(()=>{const{id:e,cfgId:t,onLoadMoreButtonClick:n}=this.props;n({instanceId:e,cfgId:t})})),lt(this,"handleMoreRecsLoad",(({slotId:e}={})=>{const{id:t,cfgId:n,onInfiniteScrollIntersect:i}=this.props;i({instanceId:t,cfgId:n,slotId:e})})),lt(this,"observeIntersection",(()=>{var e;const{local:{el:t}}=this.context;this._bottomEl||(this._bottomEl=document.createElement("div"),t.appendChild(this._bottomEl)),null===(e=this._intersectionObserver)||void 0===e||e.observe(this._bottomEl)})),lt(this,"handleInfiniteScrollIntersect",(([{isIntersecting:e}])=>{const{id:t,cfgId:n,onInfiniteScrollIntersect:i}=this.props;e&&i({instanceId:t,cfgId:n})})),lt(this,"createIntersectionObserver",(()=>{if(this._intersectionObserver)return;const{cfg:{infiniteRecs:{scroll:{marginBottom:e=0}}},slots:t,recs:n}=this.props;this._intersectionObserver=new IntersectionObserver(this.handleInfiniteScrollIntersect,{root:null,rootMargin:`0px 0px ${e}px 0px`,threshold:1});Object(h.t)(t,n).length&&this.observeIntersection()})),lt(this,"handleGridVisibleItemsChange",(e=>{this.setState({gridVisibleItems:e})})),lt(this,"checkAdLabelInsideRec",(()=>{var e;const{slots:t,recs:n,cfg:{infiniteRecs:i,logo:r={},grid:o}}=this.props,{gridVisibleItems:s}=this.state;if("carousel"===(null===(e=o.simple)||void 0===e?void 0:e.subtype)||"scroll"===(null==i?void 0:i.type)||"composite"===o.type)return!0;const a=Object(h.t)(t,n);return a.filter(((e,t)=>s.includes(t))).some((e=>"ad"!==e.type))||1===a.length&&!1===r.visible})),lt(this,"renderWidgetLogo",(({isAdLabelInsideRec:e})=>{const{cfg:{recAd:t,logo:n={}},widgetStyles:i}=this.props;if(!n.visible&&e)return null;const o=e?null:t.label;return r.a.createElement("div",{className:i.classes.logo},r.a.createElement(at,{linkless:n.linkless,label:o,onlyLabel:!n.visible}))})),lt(this,"handleFormComponent",(({form:e})=>{const{loadFormComponent:t}=this.context;e&&(Object(d.c)({id:"load form chunk",groupId:"init"}),t().then((e=>{const t=e.default;Object(d.b)({id:"load form chunk",groupId:"init"}),this.setState({FormComponent:t})})))})),this.state={initialized:!1,gridVisibleItems:[],recsSizes:{},FormComponent:null},this.handleWidgetReady=Object(c.a)(this.handleWidgetReady),this.handleNoRecsLeft=Object(c.a)(this.handleNoRecsLeft),this.handleWidgetCloseByUser=Object(c.a)(this.handleWidgetCloseByUser),this.handleWidgetInViewport=Object(c.a)(this.handleWidgetInViewport),this.handleWindowResize=Object(f.a)(this.handleWindowResize,300),this.getGridCfg=Object(g.a)([dt,ut],((e,t)=>({...t,float:e})))}componentWillMount(){const{local:e}=this.context,{id:t,cfgId:n,cfg:{externalFonts:i},slots:r,recs:o}=this.props,s=Object(h.t)(r,o);this._recReadyPromises=this.assignRecReadyPromises(s),this._externalFontsPromise=Object(m.a)({externalFonts:i,local:e}),Object(d.e)({id:"load fonts",instanceId:t,cfgId:n}),this._externalFontsPromise.then((()=>{Object(d.d)({id:"load fonts",instanceId:t,cfgId:n})})),this.handleReadyPromises(),s.length&&"form"===s[0].type&&this.handleFormComponent(s[0])}componentDidMount(){var e,t;const{global:n,local:{el:i},isPreview:r}=this.context,{onWidgetLoad:o,cfgId:s,id:a,ready:c,cfg:l,onWidgetShouldBeVisible:u,onWidgetShouldBeHidden:h}=this.props;r||(Object(d.d)({id:"mount",instanceId:a,cfgId:s}),Object(d.e)({id:"ready",instanceId:a,cfgId:s})),"scroll"===(null===(e=l.infiniteRecs)||void 0===e?void 0:e.type)&&this.createIntersectionObserver(),"scroll"!==(null===(t=l.infiniteRecs)||void 0===t?void 0:t.type)&&this._intersectionObserver&&(this._intersectionObserver.disconnect(),this._intersectionObserver=null),o({instanceId:a,cfgId:s,el:i}),this.handleWidgetVisibility({id:a,ready:c,cfg:l,onWidgetShouldBeVisible:u,onWidgetShouldBeHidden:h}),this.handleRemoval(),this.handleInit(),n.addEventListener("resize",this.handleWindowResize)}componentWillReceiveProps(e){const{local:t}=this.context,{cfg:{externalFonts:n},slots:i}=this.props,r=Object(h.t)(e.slots,e.recs);var o,s;n===e.cfg.externalFonts&&i===e.slots||(n!==e.cfg.externalFonts&&(this._externalFontsPromise=Object(m.a)({externalFonts:e.cfg.externalFonts,local:t})),i!==e.slots&&(this._recReadyPromises=this.assignRecReadyPromises(r)),"scroll"===(null===(o=e.cfg.infiniteRecs)||void 0===o?void 0:o.type)&&this.createIntersectionObserver(),"scroll"!==(null===(s=e.cfg.infiniteRecs)||void 0===s?void 0:s.type)&&this._intersectionObserver&&(this._intersectionObserver.disconnect(),this._intersectionObserver=null),this.handleReadyPromises());this.handleWidgetVisibility(e),r.length&&"form"===r[0].type&&this.handleFormComponent(r[0])}componentDidUpdate(){var e,t;const{slots:n,recs:i,cfg:r}=this.props;this.handleRemoval(),this.handleInit();const o=Object(h.t)(n,i);"scroll"===(null===(e=r.infiniteRecs)||void 0===e?void 0:e.type)&&o.length&&(this._intersectionObserver?this.observeIntersection():this.createIntersectionObserver()),"scroll"!==(null===(t=r.infiniteRecs)||void 0===t?void 0:t.type)&&this._intersectionObserver&&(this._intersectionObserver.disconnect(),this._intersectionObserver=null)}render(){var e,t;const{id:n,cfgId:i,recs:o,previewCfg:s,cfg:a,loadMoreInProgress:c,vastCfgs:l,isFlyrolled:d,overlayImgSize:u,widgetStyles:p,widgetStylesSrc:f,slots:g,WidgetBaseLayout:m,GridLayout:b,RecPreLayout:y,RecLayout:v,TitleLayout:w,DescriptionLayout:I,DisclaimerLayout:C,ArticleHeaderLayout:O,MainTitleLayout:S,ThumbnailLayout:R,onSliderButtonContentSizeChange:j,onRecMount:x,onGridOverflow:E}=this.props,{positioning:{float:k,align:T},mainTitle:P={},recComposition:W,grid:_,infiniteRecs:L}=a,{recsSizes:A,FormComponent:M}=this.state,D=Object(h.n)(g,o),z=Object(h.t)(g,o);if(!D.length)return null;if("form"===(null===(e=z[0])||void 0===e?void 0:e.type))return M?r.a.createElement(M,ct({},this.props,{formData:z[0],onRecMount:x,onFormLoad:this.handleFormLoad,onFormShow:this.handleFormShow,onFormAnswer:this.handleFormAnswer,onFormComplete:this.handleFormComplete,onFormSessionActive:this.handleFormSessionActive,onFormSessionInactive:this.handleFormSessionInactive})):null;const $=r.a.createElement(S,{styles:p,mainTitle:P}),N=this.checkAdLabelInsideRec(),B=g.map(((e,t)=>({id:e.slotId,recId:e.recId,item:r.a.createElement(et,{key:e.slotId,instanceId:n,cfgId:i,cfg:a,previewCfg:s,isAdLabelInsideRec:N,recComposition:W,widgetStyles:p,widgetStylesSrc:f,slot:e,widgetRecs:D,recIndex:t,recsSizes:A,recsLength:g.length,RecPreLayout:y,RecLayout:v,TitleLayout:w,DescriptionLayout:I,DisclaimerLayout:C,ArticleHeaderLayout:O,ThumbnailLayout:R,vastCfgs:l,isFlyrolled:d,overlayImgSize:u,onSliderButtonContentSizeChange:j,onRecMount:x,onRecLoad:this.handleRecLoad,onRecShow:this.handleRecShow,onRecUnmount:this.handleRecUnmout,onNewTabOpen:this.handleNewTabOpen,onSameTabOpen:this.handleSameTabOpen,onRecVideoTimePercentUpdate:this.handleVideoTimePercentUpdate,onRecArticleScrollPercentUpdate:this.handleArticleScrollPercentUpdate,onRecArticleClick:this.handleArticleClick,onRecError:this.handleRecError,onRecComplete:this.handleRecComplete,onRecClose:this.handleRecClose,onRecCustomEvent:this.handleCustomRecEvent})}))),V=(null==L?void 0:L.type)||"none",q=(null==L||null===(t=L.button)||void 0===t?void 0:t.label)||"",F="button"===V?r.a.createElement(Ie.a,{className:p.classes.loadMoreButtonOverlay,zIndex:1e5,onClick:this.handleLoadMoreButtonClick}):null;return r.a.createElement(m,{GridLayout:b,widgetStyles:p,mainTitle:$,gridItems:B,grid:this.getGridCfg({grid:_,float:k}),slots:g,loadMoreButtonOverlay:F,loadMoreButtonLabel:q,loadMoreInProgress:c,logo:this.renderWidgetLogo({isAdLabelInsideRec:N}),isFlyrolled:d,positioningAlign:T,onGridOverflow:E,onRecsSizeChange:this.handleRecSize,onGridVisibleItemsChange:this.handleGridVisibleItemsChange,onMoreRecsLoad:this.handleMoreRecsLoad})}}lt(ht,"propTypes",{id:s.a.string.isRequired,cfgId:s.a.string.isRequired,previewCfg:s.a.object,cfg:s.a.shape({type:s.a.oneOf(["standard","article","slider","overlay"]).isRequired,positioning:s.a.shape({float:s.a.oneOf(["left","right","none"]),windowMinWidth:s.a.number,windowMaxWidth:s.a.number,align:s.a.string}).isRequired,recsLackBehaviour:s.a.shape({destroyOnLack:s.a.bool}),externalFonts:s.a.object,recComposition:s.a.string,mainTitle:s.a.shape({label:s.a.string}),recClose:s.a.object,recThumbnail:s.a.object,recVideo:s.a.object,recTitle:s.a.object,recDescription:s.a.object,recAd:s.a.object,recPromo:s.a.object,recOpenInNewTab:s.a.bool,infiniteRecs:s.a.shape({type:s.a.oneOf(["none","button","scroll"]),button:s.a.shape({label:s.a.string}),scroll:s.a.shape({marginBottom:s.a.number})}),grid:s.a.shape({type:s.a.oneOf(["simple","composite"]).isRequired,simple:s.a.object}).isRequired,logo:s.a.shape({visible:s.a.bool,linkless:s.a.bool})}).isRequired,widgetStylesSrc:s.a.object.isRequired,recs:s.a.object,initialFetchStatus:s.a.oneOf(["pending","complete"]),widgetStyles:s.a.object.isRequired,WidgetBaseLayout:s.a.func,GridLayout:s.a.func,RecPreLayout:s.a.func,RecLayout:s.a.func,TitleLayout:s.a.func,DescriptionLayout:s.a.func,DisclaimerLayout:s.a.func,ArticleHeaderLayout:s.a.func,MainTitleLayout:s.a.func,ThumbnailLayout:s.a.func,ready:s.a.bool,loadMoreInProgress:s.a.bool,vastCfgs:s.a.object,overlayImgSize:s.a.object,isFlyrolled:s.a.bool,slots:s.a.array,lastSlotRemovedBy:s.a.oneOf(["widget","user"]),onSliderButtonContentSizeChange:s.a.func,onRecMount:s.a.func,onRecLoad:s.a.func,onFormLoad:s.a.func,onRecShow:s.a.func,onFormShow:s.a.func,onFormAnswer:s.a.func,onFormComplete:s.a.func,onFormSessionActive:s.a.func,onFormSessionInactive:s.a.func,onRecUnmount:s.a.func,onNewTabOpen:s.a.func,onSameTabOpen:s.a.func,onRecVideoTimePercentUpdate:s.a.func,onRecArticleScrollPercentUpdate:s.a.func,onRecArticleClick:s.a.func,onRecError:s.a.func,onRecComplete:s.a.func,onRecClose:s.a.func,onRecCustomEvent:s.a.func,onNoRecsLeft:s.a.func,onLoadMoreButtonClick:s.a.func,onInfiniteScrollIntersect:s.a.func,onWidgetCloseByUser:s.a.func,onWidgetLoad:s.a.func,onWidgetReady:s.a.func,onWidgetShow:s.a.func,onWidgetShouldBeVisible:s.a.func,onWidgetShouldBeHidden:s.a.func,onGridOverflow:s.a.func}),lt(ht,"contextTypes",{global:s.a.object.isRequired,local:s.a.object.isRequired,isPreview:s.a.bool,loadFormComponent:s.a.func.isRequired}),lt(ht,"defaultProps",{recs:{},initialFetchStatus:"pending",WidgetBaseLayout:b.a,GridLayout:X,RecPreLayout:re,RecLayout:oe.a,TitleLayout:ce,DescriptionLayout:de,DisclaimerLayout:ge,ArticleHeaderLayout:void 0,MainTitleLayout:be,ThumbnailLayout:we,ready:!1,loadMoreInProgress:!1,vastCfgs:{},isFlyrolled:!1,slots:[],lastSlotRemovedBy:null,overlayImgSize:{},previewCfg:{},onSliderButtonContentSizeChange:()=>{},onRecMount:()=>{},onRecLoad:()=>{},onFormLoad:()=>{},onRecShow:()=>{},onFormShow:()=>{},onFormAnswer:()=>{},onFormComplete:()=>{},onFormSessionActive:()=>{},onFormSessionInactive:()=>{},onRecUnmount:()=>{},onNewTabOpen:()=>{},onSameTabOpen:()=>{},onRecVideoTimePercentUpdate:()=>{},onRecArticleScrollPercentUpdate:()=>{},onRecArticleClick:()=>{},onRecError:()=>{},onRecComplete:()=>{},onRecClose:()=>{},onRecCustomEvent:()=>{},onLoadMoreButtonClick:()=>{},onInfiniteScrollIntersect:()=>{},onNoRecsLeft:()=>{},onWidgetCloseByUser:()=>{},onWidgetLoad:()=>{},onWidgetReady:()=>{},onWidgetShow:()=>{},onWidgetShouldBeVisible:()=>{},onWidgetShouldBeHidden:()=>{},onGridOverflow:()=>{}});var pt=n(1435),ft=n(1414);function gt(){return(gt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}const mt={},bt=new l.b,yt=(e,t)=>{const{global:n,local:o}=t,{exposedFlyRollStyleSrc:s,cfg:c,customData:l,id:d,recs:p,slots:f,isFlyrolled:g,onFlyrollChange:m}=e,[b,y]=Object(i.useState)(!1),[w,I]=Object(i.useState)(9999),[C,O]=Object(i.useState)(9999),[S,R]=Object(i.useState)(100),j=Object(i.useRef)(null),x=Object(i.useRef)(null),E=Object(i.useRef)(null),k=Object(i.useRef)(null),T=({cfg:e,customData:t})=>{var i,r;if(!n||!o)return;const s={width:n.innerWidth,height:n.innerHeight},a={width:(null===(i=k.current)||void 0===i?void 0:i.clientWidth)||0,height:(null===(r=k.current)||void 0===r?void 0:r.clientHeight)||0};mt[o.id].sheet.update({globalWindow:s,widget:a,cfg:e,customData:t})},P=()=>{if(!n)return!1;const{innerWidth:e,innerHeight:t}=n;return e<t},W=()=>{if(!n)return 0;const{flyRoll:{width:e}}=c,t=n.document.documentElement.clientWidth,i=P()?t:t*h.a/100;return Math.min(i,e)},_=()=>{T({cfg:c,customData:l}),I(W()),O(W()),R(100)},L=()=>{_()};let A=()=>{!g&&x.current&&(x.current.style.height="")};A=Object(i.useCallback)(Object(a.a)(A,300),[]);const M=({contentWidth:e,contentHeight:t})=>{let i=e,r=t;const o=(()=>{if(!n)return 0;const e=n.document.documentElement.clientHeight;return P()?e*h.a/100:e})();r>o&&(i=e*o/t,r=o);const s=W();return i>s&&(r=t*s/e,i=s),i/e*100},D=()=>{Object(u.c)({widgetId:o.id,styleSheetsDict:mt,sheetsManager:bt}),A.cancel(),j.current&&(j.current.style.width=""),x.current&&(x.current.style.height=""),n.removeEventListener("resize",L),E.current&&E.current.disconnect()};return Object(ft.a)((()=>(Object(u.b)({jss:o.exposedJss,stylesSrc:s,styleSheetsDict:mt,widgetId:o.id,sheetsManager:bt,createStyleSheetOptions:{link:!0}}),T({cfg:c,customData:l}),D))),Object(i.useEffect)((()=>{const{el:e}=o,[t]=e.getElementsByClassName("js-relap-widget-inner"),[i]=e.getElementsByClassName("js-relap-widget-placeholder");n.addEventListener("resize",L),t&&i&&(j.current=t,x.current=i,I(W()),O(W()))}),[]),Object(i.useEffect)(L,[w,C]),Object(i.useEffect)((()=>{const e=x.current,t=j.current;if(!e||!t)return;const n=e.clientHeight;e.style.height=`${Math.max(n,k.current.clientHeight)}px`,t.className=v()({[mt[o.id].sheet.classes.fly]:g}),t.style.width=g?`${w}px`:"",g||A(),T({cfg:c,customData:l})}),[g]),Object(i.useEffect)((()=>{T({cfg:c,customData:l})}),[c,l]),Object(i.useEffect)((()=>{var e;f.length&&p[null===(e=f[0])||void 0===e?void 0:e.recId]&&x.current&&(E.current&&(E.current.disconnect(),E.current=null),E.current=new IntersectionObserver((e=>{!0===e[0].isIntersecting&&(_(),y(!0),m({instanceId:d,isFlyrolled:!1})),!1===e[0].isIntersecting&&(()=>{var e;const{video:t,customRec:n}=p[null===(e=f[0])||void 0===e?void 0:e.recId]||{},i=!!t||"videocap"===(null==n?void 0:n.name);b&&i?m({instanceId:d,isFlyrolled:!0}):g&&m({instanceId:d,isFlyrolled:!1})})()})),E.current.observe(x.current))}),[f,p,x,E,b]),r.a.createElement("div",{ref:k},r.a.createElement(pt.a,{percent:S,display:g?"inline":"block",updateOnContentResize:!0,onScale:({scaledWidth:e,contentWidth:t,contentHeight:n})=>{if(!g)return;const i=M({contentWidth:t,contentHeight:n});R(i),I(e)}},r.a.createElement("div",{style:{width:g?`${C}px`:""}},r.a.createElement(ht,gt({},e,{isFlyrolled:g,onGridOverflow:e=>{g&&O(C+e)}})))))};yt.propTypes={id:s.a.string.isRequired,cfg:s.a.object.isRequired,customData:s.a.object,recs:s.a.object.isRequired,slots:s.a.array,exposedFlyRollStyleSrc:s.a.object,isFlyrolled:s.a.bool,onFlyrollChange:s.a.func},yt.defaultProps={customData:{},slots:[],exposedFlyRollStyleSrc:{},isFlyrolled:!1,onFlyrollChange:()=>{}},yt.contextTypes={local:s.a.object.isRequired,global:s.a.object.isRequired};var vt=Object(i.memo)(yt);function wt(){return(wt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function It(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ct={},Ot=new l.b;class St extends i.PureComponent{constructor(e){super(e),It(this,"componentDidMount",(()=>{const{global:e}=this.context;this.handleWidgetVisibility(this.props),e.addEventListener("resize",this.handleWindowResize)})),It(this,"componentWillUnmount",(()=>{const{local:e,global:t}=this.context;Object(u.c)({widgetId:e.id,styleSheetsDict:Ct,sheetsManager:Ot}),t.removeEventListener("resize",this.handleWindowResize),this.handleWindowResize.cancel()})),It(this,"updateStyles",(({cfg:e,customData:t})=>{const{local:n,global:i}=this.context,r={width:i.innerWidth,height:i.innerHeight},o=Object(h.u)(e,i),s=this.calcMediaCfg(...o);this.setState({mediaCfg:s},(()=>{Ct[n.id].sheet.update({globalWindow:r,cfg:s,customData:t})}))})),It(this,"handleWindowResize",(()=>{const{cfg:e,customData:t}=this.props;this.updateStyles({cfg:e,customData:t})})),It(this,"handleFloat",(({positioning:{float:e}})=>{const{local:{el:t}}=this.context;t&&(t.style.float="left"===e||"right"===e?e:"")})),It(this,"handleWidgetVisibility",(({visible:e})=>{e?this.showWidget():this.hideWidget()})),It(this,"hideWidget",(()=>{const{local:{el:e}}=this.context;if(!e)return;e.style.height="1px";const t=e.offsetWidth;e.style.position="absolute",e.style.left="-9999px",e.style.width=`${t}px`,e.style.visibility="hidden"})),It(this,"markWidgetShownTimeEvent",(()=>{const{isPreview:e}=this.context,{id:t,cfgId:n}=this.props;e||Object(d.d)({id:"ready",instanceId:t,cfgId:n})})),It(this,"showWidget",(()=>{const{local:{el:e}}=this.context;e&&(this.markWidgetShownTimeEvent(),e.style.left="",e.style.width="",e.style.height="",e.style.position="",e.style.visibility="")})),this.state={mediaCfg:e.cfg},this.markWidgetShownTimeEvent=Object(c.a)(this.markWidgetShownTimeEvent),this.handleWindowResize=Object(a.a)(this.handleWindowResize,300),this.calcMediaCfg=Object(h.y)()}componentWillMount(){const{local:e}=this.context,{widgetStylesSrc:t,cfg:n,customData:i}=this.props;this.handleFloat(n),this.hideWidget(),Object(u.b)({jss:e.jss,stylesSrc:t,styleSheetsDict:Ct,widgetId:e.id,sheetsManager:Ot,createStyleSheetOptions:{link:!0}}),this.updateStyles({cfg:n,customData:i})}componentWillReceiveProps(e){const{cfg:t,customData:n}=e;this.handleFloat(t),this.handleWidgetVisibility(e),this.updateStyles({cfg:t,customData:n})}render(){const{local:e}=this.context,{exposedFlyRollStyleSrc:t}=this.props,{mediaCfg:n}=this.state,i=Ct[e.id].sheet;return Object(h.g)(n)?r.a.createElement(vt,wt({},this.props,{cfg:n,exposedFlyRollStyleSrc:t,widgetStyles:i})):r.a.createElement(ht,wt({},this.props,{cfg:n,widgetStyles:i}))}}It(St,"propTypes",{id:s.a.string.isRequired,cfgId:s.a.string.isRequired,cfg:s.a.object.isRequired,customData:s.a.object,widgetStylesSrc:s.a.object.isRequired,exposedFlyRollStyleSrc:s.a.object,visible:s.a.bool}),It(St,"contextTypes",{local:s.a.object.isRequired,global:s.a.object.isRequired,isPreview:s.a.bool}),It(St,"defaultProps",{customData:{},visible:!1,exposedFlyRollStyleSrc:{}});var Rt=n(1530);function jt(){return(jt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function xt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Et={},kt=new l.b,Tt={},Pt=new l.b;class Wt extends i.PureComponent{constructor(e){super(e),xt(this,"checkIsSpecialSlider",(()=>{const{cfg:{preset:e}}=this.props;return"sliderButtonWidePlates"===e||"sliderMobileFullscreenWidePlates"===e})),xt(this,"updateStyles",(({cfg:e,customData:t})=>{const{local:n,global:i}=this.context,r={width:i.innerWidth,height:i.innerHeight},o=Object(h.u)(e,i),s=this.calcMediaCfg(...o);this.setState({mediaCfg:s},(()=>{Tt[n.id].sheet.update({globalWindow:r,cfg:s,customData:t}),Et[n.id].sheet.update({globalWindow:r,cfg:s,customData:t})}))})),xt(this,"getSliderDimensions",(({contentWidth:e,contentHeight:t})=>{var n;const i=this._contentEl.getBoundingClientRect(),r=(null===(n=this._actionButtonEl)||void 0===n?void 0:n.getBoundingClientRect())||0,o=r?i.top-r.top:0;return{fullWidth:e,fullHeight:o>0?t+o:t}})),xt(this,"getDocScrollHeight",(()=>{const{global:e}=this.context,{documentElement:t,body:n}=e.document;return Math.max(n.scrollHeight,t.scrollHeight,n.offsetHeight,t.offsetHeight,n.clientHeight,t.clientHeight)})),xt(this,"getMaxHeight",(()=>{const{global:e}=this.context,t=e.document.documentElement.clientHeight,n=e.document.documentElement.clientWidth,i=this.getMaxWidth(),r=t*n*h.a/100;return Math.min(r/i,t)})),xt(this,"getMaxWidth",(()=>{const{global:e}=this.context,{cfg:{slider:{width:t,widthUnit:n="px"}}}=this.props,{changedContentWidth:i}=this.state;if(i)return i;const r=e.document.documentElement.clientWidth,o=this.checkIsPortraitMode()?r:r*h.a/100;return"px"===n?Math.min(o,t):r*t/100})),xt(this,"checkIsPortraitMode",(()=>{const{global:e}=this.context;return e.innerWidth<e.innerHeight})),xt(this,"handleWidgetReady",(e=>{const{onWidgetReady:t}=this.props;this.prepareWidgetForBaseReady(),this.setState({isReady:!0},(()=>{this.handleScroll(),t(e)}))})),xt(this,"prepareWidgetForLoad",(()=>{const{local:{el:e}}=this.context,{cfg:{slider:{width:t,widthUnit:n="px"}}}=this.props,{changedContentWidth:i}=this.state,r=i||t,o=this.checkIsSpecialSlider();e.style.position="absolute",e.style.left="-9999px",e.style.bottom=0,e.style.zIndex=o?1e6:9e5,e.style.height="1px",e.style.width=`${r}${n}`,e.style.fontSize=0})),xt(this,"prepareWidgetForBaseReady",(()=>{const{local:{el:e},isPreview:t}=this.context;e.style.position=t?"absolute":"fixed",e.style.height=""})),xt(this,"handleWidgetVisibility",(({visible:e})=>{e?this.showWidget():this.hideWidget()})),xt(this,"hideWidget",(()=>{const{local:e}=this.context,{el:t}=e;t.style.visibility="hidden",t.style.left="-9999px",t.style.right="",t.classList.remove(Et[e.id].sheet.classes.sliderTopElVisible)})),xt(this,"markWidgetShownTimeEvent",(()=>{const{isPreview:e}=this.context,{id:t,cfgId:n}=this.props;e||Object(d.d)({id:"ready",instanceId:t,cfgId:n})})),xt(this,"updateSliderButtonStyles",(()=>{const{local:{el:e}}=this.context,{changedContentWidth:t,changedContentHeight:n,buttonTopCornerOffset:i,buttonLeftCornerOffset:r}=this.state;e.style.right=r?r-t+"px":0,e.style.bottom=i?i-n+"px":0,e.style.left=""})),xt(this,"showWidget",(()=>{const{local:{el:e,id:t}}=this.context,{cfg:{grid:{elWidthExceeding:n},slider:{horizontalPosition:i}}}=this.props,{changedContentWidth:r,changedContentHeight:o}=this.state;if(!e)return;this.checkIsSpecialSlider()&&r&&o?this.updateSliderButtonStyles():(e.style.right="right"===i?n/2||0:"",e.style.left="left"===i?n/2||0:""),e.style.visibility="",e.classList.add(Et[t].sheet.classes.sliderTopElVisible),this.markWidgetShownTimeEvent()})),xt(this,"handleSliderButtonPosition",(()=>{const{visible:e}=this.props;this.checkIsSpecialSlider()&&e&&this.updateSliderButtonStyles()})),xt(this,"handleScroll",(()=>{const{global:e}=this.context,{cfg:{slider:{showAtDocPercent:t}}}=this.props,{isReady:n,isScrolledTo:i}=this.state;if(!n||i)return;e.pageYOffset>=(this.getDocScrollHeight()-e.document.documentElement.clientHeight)*t/100&&(e.removeEventListener("resize",this.handleScroll,!1),this.setState({isScrolledTo:!0}))})),xt(this,"handleActionButtonClick",(()=>{const{isCollapsed:e}=this.state;this.setState({isCollapsed:!e})})),xt(this,"dropState",(()=>{const{cfg:e,customData:t}=this.props;this.updateStyles({cfg:e,customData:t}),this.setState({iframeWidth:this.getMaxWidth(),unscaledContentWidth:this.getMaxWidth(),scalingPercent:100})})),xt(this,"handleWindowResize",(()=>{this.dropState()})),xt(this,"calcSliderScale",(({contentWidth:e,contentHeight:t})=>{const{fullWidth:n,fullHeight:i}=this.getSliderDimensions({contentWidth:e,contentHeight:t}),r=n-e,o=i-t;let s=e,a=t;const c=this.getMaxHeight()-o;a>c&&(s=e*c/t,a=c);const l=this.getMaxWidth()-r;return s>l&&(a=t*l/e,s=l),s/e*100})),xt(this,"setIframeWidth",(()=>{const{local:{el:e}}=this.context,{iframeWidth:t}=this.state;e.style.width=`${t}px`})),xt(this,"setIsCollapsedStyles",(()=>{const{local:{el:e}}=this.context,{isCollapsed:t}=this.state;e.style.transform=t?`translate(0, ${this._contentEl.offsetHeight}px)`:""})),xt(this,"handleGridOverflow",(e=>{const{unscaledContentWidth:t}=this.state;this.setState({unscaledContentWidth:t+e})})),xt(this,"handleScale",(({scaledWidth:e,contentWidth:t,contentHeight:n})=>{const i=this.calcSliderScale({contentWidth:t,contentHeight:n});this.setState({scalingPercent:i,iframeWidth:e})})),xt(this,"handleWidgetBaseVisible",(()=>{const{isBaseVisible:e}=this.state;e||this.setState({isBaseVisible:!0})})),xt(this,"handleWidgetBaseHidden",(()=>{const{isBaseVisible:e}=this.state;e&&this.setState({isBaseVisible:!1})})),xt(this,"handleSliderButtonContentSizeChange",(({width:e=null,height:t=null,buttonTopCornerOffset:n=0,buttonLeftCornerOffset:i=0})=>{this.setState({changedContentWidth:e,changedContentHeight:t,buttonTopCornerOffset:n,buttonLeftCornerOffset:i},(()=>{this.handleWindowResize(),this.handleSliderButtonPosition()}))})),this.state={isReady:!1,isCollapsed:!1,isScrolledTo:!1,isBaseVisible:!1,iframeWidth:9999,unscaledContentWidth:9999,scalingPercent:100,mediaCfg:e.cfg,changedContentWidth:null,changedContentHeight:null,buttonTopCornerOffset:0,buttonLeftCornerOffset:0},this.markWidgetShownTimeEvent=Object(c.a)(this.markWidgetShownTimeEvent),this.calcMediaCfg=Object(h.y)(),this.handleScroll=Object(f.a)(this.handleScroll,300),this.prepareWidgetForBaseReady=Object(c.a)(this.prepareWidgetForBaseReady)}componentWillMount(){const{local:e}=this.context,{exposedSliderStylesSrc:t,widgetStylesSrc:n,cfg:i,customData:r}=this.props,{el:o}=e;this.prepareWidgetForLoad(),Object(u.b)({jss:e.jss,stylesSrc:n,styleSheetsDict:Tt,widgetId:e.id,sheetsManager:Pt,createStyleSheetOptions:{link:!0}}),Object(u.b)({jss:e.exposedJss,stylesSrc:t,styleSheetsDict:Et,widgetId:e.id,sheetsManager:kt,createStyleSheetOptions:{link:!0}}),this.updateStyles({cfg:i,customData:r});const s=this.checkIsSpecialSlider();o.className=v()(o.className,{[Et[e.id].sheet.classes.sliderTopEl]:!s,[Et[e.id].sheet.classes.sliderTopElTransparent]:s});const[a]=o.getElementsByClassName("js-relap-widget");this._contentEl=a}componentDidMount(){const{local:e,global:t}=this.context,{el:n}=e,[i]=n.getElementsByClassName("js-relap-action-button");this._actionButtonEl=i,t.addEventListener("resize",this.handleWindowResize,!1),t.addEventListener("resize",this.handleScroll,!1),t.addEventListener("scroll",this.handleScroll,!1),e.addEventListener("widgetResize",this.setIsCollapsedStyles,!1),this.setState({iframeWidth:this.getMaxWidth(),unscaledContentWidth:this.getMaxWidth()},(()=>{this.setIframeWidth(),this.handleWindowResize(),this.handleScroll(),this.handleWidgetVisibility(this.props),this.setIsCollapsedStyles()}))}componentWillReceiveProps(e){const{cfg:t,widgetStylesSrc:n,exposedSliderStylesSrc:i,SliderLayout:r}=this.props;e.cfg===t&&e.widgetStylesSrc===n&&e.exposedSliderStylesSrc===i&&e.SliderLayout===r||this.dropState(),this.updateStyles({cfg:e.cfg,customData:e.customData}),this.handleWidgetVisibility(e)}componentDidUpdate(){const{id:e,cfg:{slider:{maxScaleBy:t}},visible:n,onWidgetShouldBeVisible:i,onWidgetShouldBeHidden:r}=this.props,{isReady:o,isScrolledTo:s,isBaseVisible:a,scalingPercent:c}=this.state;if(this.setIframeWidth(),this.setIsCollapsedStyles(),!o||!s)return;100-c>t||!a?n&&r(e):n||i(e)}componentWillUnmount(){const{local:e,global:t}=this.context;Object(u.c)({widgetId:e.id,styleSheetsDict:Tt,sheetsManager:Pt}),Object(u.c)({widgetId:e.id,styleSheetsDict:Et,sheetsManager:kt}),t.removeEventListener("resize",this.handleWindowResize,!1),t.removeEventListener("resize",this.handleScroll,!1),t.removeEventListener("scroll",this.handleScroll,!1),this.handleScroll.cancel(),e.removeEventListener("widgetResize",this.setIsCollapsedStyles,!1)}render(){const{local:e}=this.context,{SliderLayout:t}=this.props,{isCollapsed:n,scalingPercent:i,unscaledContentWidth:o,mediaCfg:s}=this.state,a=Tt[e.id].sheet,c=Et[e.id].sheet,l=this.checkIsSpecialSlider(),d=r.a.createElement(ht,jt({},this.props,{cfg:s,widgetStyles:a,onWidgetReady:this.handleWidgetReady,onGridOverflow:this.handleGridOverflow,onWidgetShouldBeVisible:this.handleWidgetBaseVisible,onWidgetShouldBeHidden:this.handleWidgetBaseHidden,onSliderButtonContentSizeChange:this.handleSliderButtonContentSizeChange}));return r.a.createElement("div",{ref:e=>{this._rootEl=e}},r.a.createElement(pt.a,{percent:l?100:i,display:"inline",updateOnContentResize:!0,onScale:this.handleScale},r.a.createElement("div",{style:{width:`${o}px`}},r.a.createElement(t,{widgetStyles:a,exposedSliderStyles:c,isCollapsed:n,widgetBase:d,isSpecialSlider:l,onActionButtonClick:this.handleActionButtonClick}))))}}function _t(){return(_t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function Lt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}xt(Wt,"propTypes",{id:s.a.string.isRequired,cfgId:s.a.string.isRequired,customData:s.a.object,previewCfg:s.a.object,cfg:s.a.shape({slider:s.a.shape({width:s.a.number.isRequired,widthUnit:s.a.oneOf(["px","%"]),horizontalPosition:s.a.oneOf(["left","right"]),showAtDocPercent:s.a.number.isRequired,maxScaleBy:s.a.number.isRequired}).isRequired,grid:s.a.shape({elWidthExceeding:s.a.number,type:s.a.oneOf(["simple"]).isRequired}).isRequired,preset:s.a.string.isRequired}).isRequired,widgetStylesSrc:s.a.object.isRequired,exposedSliderStylesSrc:s.a.object.isRequired,SliderLayout:s.a.func,visible:s.a.bool,onWidgetReady:s.a.func,onWidgetShouldBeVisible:s.a.func,onWidgetShouldBeHidden:s.a.func}),xt(Wt,"contextTypes",{local:s.a.object.isRequired,global:s.a.object.isRequired,isPreview:s.a.bool,previewCfg:s.a.object}),xt(Wt,"defaultProps",{SliderLayout:Rt.a,visible:!1,customData:{},previewCfg:{},onWidgetReady:()=>{},onWidgetShouldBeVisible:()=>{},onWidgetShouldBeHidden:()=>{}});const At={},Mt=new l.b;class Dt extends i.PureComponent{constructor(e){super(e),Lt(this,"componentDidMount",(()=>{this.handleWidgetVisibility(this.props)})),Lt(this,"componentWillUnmount",(()=>{const{local:e}=this.context;Object(u.c)({widgetId:e.id,styleSheetsDict:At,sheetsManager:Mt}),this._resizeObserver.disconnect(),this.handleWindowResize.cancel()})),Lt(this,"updateStyles",(({cfg:e,customData:t})=>{const{local:n,global:i}=this.context,r={width:i.innerWidth,height:i.innerHeight},o=Object(h.u)(e,i),s=this.calcMediaCfg(...o);this.setState({mediaCfg:s},(()=>{At[n.id].sheet.update({globalWindow:r,cfg:s,customData:t})}))})),Lt(this,"handleWindowResize",(()=>{const{cfg:e,customData:t}=this.props;this.updateOverlayPosition(),this.updateStyles({cfg:e,customData:t})})),Lt(this,"handleFloat",(({positioning:{float:e}})=>{const{local:{el:t}}=this.context;t&&(t.style.float="left"===e||"right"===e?e:"")})),Lt(this,"handleWidgetVisibility",(({visible:e})=>{e?this.showWidget():this.hideWidget()})),Lt(this,"hideWidget",(()=>{const{local:{el:e}}=this.context;if(!e)return;e.style.height="1px";const t=e.offsetWidth;e.style.position="absolute",e.style.left="-9999px",e.style.width=`${t}px`,e.style.visibility="hidden"})),Lt(this,"markWidgetShownTimeEvent",(()=>{const{isPreview:e}=this.context,{id:t,cfgId:n}=this.props;e||Object(d.d)({id:"ready",instanceId:t,cfgId:n})})),Lt(this,"updateOverlayPosition",(()=>{const{local:{el:e}}=this.context,{cfg:{positioning:{positionBy:t}},additionalParams:{imgOverlaySrc:n}}=this.props;if(!e||!this._imgTarget)return;const i=n?`img[src="${n}"]`:"img",r="byAnchorEl"===t?e.parentElement.parentElement.querySelector(i):e.parentElement.querySelector(i),o=e.querySelector("div.js-relap-widget-inner-wrapper");if(!r||!o)return;const s=()=>{const t=r.getBoundingClientRect(),n=e.getBoundingClientRect();o.style.zIndex="1000",o.style.position="absolute",o.style.visibility="",o.style.width=`${t.width}px`,o.style.height=`${t.height}px`,o.style.left=t.left-n.left+"px",o.style.top=t.top-n.top+"px",o.style.display="flex",o.style.alignItems="flex-end",this.setState({overlayImageSize:{width:t.width,height:t.height}})},a=()=>{s(),r.removeEventListener("load",a)};r.complete?s():r.addEventListener("load",a)})),Lt(this,"showWidget",(()=>{const{local:{el:e}}=this.context,{cfg:{positioning:{positionBy:t}}}=this.props;if(!e)return;("byAnchorEl"===t?e.parentElement.parentElement.querySelector("img"):e.parentElement.querySelector("img"))&&(this.markWidgetShownTimeEvent(),e.style.position="relative",e.style.left="0",e.style.width="auto",e.style.height="0",e.style.visibility="",this.updateOverlayPosition())})),this.state={mediaCfg:e.cfg,overlayImageSize:{}},this.markWidgetShownTimeEvent=Object(c.a)(this.markWidgetShownTimeEvent),this.handleWindowResize=Object(f.a)(this.handleWindowResize,300),this.calcMediaCfg=Object(h.y)(),this._imgTarget=null}componentWillMount(){const{local:e,global:t,local:{el:n}}=this.context,{widgetStylesSrc:i,cfg:r,cfg:{positioning:{positionBy:o}},customData:s}=this.props;this.handleFloat(r),this.hideWidget(),Object(u.b)({jss:e.jss,stylesSrc:i,styleSheetsDict:At,widgetId:e.id,sheetsManager:Mt,createStyleSheetOptions:{link:!0}}),this._imgTarget="byAnchorEl"===o?n.parentElement.parentElement.querySelector("img"):n.parentElement.querySelector("img"),this._resizeObserver=new t.ResizeObserver(this.handleWindowResize),this._imgTarget&&this._resizeObserver.observe(this._imgTarget),this.updateStyles({cfg:r,customData:s})}componentWillReceiveProps(e){const{cfg:t,customData:n}=e;this.handleFloat(t),this.handleWidgetVisibility(e),this.updateStyles({cfg:t,customData:n})}render(){const{local:e}=this.context,{onWidgetReady:t}=this.props,{mediaCfg:n,overlayImageSize:i}=this.state,o=At[e.id].sheet;return r.a.createElement(ht,_t({},this.props,{cfg:n,widgetStyles:o,overlayImgSize:i,onWidgetReady:t}))}}function zt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Lt(Dt,"propTypes",{id:s.a.string.isRequired,cfgId:s.a.string.isRequired,cfg:s.a.object.isRequired,customData:s.a.object,widgetStylesSrc:s.a.object.isRequired,visible:s.a.bool,additionalParams:s.a.object,onWidgetReady:s.a.func}),Lt(Dt,"contextTypes",{local:s.a.object.isRequired,global:s.a.object.isRequired,isPreview:s.a.bool}),Lt(Dt,"defaultProps",{customData:{},additionalParams:{},visible:!1,onWidgetReady:()=>{}});class $t extends i.PureComponent{getChildContext(){const{local:e,global:t,isPreview:n,previewCfg:i,loadCustomRec:r,loadVideoComponent:o,loadArticleComponent:s,loadFormComponent:a}=this.props;return{local:e,global:t,isPreview:n,previewCfg:i,loadCustomRec:r,loadVideoComponent:o,loadArticleComponent:s,loadFormComponent:a}}render(){const{cfg:{type:e}={}}=this.props;if(!e)return null;switch(e){case"slider":return r.a.createElement(Wt,this.props);case"overlay":return r.a.createElement(Dt,this.props);case"article":case"standard":default:return r.a.createElement(St,this.props)}}}function Nt(){return(Nt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function Bt(e){return t=>r.a.createElement($t,Nt({},t,e))}zt($t,"propTypes",{local:s.a.object.isRequired,global:s.a.object.isRequired,isPreview:s.a.bool,previewCfg:s.a.object,cfg:s.a.shape({type:s.a.oneOf(["standard","article","slider","overlay"])}).isRequired,loadCustomRec:s.a.func.isRequired,loadVideoComponent:s.a.func.isRequired,loadArticleComponent:s.a.func.isRequired,loadFormComponent:s.a.func.isRequired}),zt($t,"childContextTypes",{local:s.a.object.isRequired,global:s.a.object.isRequired,isPreview:s.a.bool,previewCfg:s.a.object,loadCustomRec:s.a.func.isRequired,loadVideoComponent:s.a.func.isRequired,loadArticleComponent:s.a.func.isRequired,loadFormComponent:s.a.func.isRequired}),zt($t,"defaultProps",{isPreview:!1,previewCfg:{}})},1370:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n(0),r=n.n(i),o=n(2),s=n.n(o),a=n(1162);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class l extends i.PureComponent{constructor(...e){super(...e),c(this,"componentWillUnmount",(()=>{this._el.removeEventListener("auxclick",this.handleClick)})),c(this,"handleClick",(e=>{const{target:t,onClick:n,onSameTabOpen:i,onNewTabOpen:r}=this.props,o=0===e.button,s=1===e.button,a=e.ctrlKey||e.metaKey;if(o||s){if(o&&!a&&"_blank"!==t)return e.preventDefault(),n(e),void i();n(e),r()}})),c(this,"handlePreviewClick",(e=>{e.preventDefault()}))}componentDidMount(){this._el.addEventListener("auxclick",this.handleClick)}render(){const{isPreview:e,children:t,target:n,className:i,style:o,dataTest:s,onContextMenu:c,onDoubleClick:l,onMouseDown:d,onMouseEnter:u,onMouseLeave:h,onMouseMove:p,onMouseOut:f,onMouseOver:g,onMouseUp:m,onFocus:b,onBlur:y,title:v,href:w,utm:I}=this.props;return e?r.a.createElement("a",{ref:e=>{this._el=e},title:v,href:Object(a.r)(w,I),className:i,style:o,onClick:this.handlePreviewClick,onContextMenu:this.handlePreviewClick},t):r.a.createElement("a",{ref:e=>{this._el=e},title:v,href:Object(a.r)(w,I),target:n,rel:"_blank"===n?"noopener noreferrer":void 0,className:i,style:o,onClick:this.handleClick,onContextMenu:c,onDoubleClick:l,onMouseDown:d,onMouseEnter:u,onMouseLeave:h,onMouseMove:p,onMouseOut:f,onMouseOver:g,onMouseUp:m,onFocus:b,onBlur:y},t)}}c(l,"propTypes",{isPreview:s.a.bool,children:s.a.node,href:s.a.string,utm:s.a.shape({string:s.a.string,type:s.a.oneOf(["search","anchor"])}),target:s.a.oneOf(["_blank","_self","_parent","_top"]),className:s.a.string,style:s.a.object,dataTest:s.a.string,onClick:s.a.func,onNewTabOpen:s.a.func,onSameTabOpen:s.a.func,onContextMenu:s.a.func,onDoubleClick:s.a.func,onMouseDown:s.a.func,onMouseEnter:s.a.func,onMouseLeave:s.a.func,onMouseMove:s.a.func,onMouseOut:s.a.func,onMouseOver:s.a.func,onMouseUp:s.a.func,onFocus:s.a.func,onBlur:s.a.func,title:s.a.string}),c(l,"defaultProps",{isPreview:!1,children:null,href:"#",utm:{string:"",type:"search"},target:"_self",className:"",style:{},dataTest:"",onClick:()=>{},onNewTabOpen:()=>{},onSameTabOpen:()=>{},onContextMenu:()=>{},onDoubleClick:()=>{},onMouseDown:()=>{},onMouseEnter:()=>{},onMouseLeave:()=>{},onMouseMove:()=>{},onMouseOut:()=>{},onMouseOver:()=>{},onMouseUp:()=>{},onFocus:()=>{},onBlur:()=>{},title:""})},1371:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var i=n(0),r=n.n(i),o=n(61),s=n(2),a=n.n(s),c=n(1170),l=n(547),d=n(1162),u=n(1410);function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class p extends i.PureComponent{getChildContext(){const{local:e,global:t}=this.props;return{local:e,global:t}}render(){const{Content:e}=this.props,t=Object(u.a)(this.props,["Content","local","global"]);return r.a.createElement(e,t)}}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}h(p,"propTypes",{Content:a.a.oneOfType([a.a.func,a.a.object]).isRequired,local:a.a.object.isRequired,global:a.a.object.isRequired}),h(p,"childContextTypes",{local:a.a.object.isRequired,global:a.a.object.isRequired});class m extends i.Component{constructor(...e){super(...e),g(this,"componentWillUnmount",(()=>{this._iframePromise.then((()=>{Object(l.a)({local:this._local}),delete this._local,delete this._rootEl,delete this._iframePromise}))})),g(this,"refRoot",(e=>{this._rootEl=e})),g(this,"renderModule",(e=>{const{global:t}=this.context;this._rootEl&&Object(o.render)(r.a.createElement(p,f({},e,{local:this._local,global:t})),this._rootEl)}))}componentDidMount(){const{local:e}=this.context,{cfg:{preset:t},onError:n}=this.props,i="imgOverlay"===t,{el:r,iframeEl:o,promise:s}=Object(c.a)({anchorEl:this._rootEl,position:i?"img_overlay":"append",frameType:"relapCustomRec",wrapped:!1});this._el=r,this._local=o.contentWindow,this._local.el=r,this._local.iframeEl=o,this._local.iframeElArr=[...e.iframeElArr||[],o],this._local.id=`${e.id}_module_${Object(d.b)(e.id)}`,this._iframePromise=new Promise((e=>{s.then((()=>{this._rootEl=Object(l.b)(o.contentWindow),e()}))}));const a=setTimeout(n,1e3);this._iframePromise.then((()=>{clearTimeout(a),this.renderModule(this.props)}))}componentWillReceiveProps(e){this._iframePromise.then((()=>{this.renderModule(e)}))}shouldComponentUpdate(){return!1}render(){return r.a.createElement("div",{ref:this.refRoot,style:{width:"100%"}})}}g(m,"propTypes",{cfg:a.a.object.isRequired,onError:a.a.func}),g(m,"defaultProps",{onError:()=>{}}),g(m,"contextTypes",{local:a.a.object.isRequired,global:a.a.object.isRequired});class b extends i.PureComponent{render(){return r.a.createElement(m,this.props)}}},1373:function(e,t,n){"use strict";var i=n(0),r=n(473),o=n(10),s=n(1414);t.a=(e,t)=>{const{current:n}=Object(i.useRef)({}),{current:a}=Object(i.useRef)(new o.b);return Object(s.a)((()=>(Object(r.b)({jss:e.jss,stylesSrc:t,styleSheetsDict:n,widgetId:e.id,sheetsManager:a}),()=>{Object(r.c)({styleSheetsDict:n,widgetId:e.id,sheetsManager:a})}))),n[e.id].sheet}},1375:function(e,t,n){var i=n(0);function r(e){return i.createElement("svg",e,i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.29289 16.7071C6.90237 16.3166 6.90237 15.6834 7.29289 15.2929L10.5858 12L7.29289 8.70711C6.90237 8.31658 6.90237 7.68342 7.29289 7.29289C7.68342 6.90237 8.31658 6.90237 8.70711 7.29289L12 10.5858L15.2929 7.29289C15.6834 6.90237 16.3166 6.90237 16.7071 7.29289C17.0976 7.68342 17.0976 8.31658 16.7071 8.70711L13.4142 12L16.7071 15.2929C17.0976 15.6834 17.0976 16.3166 16.7071 16.7071C16.3166 17.0976 15.6834 17.0976 15.2929 16.7071L12 13.4142L8.70711 16.7071C8.31658 17.0976 7.68342 17.0976 7.29289 16.7071Z",fill:"currentColor"}))}r.defaultProps={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},e.exports=r,r.default=r},1376:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var i=n(0),r=n.n(i),o=n(2),s=n.n(o),a=n(10),c=n(1369),l=n.n(c),d=n(1370),u=n(473),h={root:{position:"absolute",top:0,left:0,right:0,bottom:0}};function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const g={},m=new a.b;class b extends i.PureComponent{constructor(...e){super(...e),f(this,"componentWillUnmount",(()=>{const{local:e}=this.context;Object(u.c)({widgetId:e.id,styleSheetsDict:g,sheetsManager:m})}))}componentWillMount(){const{local:e}=this.context;Object(u.b)({jss:e.jss,stylesSrc:h,styleSheetsDict:g,widgetId:e.id,sheetsManager:m})}render(){const{local:e}=this.context,{className:t,zIndex:n,onClick:i,title:o}=this.props,s=g[e.id].sheet,a=l()(s.classes.root,t);return r.a.createElement(d.a,p({},this.props,{className:a,onClick:i,style:{zIndex:n},title:o}))}}f(b,"propTypes",{className:s.a.string,zIndex:s.a.oneOfType([s.a.number,s.a.string]),onClick:s.a.func,title:s.a.string}),f(b,"contextTypes",{local:s.a.object.isRequired}),f(b,"defaultProps",{className:"",zIndex:"auto",onClick:()=>{},title:""})},1377:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));class i{constructor(e){this.finalCallback=e,this.promises=[],this.dict={},this.finalized=!1}createCb(e){const{dict:t}=this;if(t[e])return t[e];if(this.finalized)return()=>{};let n;const i=new Promise((e=>{n=e}));return this.promises.push(i),t[e]=n,n}finalize(){this.finalized||(this.finalized=!0,Promise.all(this.promises).then(this.finalCallback))}}},1379:function(e,t,n){"use strict";function i(...e){console.log(...e)}n.d(t,"a",(function(){return i}))},1380:function(e,t,n){"use strict";n.d(t,"a",(function(){return D}));var i=n(1500),r=n(1565),o=n(1378),s=n(1447),a=n(1372),c=n(1165),l=n(0),d=n.n(l),u=n(2),h=n.n(u),p=n(10),f=n(1369),g=n.n(f),m=n(1163),b=n(473),y={imgCroppedWrapper:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",width:"100%",overflow:"hidden","font-size":0},imgCropped:{display:"block","max-width":"none",width:"100%",height:"100%",objectFit:"cover"},imgFittedWrapper:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",position:"relative"},imgFitted:{width:"100%",height:"100%",objectFit:"contain",display:"block",position:"relative",zIndex:5},wrapperBlurBackground:{position:"absolute",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",fontSize:0,zIndex:1},wrapperBlurShade:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba( 0, 0, 0, 0.05)",zIndex:2}};const v=["fit","fit-no-stretch"],w=["auto","auto-no-stretch"],I=["fit-no-stretch","auto-no-stretch"];function C(){return(C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const S={},R=new p.b;class j extends l.PureComponent{constructor(...e){super(...e),O(this,"componentDidUpdate",(()=>{const{naturalAR:e}=this.props;null===e&&this.hideImg()})),O(this,"componentWillUnmount",(()=>{const{local:e}=this.context;Object(b.c)({widgetId:e.id,styleSheetsDict:S,sheetsManager:R})})),O(this,"hideImg",(()=>{const e=this._img;e.style.position="absolute",e.style.visibility="hidden"})),O(this,"handleImgLoad",(e=>{const{onLoad:t,onPreload:n,onImageSize:i}=this.props,r=this._img;if(!r)return;const{naturalWidth:o,naturalHeight:s}=r;o&&s&&(r.style.position="",r.style.visibility="",i({naturalWidth:o,naturalHeight:s,src:r.currentSrc}),n(),t(e))})),O(this,"getIsFitted",(()=>{const{imgInscribeType:e}=this.props;return v.includes(e)})),O(this,"getIsNoStretch",(()=>{const{imgInscribeType:e}=this.props;return I.includes(e)})),O(this,"getIsAnimated",(()=>{const{recType:e,isInViewportAnimation:t}=this.props;return"ad"===e&&t}))}componentWillMount(){const{local:e}=this.context;Object(b.b)({jss:e.jss,stylesSrc:y,styleSheetsDict:S,widgetId:e.id,sheetsManager:R})}componentDidMount(){this.handleImgLoad()}componentWillReceiveProps(e){const{src:t}=this.props;t!==e.src&&this.hideImg()}render(){const{local:e}=this.context,{src:t,crossOrigin:n,blurControl:i,isInViewport:r,isInViewportAnimation:o,recIndex:s,recType:a,blurRadius:c,onError:l}=this.props,u=S[e.id].sheet,h=n?{crossOrigin:n}:{},p="no-blur"===i,f=this.getIsFitted(),m=this.getIsAnimated(),b=g()(f&&!m?u.classes.imgFittedWrapper:u.classes.imgCroppedWrapper),y=g()(f&&!m?u.classes.imgFitted:u.classes.imgCropped);let v={};if(this._img){const{naturalWidth:e,naturalHeight:t}=this._img;v=this.getIsNoStretch()&&f?{maxWidth:e,maxHeight:t}:{maxWidth:"initial",maxHeight:"initial"}}o&&(v.animationDelay=.6*s+1+"s");const w={backgroundImage:`url(${t})`,top:`-${2*c}px`,left:`-${2*c}px`,right:`-${2*c}px`,bottom:`-${2*c}px`,filter:`blur(${c}px)`};return d.a.createElement("div",{className:b},f&&!p&&!m&&d.a.createElement("div",{className:u.classes.wrapperBlurBackground,style:w}),d.a.createElement("img",C({className:y,src:t,ref:e=>{this._img=e},onLoad:this.handleImgLoad,onError:l,alt:""},h,{style:v,"data-is-in-viewport":r,"data-rec-type":a})),f&&!p&&!m&&d.a.createElement("div",{className:u.classes.wrapperBlurShade}))}}O(j,"propTypes",{src:h.a.string.isRequired,aspectRatio:h.a.number,naturalAR:h.a.number,crossOrigin:h.a.oneOf(["anonymous","use-credentials",""]),imgInscribeType:h.a.oneOf(["crop","fit","fit-no-stretch"]),blurControl:h.a.oneOf(["no-blur","auto"]),isInViewport:h.a.bool,isInViewportAnimation:h.a.bool,recIndex:h.a.number,recType:h.a.string,onLoad:h.a.func,onError:h.a.func,onImageSize:h.a.func,onPreload:h.a.func,blurRadius:h.a.number}),O(j,"contextTypes",{local:h.a.object.isRequired}),O(j,"defaultProps",{aspectRatio:null,crossOrigin:null,naturalAR:null,imgInscribeType:"crop",blurControl:"auto",blurRadius:10,isInViewport:!1,isInViewportAnimation:!1,recIndex:0,recType:"",onLoad:()=>{},onPreload:()=>{},onImageSize:()=>{},onError:()=>{}});var x=n(1162),E=n(852),k={thumbnailWrapper:{display:"block",width:"100%",overflow:"hidden","font-size":0},thumbnailLoaderWrapper:{display:"flex","justify-content":"center","align-items":"center",width:"100%",height:"100%",background:"#f0f2f2"},thumbnailLoader:{"border-radius":"50%",animation:"1s ease-in-out 0s normal none infinite $rotate","&$size0":{display:"none"},"&$size1":{width:"20px",height:"20px",border:"2px solid","border-color":"#e7eaea","border-bottom-color":"transparent"},"&$size2":{width:"40px",height:"40px",border:"4px solid","border-color":"#e7eaea","border-bottom-color":"transparent"}},fallbackWrapper:{extend:"thumbnailLoaderWrapper",position:"absolute",top:0,left:0},fallbackWider:{position:"relative","& > svg":{width:"100%",height:"100%",visibility:"hidden"}},fallback:{"& > svg":{width:"100%",height:"100%"},"&$size0":{display:"none"},"&$size1":{width:`${E.b}px`,height:`${E.a}px`},"&$size2":{width:2*E.b+"px",height:2*E.a+"px"}},size0:{},size1:{},size2:{},"@keyframes rotate":{from:{transform:"rotate(0deg)"},to:{transform:"rotate(360deg)"}}},T=n(1564),P=n.n(T);function W(){return(W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const L={},A=new p.b,M=e=>e;class D extends l.PureComponent{constructor(e){super(e),_(this,"componentDidMount",(()=>{const{local:e}=this.context,{setThumbItem:t}=this.props;e.addEventListener("resize",this.handleWindowResize),this.originalHandleWindowResize(),this.updateWrapperHeight(),this.updateWidthSize(),this.handlePreload(),t(this._wrapper)})),_(this,"componentDidUpdate",(()=>{const{setThumbItem:e}=this.props;this.originalHandleWindowResize(),e(this._wrapper)})),_(this,"componentWillUnmount",(()=>{const{local:e}=this.context;Object(b.c)({widgetId:e.id,styleSheetsDict:L,sheetsManager:A}),e.removeEventListener("resize",this.handleWindowResize),this.handleWindowResize.cancel()})),_(this,"handleSrc",(()=>{const{src:e}=this.props;if(!this._wrapper||Object(i.a)(e))return;const{srcItem:t}=this.state,n=this._wrapper.clientWidth,r=this.getPreparedSrc(e),o=e=>{const{aspectRatio:t}=this.props,i=e.width/e.height;return null===t||t>=i?n:i/t*n},a=Object(c.a)(r,(e=>e.width>o(e)))||Object(s.a)(r);(!t||a.width>t.width||t.src!==a.src)&&this.setState({srcItem:a})})),_(this,"handlePreload",(()=>{const{onPreload:e}=this.props;e()})),_(this,"handleNaturalImageSize",(({naturalWidth:e,naturalHeight:t,src:n})=>{const{onImageSizeGet:i}=this.props;this.setState({naturalWidth:e,naturalHeight:t},(()=>{this.updateWrapperHeight(),i({width:e,height:t,src:n})}))})),_(this,"calcWrapperHeight",(()=>{const{aspectRatio:e,aspectRatioFallback:t}=this.props,{naturalWidth:n,naturalHeight:i}=this.state,r=this._wrapper.clientWidth;if(n&&i&&!e){return r/(n/i)}return r/(null===e?t:e)})),_(this,"setImgInscribeType",(e=>{this.setState({imgInscribeType:e})})),_(this,"updateWrapperHeight",(()=>{if(!this._wrapper)return;const{aspectRatioApplyToRecs:e,aspectRatioApplyToRecTypes:t,recSize:n,recType:i,fitControl:r,onUpdateWrapperHeight:o}=this.props,{naturalWidth:s,naturalHeight:a,imgInscribeType:c}=this.state,l=this.calcWrapperHeight();this._wrapper.style.height=`${l}px`,o();const{srcItem:d}=this.state;if(!w.includes(r))return void this.setImgInscribeType(r);if(!(d&&e.includes(n)&&t.includes(i)&&s&&a))return void(v.includes(c)&&this.setImgInscribeType("crop"));const u=this._wrapper.clientWidth,h=u/l,p=s/a;let f=0;const g="wide"===n?15:20;if(p>h){const e=a/(s/u);f=100*Math.abs(1-e/l)}if(p<h){const e=s/(a/l);f=100*Math.abs(1-e/u)}const m=I.includes(r)?"-no-stretch":"";this.setImgInscribeType(f>g?`fit${m}`:"crop")})),_(this,"updateWidthSize",(()=>{this._wrapper&&this.setState({size:Object(x.s)(this._wrapper)})})),_(this,"handleWindowResize",(()=>{this.handleSrc(),this.updateWrapperHeight(),this.updateWidthSize()})),_(this,"handleImgLoadError",(()=>{this.setState({status:"failed"},this.handlePreload)})),_(this,"handleImgLoad",(({target:e=null}={})=>{const{onLoad:t}=this.props;this.setState({status:"complete"}),t({imgEl:e})})),_(this,"renderLoader",(()=>{const{local:e}=this.context,{status:t,size:n}=this.state;if("loading"!==t)return null;const i=L[e.id].sheet,r=g()(i.classes.thumbnailLoader,i.classes[`size${n}`]);return d.a.createElement("div",{className:i.classes.thumbnailLoaderWrapper},d.a.createElement("div",{className:r}),";")})),_(this,"renderFallback",(()=>{const{local:e}=this.context,{status:t,size:n}=this.state;if("failed"!==t)return null;const i=L[e.id].sheet,r=g()(i.classes.fallback,i.classes[`size${n}`]);return d.a.createElement("div",{className:i.classes.fallbackWider},d.a.createElement(P.a,null),d.a.createElement("div",{className:i.classes.fallbackWrapper},d.a.createElement("div",{className:r},d.a.createElement(P.a,null))))})),_(this,"renderImgCropped",(()=>{const{aspectRatio:e,crossOrigin:t,onPreload:n,blurControl:i,blurRadius:r,recType:o,isInViewport:s,isInViewportAnimation:a,recIndex:c}=this.props,{srcItem:l,imgInscribeType:u,naturalWidth:h,naturalHeight:p}=this.state;if(!l)return null;const f=t?{crossOrigin:t}:{},g=h&&p?h/p:null;return d.a.createElement(j,W({},f,{src:l.src,aspectRatio:e,naturalAR:g,imgInscribeType:u,blurControl:i,blurRadius:r,isInViewport:s,isInViewportAnimation:a,recIndex:c,recType:o,onImageSize:this.handleNaturalImageSize,onPreload:n,onLoad:this.handleImgLoad,onError:this.handleImgLoadError}))})),this.state={status:e.src.length?"loading":"failed",size:2,imgInscribeType:"crop"},this.handlePreload=Object(o.a)(this.handlePreload),this.originalHandleWindowResize=this.handleWindowResize,this.handleWindowResize=Object(a.a)(this.handleWindowResize,300),this.getPreparedSrc=Object(m.a)(M,(e=>Object(r.a)(e,"width").sort(((e,t)=>e.width-t.width))))}componentWillMount(){const{local:e}=this.context;Object(b.b)({jss:e.jss,stylesSrc:k,styleSheetsDict:L,widgetId:e.id,sheetsManager:A})}render(){const{local:e}=this.context,t=L[e.id].sheet;return d.a.createElement("div",{className:t.classes.thumbnailWrapper,ref:e=>{this._wrapper=e},style:{minHeight:"1px"}},this.renderLoader(),this.renderFallback(),this.renderImgCropped())}}_(D,"propTypes",{src:h.a.arrayOf(h.a.shape({width:h.a.number.isRequired,height:h.a.number.isRequired,src:h.a.string.isRequired})),aspectRatio:h.a.number,aspectRatioApplyToRecs:h.a.array,aspectRatioApplyToRecTypes:h.a.array,recSize:h.a.string,recType:h.a.string,aspectRatioFallback:h.a.number,crossOrigin:h.a.oneOf(["anonymous","use-credentials",""]),blurControl:h.a.oneOf(["blur","no-blur","auto"]),fitControl:h.a.oneOf(["fit","fit-no-stretch","crop","auto-no-stretch","auto"]),blurRadius:h.a.number,isInViewport:h.a.bool,isInViewportAnimation:h.a.bool,recIndex:h.a.number,onPreload:h.a.func,onLoad:h.a.func,onUpdateWrapperHeight:h.a.func,onImageSizeGet:h.a.func,setThumbItem:h.a.func}),_(D,"contextTypes",{local:h.a.object.isRequired}),_(D,"defaultProps",{src:[],aspectRatio:null,aspectRatioFallback:21/16,aspectRatioApplyToRecs:["normal"],aspectRatioApplyToRecTypes:["ad"],recSize:"",recType:"",crossOrigin:null,blurControl:"auto",fitControl:"auto",blurRadius:10,isInViewport:!1,isInViewportAnimation:!1,recIndex:0,onPreload:()=>{},onLoad:()=>{},onUpdateWrapperHeight:()=>{},onImageSizeGet:()=>{},setThumbItem:()=>{}})},1381:function(e,t,n){"use strict";n.d(t,"l",(function(){return s})),n.d(t,"g",(function(){return a})),n.d(t,"a",(function(){return c})),n.d(t,"h",(function(){return l})),n.d(t,"k",(function(){return d})),n.d(t,"d",(function(){return u})),n.d(t,"m",(function(){return h})),n.d(t,"b",(function(){return p})),n.d(t,"e",(function(){return f})),n.d(t,"c",(function(){return g})),n.d(t,"i",(function(){return m})),n.d(t,"j",(function(){return b})),n.d(t,"f",(function(){return y}));var i=n(1442),r=n(1439),o=(n(1424),n(1385));function s(){return"\n    font-family: 'Roboto', sans-serif;\n  "}function a(){return`border-radius: ${o.d}px;`}function c(){return`border-radius: ${o.c}px`}function l(e="base",t=0){return o.e[e]?o.e[e]+t:1}function d(){return`box-shadow: 0 2px 10px -4px ${Object(r.a)("shadow")}`}function u(e=Object(r.a)("background","secondary")){return`box-shadow: inset 0 0 0 1px ${e}`}function h({what:e="all",time:t="350ms",type:n="ease",delay:i="0s"}={}){return`transition: ${e.split(",").map((e=>`${e.trim()} ${t} ${n} ${i}`)).join(", ")}`}function p(){return"\n    opacity: 0.5;\n    pointer-events: none;\n  "}function f(){return"\n    position: absolute;\n    visibility: hidden;\n  "}function g(){return"\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    word-wrap: normal;\n  "}function m({size:e=2,iconPosition:t="none",isWide:n=!1}){const{sidePadding:i,wideSidePadding:r,height:s,fontSize:a,lineHeight:c,iconMargin:l,iconSize:d}=o.b[e],u=n?r:i,h=(s-c)/2-1;let p;const f=2*l+d;switch(t){case"both":p=`${h}px ${f}px ${h}px ${f}px`;break;case"left":p=`${h}px ${u}px ${h}px ${f}px`;break;case"right":p=`${h}px ${f}px ${h}px ${u}px`;break;case"none":default:p=`${h}px ${u}px`}return`\n    display: block;\n\n    padding: ${p};\n\n    font-size: ${a}px;\n    line-height: ${c}px;\n  `}function b({size:e=2,iconPosition:t="none",isSeparate:n=!1}){const{height:i,iconSize:r,iconMargin:s}=o.b[e];return`\n    display: block;\n    position: ${"none"===t?"":"absolute"};\n    z-index: ${l("base",5)};\n    top: ${(i-r)/2}px;\n    left: ${"left"===t?`${s}px`:""};\n    right: ${"right"===t?`${s}px`:""};\n    margin: ${n?(i-r)/2-1+"px":""};\n\n    width: ${r}px;\n    height: ${r}px;\n  `}function y({colorScheme:e,colorMode:t,isActive:n,isGrouped:o}){let s,a,c,l;switch(e){case"accented":return s=`\n        background: ${Object(r.a)("primary","semifocused")};\n        border-color: ${Object(r.a)("primary","semifocused")};\n\n        &:hover {\n          background: ${Object(r.a)("primary")};\n          border-color: ${Object(r.a)("primary")};\n        }\n      `,a=`\n        &:hover {\n          border-color: ${n?Object(r.a)("primary","semifocused"):Object(r.a)("primary","focused")};\n        }\n      `,`\n        color: ${Object(r.a)("text","inverted")};\n        background: ${Object(r.a)("primary")};\n        border-color: ${Object(r.a)("primary")};\n\n        &:hover {\n          background: ${Object(r.a)("primary","semifocused")};\n          border-color: ${Object(r.a)("primary","semifocused")};\n        }\n\n        ${n?s:""}\n        ${o?a:""}\n      `;case"grouped-normal":return s=`\n        color: ${Object(r.a)("text","inverted")};\n        background: ${Object(r.a)("primary")};\n\n        &:hover {\n          border-color: ${Object(r.a)("primary")};\n        }\n\n        ${n?s:""}\n      `,`\n        color: ${Object(r.a)("primary")};\n        background: ${Object(r.a)("background","component")};\n        border-color: ${Object(r.a)("primary")};\n\n        &:hover {\n          color: ${Object(r.a)("primary","semifocused")};\n          border-color: ${Object(r.a)("primary","semifocused")};\n        }\n\n        ${n?s:""}\n      `;case"monochrome":return s=`\n        color: ${Object(r.a)("text","inverted")};\n        background: ${Object(r.a)("ui","controlFocused")};\n\n        &:hover {\n          color: ${Object(r.a)("text","ui")};\n          background: transparent;\n        }\n      `,`\n        color: ${Object(r.a)("text","ui")};\n        background: transparent;\n        border-color: ${Object(r.a)("ui","controlGreyedout")};\n\n        &:hover {\n          color: ${Object(r.a)("text","inverted")};\n          background: ${Object(r.a)("ui","controlFocused")};\n        }\n\n        ${n?s:""}\n      `;case"control":return s=`\n        color: ${Object(r.a)("text","inverted")};\n        background: ${Object(r.a)("ui","control")};\n\n        &:hover {\n          color: ${Object(r.a)("ui","control")};\n          background: ${Object(r.a)("background","block")};\n        }\n      `,a=`\n        &:hover {\n          border-color: ${Object(r.a)("ui","control")};\n        }\n      `,`\n        color: ${Object(r.a)("ui","control")};\n        background: ${Object(r.a)("background","block")};\n        border-color: ${Object(r.a)("ui","control")};\n\n        &:hover {\n          color: ${Object(r.a)("text","inverted")};\n          background: ${Object(r.a)("ui","control")};\n        }\n\n        ${n?s:""}\n        ${o?a:""}\n      `;case"inline":return s=`\n        color: ${Object(r.a)("text","inverted")};\n        background: ${Object(r.a)("ui","control")};\n\n        &:hover {\n          color: ${Object(r.a)("text","ui")};\n          background: transparent;\n        }\n      `,`\n        color: ${Object(r.a)("text","greyedout")};\n        background: transparent;\n        border-color: transparent;\n        border-radius: 0;\n\n        &:hover {\n          color: ${Object(r.a)("text","inverted")};\n          background: ${Object(r.a)("ui","control")};\n        }\n\n        ${n?s:""}\n      `;case"normal":return s=`\n        border-color: ${Object(r.a)("primary")};\n        background: ${Object(r.a)("primary","semifocusedInverted")};\n        color: ${Object(r.a)("text","inverted")};\n\n        &:hover {\n          border-color: ${Object(r.a)("primary","semifocused")};\n          color: ${Object(r.a)("primary","semifocused")};\n          background: ${Object(r.a)("background","block")};\n        }\n\n        &:active {\n          border-color: ${Object(r.a)("primary")};\n          background: ${Object(r.a)("primary","semifocusedInverted")};\n          color: ${Object(r.a)("text","inverted")};\n        }\n      `,`\n        color: ${Object(r.a)("primary")};\n        background: ${Object(r.a)("background","block")};\n        border-color: ${Object(r.a)("primary")};\n\n        &:hover {\n          color: ${Object(r.a)("primary","semifocused")};\n          border-color: ${Object(r.a)("primary","semifocused")};\n        }\n\n        &:active {\n          border-color: ${Object(r.a)("primary","semifocused")};\n          background: ${Object(r.a)("primary","semifocusedInverted")};\n          color: ${Object(r.a)("text","inverted")};\n        }\n\n        ${n?s:""}\n      `;case"secondary":return c={normal:Object(r.a)("ui","control"),filled:Object(r.a)("text","inverted"),transparent:Object(r.a)("ui","control")},l={normal:Object(r.a)("background","block"),filled:Object(r.a)("ui","control"),transparent:"transparent"},`\n        color: ${c[t]};\n        background: ${l[t]};\n        border-color: ${Object(r.a)("ui","control")};\n\n        &:hover {\n          color: ${Object(r.a)("text","inverted")};\n          background: ${Object(r.a)("ui","control")};\n          border-color: ${Object(r.a)("ui")};\n        }\n\n        &:active {\n          color: ${Object(r.a)("text","inverted")};\n          background: ${Object(r.a)("ui")};\n          border-color: ${Object(r.a)("ui")};\n        }\n      `;case"success":return c={normal:Object(r.a)("success"),filled:Object(r.a)("text","inverted"),transparent:Object(r.a)("success")},l={normal:Object(r.a)("background","block"),filled:Object(r.a)("success"),transparent:"transparent"},`\n        color: ${c[t]};\n        background: ${l[t]};\n        border-color: ${Object(r.a)("success")};\n\n        &:hover {\n          color: ${Object(r.a)("text","inverted")};\n          background: ${Object(r.a)("success")};\n          border-color: ${Object(r.a)("success","focused")};\n        }\n\n        &:active {\n          color: ${Object(r.a)("text","inverted")};\n          background: ${Object(r.a)("success","focused")};\n          border-color: ${Object(r.a)("success","focused")};\n        }\n      `;case"danger":return c={normal:Object(r.a)("danger"),filled:Object(r.a)("text","inverted"),transparent:Object(r.a)("danger")},l={normal:Object(r.a)("background","block"),filled:Object(r.a)("danger"),transparent:"transparent"},`\n        color: ${c[t]};\n        background: ${l[t]};\n        border-color: ${Object(r.a)("danger")};\n\n        &:hover {\n          color: ${Object(r.a)("text","inverted")};\n          background: ${Object(r.a)("danger")};\n          border-color: ${Object(r.a)("danger","focused")};\n        }\n\n        &:active {\n          color: ${Object(r.a)("text","inverted")};\n          background: ${Object(r.a)("danger","focused")};\n          border-color: ${Object(r.a)("danger","focused")};\n        }\n      `;case"warning":return c={normal:Object(r.a)("warning"),filled:Object(r.a)("text","inverted"),transparent:Object(r.a)("warning")},l={normal:Object(r.a)("background","block"),filled:Object(r.a)("warning"),transparent:"transparent"},`\n        color: ${c[t]};\n        background: ${l[t]};\n        border-color: ${Object(r.a)("warning")};\n\n        &:hover {\n          color: ${Object(r.a)("text","inverted")};\n          background: ${Object(r.a)("warning")};\n          border-color: ${Object(r.a)("warning","focused")};\n        }\n\n        &:active {\n          color: ${Object(r.a)("text","inverted")};\n          background: ${Object(r.a)("warning","focused")};\n          border-color: ${Object(r.a)("warning","focused")};\n        }\n      `;case"info":return c={normal:Object(r.a)("info"),filled:Object(r.a)("text","inverted"),transparent:Object(r.a)("info")},l={normal:Object(r.a)("background","block"),filled:Object(r.a)("info"),transparent:"transparent"},`\n        color: ${c[t]};\n        background: ${l[t]};\n        border-color: ${Object(r.a)("info")};\n\n        &:hover {\n          color: ${Object(r.a)("text","inverted")};\n          background: ${Object(r.a)("info")};\n          border-color: ${Object(r.a)("info","focused")};\n        }\n\n        &:active {\n          color: ${Object(r.a)("text","inverted")};\n          background: ${Object(r.a)("info","focused")};\n          border-color: ${Object(r.a)("info","focused")};\n        }\n      `;case"toggle":return`\n        color: ${n?Object(r.a)("text","inverted"):Object(r.a)("primary")};\n        background: ${n?Object(r.a)("primary","semifocusedInverted"):Object(r.a)("background","block")};\n        border-color: ${Object(r.a)("primary")};\n\n        &:hover {\n          background: ${n?Object(r.a)("primary"):Object(i.a)(.55,Object(r.a)("primary"))};\n        }\n      `;case"primary":default:return c={normal:Object(r.a)("primary"),filled:Object(r.a)("text","inverted"),transparent:Object(r.a)("primary")},l={normal:Object(r.a)("background","block"),filled:Object(r.a)("primary"),transparent:"transparent"},`\n        color: ${c[t]};\n        background: ${l[t]};\n        border-color: ${Object(r.a)("primary")};\n\n        &:hover {\n          color: ${Object(r.a)("text","inverted")};\n          background: ${Object(r.a)("primary","semifocusedInverted")};\n          border-color: ${Object(r.a)("primary")};\n        }\n\n        &:active {\n          color: ${Object(r.a)("text","inverted")};\n          background: ${Object(r.a)("primary","semifocused")};\n          border-color: ${Object(r.a)("primary","semifocused")};\n        }\n      `}}},1382:function(e,t,n){"use strict";n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return u})),n.d(t,"e",(function(){return f})),n.d(t,"d",(function(){return g})),n.d(t,"g",(function(){return m})),n.d(t,"f",(function(){return b})),n.d(t,"a",(function(){return y}));var i=n(1481);const r={};let o,s=[];function a(){o&&(s.forEach((e=>{o.dispatch(Object(i.b)(e))})),s=[])}function c({phase:e,processId:t,groupId:n,value:i}){var o;const c=function({processId:e,groupId:t}){return`${e}@${t}`}({processId:t,groupId:n});switch(function({processId:e,groupId:t,eventId:n}){r[n]||(r[n]={processId:e,groupId:t})}({processId:t,groupId:n,eventId:c}),e){case"start":case"end":if(r[c][e])return;r[c][e]=i-(null===(o=window.perfTiming)||void 0===o?void 0:o.assetLoaderStart)||0;break;case"point":default:const t=i-window.perfTiming.assetLoaderStart;r[c].start=t,r[c].end=t}!function({eventId:e}){r[e].start&&r[e].end&&(s.push(r[e]),a())}({eventId:c})}function l({phase:e,processId:t,groupId:n}){c({phase:e,processId:t,groupId:n,value:Date.now()})}function d({id:e,groupId:t}){l({phase:"start",processId:e,groupId:t})}function u({id:e,groupId:t}){l({phase:"end",processId:e,groupId:t})}function h({phase:e,processId:t,instanceId:n,cfgId:i,value:r}){c({phase:e,processId:t,groupId:n,value:r}),c({phase:e,processId:t,groupId:`widget ${i}`,value:r})}function p({phase:e,processId:t,instanceId:n,cfgId:i}){h({phase:e,processId:t,instanceId:n,cfgId:i,value:Date.now()})}function f({id:e,instanceId:t,cfgId:n}){p({phase:"start",processId:e,instanceId:t,cfgId:n})}function g({id:e,instanceId:t,cfgId:n}){p({phase:"end",processId:e,instanceId:t,cfgId:n})}function m({id:e,groupId:t,value:n}){c({phase:"start",processId:e,groupId:t,value:n})}function b({id:e,groupId:t,value:n}){c({phase:"point",processId:e,groupId:t,value:n})}function y(e){o=e,a()}},1383:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(1568),r=n.n(i);function o(e=[]){if(!e.length)return null;const t={100:"100","100italic":"100i",200:"200","200italic":"200i",300:"300","300italic":"300i",400:"400","400italic":"400i",regular:"400",italic:"400i",500:"500","500italic":"500i",600:"600","600italic":"600i",700:"700","700italic":"700i",800:"800","800italic":"800i",900:"900","900italic":"900i"};return{families:e.map((e=>{return`${e.family}:${i=e.variants,i.map((e=>t[e])).join(",")}${e.subsets&&e.subsets.length?`:${n=e.subsets,n.join(",")}`:""}`;var n,i}))}}function s(e=[]){if(!e.length)return null;const t={100:"1",200:"2",300:"3",400:"4",normal:"4",500:"5",600:"6",700:"7",bold:"7",800:"8",900:"9"};return{families:e.map((({family:e,style:n="normal",weight:i="normal"})=>`${e}:${n[0]}${t[i]}`))}}function a(e){return e.map((e=>{const t=`font-family:'${e.family}';`,n=e.weight?`font-weight:${e.weight};`:"",i=e.style?`font-style:${e.style};`:"",r=[];e.woff2&&r.push(`url('${e.woff2}') format('woff2')`),e.woff&&r.push(`url('${e.woff}') format('woff')`),e.ttf&&r.push(`url('${e.ttf}') format('truetype')`);return`@font-face{${t}${n}${i}${`src:${r.join(",")};`}}`})).join("")}function c({externalFonts:{google:e,custom:t,timeout:n=0}={},local:i}){return e||t?new Promise((c=>{setTimeout(c,n);const l={google:o(e),custom:s(t),classes:!1,context:i,timeout:n,active:()=>{c()},inactive:()=>{c()}};l.google||delete l.google,l.custom||delete l.custom,function(e=[],t){if(!e.length)return;const n=t.document.getElementById("external-fonts");if(n)n.textContent=a(e);else{const n=t.document.createElement("style");n.id="external-fonts",n.textContent=a(e),t.document.head.appendChild(n)}}(t,i),r.a.load(l)})):Promise.resolve()}},1385:function(e,t,n){"use strict";n.d(t,"f",(function(){return r})),n.d(t,"g",(function(){return o})),n.d(t,"a",(function(){return a})),n.d(t,"e",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return u}));var i=n(1442);const r={remBase:16,base:"1rem",ratio:1.125,lhRatio:1.375},o={light:.8,dark:.4,none:1,full:0,half:.5},s={cyan:"#06b7c2",cyanDarker:"#039dab",white:"#fff",backGray:"#e7eaea",backGrayLighter:"#f0f2f2",backGrayLighterMore:"#f9fafb",gray:"#899299",grayDarker:"#65717a",darkGray:"#363f46",black:"#000",softText:Object(i.d)(.9,"#000"),grayCyan:"#537c85",deepCyan:"#008394",cyanLighter:"#33c4cd",lightCyan:"#78d8de",lightGray:"#bfc4c8",deepGray:"#6f777c",green:"#00a15c",greenDarker:"#008a51",red:"#ff4538",redDarker:"#ee2c22",orange:"#ff8c00",orangeDarker:"#f47000",blue:"#0096ff",blueDarker:"#07f"},a={primary:{base:s.cyan,semifocused:s.cyanDarker,focused:s.deepCyan,semifocusedInverted:s.cyanLighter,focusedInverted:s.lightCyan,accented:s.grayCyan},text:{base:s.black,article:s.softText,ui:s.darkGray,greyedout:s.gray,inverted:s.white},ui:{base:s.grayDarker,control:s.gray,controlGreyedout:s.lightGray,controlFocused:s.deepGray},background:{base:s.backGray,block:s.white,component:s.white,accented:s.backGrayLighter,secondary:s.darkGray,semiaccented:s.backGrayLighterMore},shadow:{base:s.black},success:{base:s.green,focused:s.greenDarker},danger:{base:s.red,focused:s.redDarker},warning:{base:s.orange,focused:s.orangeDarker},info:{base:s.blue,focused:s.blueDarker}},c={bottom:10,base:100,baseFixedMenu:200,popover:1e3,fixedMenu:1e4,popup:1e5,notification:1e6},l={1:{height:32,sidePadding:10,wideSidePadding:25,fontSize:14,lineHeight:16,iconSize:24,iconMargin:7},2:{height:38,sidePadding:10,wideSidePadding:30,fontSize:16,lineHeight:18,iconSize:26,iconMargin:7},3:{height:42,sidePadding:12,wideSidePadding:35,fontSize:18,lineHeight:20,iconSize:28,iconMargin:7},4:{height:46,sidePadding:15,wideSidePadding:40,fontSize:20,lineHeight:22,iconSize:34,iconMargin:2}},d=4,u=2},1388:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));const i={"&:after":{content:'"."',display:"block",height:0,clear:"both",visibility:"hidden"}}},1389:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i=n(1372),r=n(1378),o=n(0),s=n.n(o),a=n(2),c=n.n(a),l=n(10),d=n(473),u={ellipsizer:{"max-height":0,overflow:"hidden","word-break":"break-word"}};function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const p={},f=new l.b;class g extends o.PureComponent{constructor(e){super(e),h(this,"componentWillUnmount",(()=>{const{local:e}=this.context;Object(d.c)({widgetId:e.id,styleSheetsDict:p,sheetsManager:f}),e.removeEventListener("resize",this.handleWindowResize),this.handleWindowResize.cancel()})),h(this,"applyCss",(()=>{const{local:e}=this.context,{maxLines:t}=this.props,n=parseInt(getComputedStyle(this._rootEl).lineHeight,10);e.jss.createRule({"max-height":t!==1/0&&t?n*t:"none"}).applyTo(this._rootEl),this.handleEllipsizerReady()})),h(this,"handleEllipsizerReady",(()=>{const{onReady:e}=this.props;e()})),h(this,"handleWindowResize",(()=>{this.applyCss()})),this.handleEllipsizerReady=Object(r.a)(this.handleEllipsizerReady),this.handleWindowResize=Object(i.a)(this.handleWindowResize,300)}componentWillMount(){const{local:e}=this.context;Object(d.b)({jss:e.jss,stylesSrc:u,styleSheetsDict:p,widgetId:e.id,sheetsManager:f})}componentDidMount(){const{local:e}=this.context;e.addEventListener("resize",this.handleWindowResize),this.applyCss()}componentDidUpdate(){this.applyCss()}render(){const{local:e}=this.context,{text:t,children:n}=this.props,i=p[e.id].sheet,r=n||t;return s.a.createElement("div",{ref:e=>{this._rootEl=e},className:i.classes.ellipsizer},r)}}h(g,"propTypes",{maxLines:c.a.number,text:c.a.string,children:c.a.node,onReady:c.a.func}),h(g,"defaultProps",{maxLines:1/0,text:"",children:null,onReady:()=>{}}),h(g,"contextTypes",{local:c.a.object.isRequired})},1395:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i=n(0),r=n.n(i),o=n(2),s=n.n(o),a=n(10),c=n(1369),l=n.n(c),d=n(473),u={row:{display:"flex"},directionRow:{"flex-direction":"row"},directionRowReverse:{"flex-direction":"row-reverse"},directionColumn:{"flex-direction":"column"},directionColumnReverse:{"flex-direction":"column-reverse"},wrap:{"flex-wrap":"wrap"},noWrap:{"flex-wrap":"nowrap"},justifyStart:{"justify-content":"start"},justifyEnd:{"justify-content":"end"},justifyCenter:{"justify-content":"center"},justifyBetween:{"justify-content":"between"},justifyAround:{"justify-content":"around"},alignStart:{"align-items":"start"},alignEnd:{"align-items":"end"},alignCenter:{"align-items":"center"},alignStretch:{"align-items":"stretch"},alignBaseline:{"align-items":"baseline"}};function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const p={},f=new a.b;class g extends i.PureComponent{constructor(...e){super(...e),h(this,"componentWillUnmount",(()=>{const{local:e}=this.context;Object(d.c)({widgetId:e.id,styleSheetsDict:p,sheetsManager:f})}))}componentWillMount(){const{local:e}=this.context;Object(d.b)({jss:e.jss,stylesSrc:u,styleSheetsDict:p,widgetId:e.id,sheetsManager:f})}render(){const{local:e}=this.context,{direction:t,nowrap:n,justify:i,align:o,width:s,height:a,children:c}=this.props,{classes:d}=p[e.id].sheet,u=n?d.noWrap:d.wrap,h=l()(d.row,d[{row:"directionRow","row-reverse":"directionRowReverse",column:"directionColumn","column-reverse":"directionColumnReverse"}[t]],u,d[{start:"justifyStart",end:"justifyEnd",center:"justifyCenter",between:"justifyBetween",around:"justifyAround"}[i]],d[{start:"alignStart",end:"alignEnd",center:"alignCenter",stretch:"alignStretch",baseline:"alignBaseline"}[o]]);return r.a.createElement("div",{className:h,style:{width:s,height:a}},c)}}h(g,"propTypes",{direction:s.a.oneOf(["row","row-reverse","column","column-reverse"]),nowrap:s.a.bool,justify:s.a.oneOf(["start","end","center","between","around"]),align:s.a.oneOf(["start","end","center","stretch","baseline"]),width:s.a.string,height:s.a.string,children:s.a.node.isRequired}),h(g,"contextTypes",{local:s.a.object.isRequired}),h(g,"defaultProps",{direction:"row",nowrap:!1,justify:"start",align:"start",width:"auto",height:"auto"})},1396:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var i=n(0),r=n.n(i),o=n(2),s=n.n(o),a=n(10),c=n(1369),l=n.n(c),d=n(473);const u={},h={},p={};for(let e=0;e<=24;e++)u[`col${e}`]={width:100/24*e+"%"},h[`order${e}`]={order:e},p[`flexGrow${e}`]={"flex-grow":e};var f={rowItem:{display:"flex"},...u,...h,...p};function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const m={},b=new a.b;class y extends i.PureComponent{constructor(...e){super(...e),g(this,"componentWillUnmount",(()=>{const{local:e}=this.context;Object(d.c)({widgetId:e.id,styleSheetsDict:m,sheetsManager:b})}))}componentWillMount(){const{local:e}=this.context;Object(d.b)({jss:e.jss,stylesSrc:f,styleSheetsDict:m,widgetId:e.id,sheetsManager:b})}render(){const{local:e}=this.context,{cols:t,order:n,flexGrow:i,children:o}=this.props,{classes:s}=m[e.id].sheet,a=l()(s.rowItem,s[`col${t}`],s[`order${n}`],s[`flexGrow${i}`]);return r.a.createElement("div",{className:a},o)}}g(y,"propTypes",{cols:s.a.number,order:s.a.number,flexGrow:s.a.number,children:s.a.node}),g(y,"contextTypes",{local:s.a.object.isRequired}),g(y,"defaultProps",{cols:null,order:null,flexGrow:null,children:null})},1397:function(e,t,n){"use strict";n.d(t,"b",(function(){return b})),n.d(t,"g",(function(){return y})),n.d(t,"j",(function(){return v})),n.d(t,"c",(function(){return w})),n.d(t,"h",(function(){return I})),n.d(t,"i",(function(){return C})),n.d(t,"a",(function(){return O})),n.d(t,"f",(function(){return S})),n.d(t,"e",(function(){return R})),n.d(t,"d",(function(){return j})),n.d(t,"k",(function(){return x})),n.d(t,"w",(function(){return T})),n.d(t,"l",(function(){return W})),n.d(t,"n",(function(){return L})),n.d(t,"u",(function(){return D})),n.d(t,"x",(function(){return $})),n.d(t,"s",(function(){return N})),n.d(t,"t",(function(){return B})),n.d(t,"p",(function(){return V})),n.d(t,"m",(function(){return q})),n.d(t,"r",(function(){return F})),n.d(t,"v",(function(){return U})),n.d(t,"y",(function(){return H})),n.d(t,"q",(function(){return Q})),n.d(t,"o",(function(){return K}));n(435);var i=n(1372),r=n(1165),o=n(439),s=n.n(o),a=n(1422),c=n(1489),l=n(1382),d=n(1480),u=n(1491),h=n(1421),p=n(1438),f=n(1167);var g=n(1492),m=n(1162);const b="ADD_RECS",y="REMOVE_RECS",v="SET_SLOTS_IN_INSTANCE",w="APPEND_SLOTS_IN_INSTANCE",I="REMOVE_SLOT_IN_INSTANCE_BY_REC_ID",C="SET_REC_IN_INSTANCE_SLOT",O="ADD_BG_REC_IN_INSTANCE_SLOT",S="REMOVE_BG_REC_IN_INSTANCE_SLOT",R="REMOVE_BG_RECS_IN_INSTANCE_SLOT",j="MARK_SLOT_FOR_SWAPPING_REC",x="UPDATE_REC",E=["video_thumbnail","video_custom"];function k(e){return s()(`${e}@${Math.random()}`,m.B)}function T(e){return{...e,filters:e.filters.filter((e=>!E.includes(e)))}}function P({grid:e,articleId:t,instanceId:n,additionalParams:i={},vastErrorCount:r,swappingRecCtx:o}){function s({slot:e,articleId:t,instanceId:n,additionalParams:i,vastErrorCount:r,swappingRecCtx:o}){var s;const a={...e,recCtx:o,type:"slot",slotId:k(n),...i},c=r>1?T(a):a;return null!==(s=c.filters)&&void 0!==s&&s.includes("inline_article")?t?(c.articleId=t,c):null:c}switch(e.type){case"simple":return e.simple.schema.reduce(((e,r)=>{const a=s({slot:r,articleId:t,instanceId:n,additionalParams:i,swappingRecCtx:o});return a&&e.push(a),e}),[]);case"composite":return e.composite.schema.reduce(((e,a)=>{switch(a.type){case"slot":const c=s({slot:a.slot,articleId:t,instanceId:n,additionalParams:{...i,colsWidth:a.colsWidth,rowsHeight:a.rowsHeight,media:a.media},vastErrorCount:r,swappingRecCtx:o});c&&e.push(c);break;case"grid":e.push({...a,slotId:k(n),slots:P({grid:a.grid,articleId:t,instanceId:n,additionalParams:{...i,colsWidth:a.colsWidth,rowsHeight:a.rowsHeight,media:a.media},vastErrorCount:r,swappingRecCtx:o})})}return e}),[]);default:return[]}}function W({payload:{grid:e,fallbackPayloads:t=[]},articleId:n,instanceId:i,additionalParams:r,vastErrorCount:o,swappingRecCtx:s}){return[P({grid:e,articleId:n,instanceId:i,additionalParams:r,vastErrorCount:o,swappingRecCtx:s}),...t.map((({grid:e})=>P({grid:e,articleId:n,instanceId:i,additionalParams:r,vastErrorCount:o,swappingRecCtx:s})))]}function _({id:e,rec:t}){return{type:x,id:e,rec:t}}function L({id:e,recCtx:t,cfg:n}){return i=>{Object(c.b)({cfg:n}).then((({vastCfg:n})=>{switch(n.playertype){case"vpaid":i(_({id:e,rec:{vastCfg:{...n,pending:!1}}}));break;case"regular":a.a.Vast.getVastAdampter({vastAdapterPayload:{recCtx:t,mediafile:n.mediafile,clickthrough:n.clickthrough}}).then((({href:t,imgSeq:r})=>{i(_({id:e,rec:{href:t,video:{vast20:{imgSeq:r}},vastCfg:{...n,pending:!1}}}))})).catch((t=>{console.error("fetchVast20 regular reject:",t),i(_({id:e,rec:{error:{errorType:"vast_adapter_fetch_failed",errorGroup:"video"}}}))}))}})).catch((t=>{console.error("fetchVast20 reject:",t),i(_({id:e,rec:{error:{...t,errorGroup:"video"}}}))}))}}function A({respRecsGroup:e,dispatch:t,getState:n}){return e.map((e=>e.tiles.map((i=>i.map((i=>function({rec:e,recGroupCtx:t,dispatch:n,getState:i}){var r,o,s,a;const{vastCfgs:l}=i(),d={...e,id:Object(m.b)(e.recCtx),recGroupCtx:t,title:null===(r=e.title)||void 0===r?void 0:r.trim(),description:null===(o=e.description)||void 0===o?void 0:o.trim(),disclaimer:null===(s=e.disclaimer)||void 0===s?void 0:s.trim()};if(null!==(a=e.video)&&void 0!==a&&a.vast20){const t=l[e.video.vast20.id];if(t)return{...d,vastCfg:t};if(!e.video.vast20.src&&!e.video.vast20.raw)return{...d,error:{errorType:"no_vast_cfg",errorGroup:"video"}};if(e.video.vast20.raw){const t=Object(c.a)(e.video.vast20.raw);return t?{...d,vastCfg:t}:{...d,error:{errorType:"vast_parse_failed",errorGroup:"video"}}}if(e.video.vast20.src)return e.video.vast20.loadInViewport||n(L({id:d.id,recCtx:e.recCtx,cfg:{src:e.video.vast20.src,id:e.video.vast20.id,timeout:4e3}})),{...d,vastCfg:{pending:!0}}}return d}({rec:i,recGroupCtx:e.recGroupCtx,dispatch:t,getState:n})))))))}function M({slots:e,instanceId:t}){return{type:v,slots:e,id:t}}function D({recId:e,instanceId:t,removedBy:n="widget"}){return{type:I,recId:e,id:t,removedBy:n}}function z({resp:e,dispatch:t,getState:n,seed:i}){const{seed:r="",recsGroup:o}=e;i!==r&&t(Object(d.b)(r));const s=A({respRecsGroup:o,dispatch:t,getState:n});return s.length&&t(function(e){return{type:b,recsGroup:e}}(s)),s}function $({id:e,recId:t,slotId:n}){return{type:C,id:e,recId:t,slotId:n}}function N({id:e,recId:t,slotId:n}){return{type:S,id:e,recId:t,slotId:n}}function B({id:e,slotId:t}){return{type:R,id:e,slotId:t}}function V({resp:e,instances:t,widgetRecsSchemas:n,dispatch:i,getState:o}){const{seed:s}=o(),a=z({resp:e,dispatch:i,getState:o,seed:s});e.debug&&(e.debug.time=new Date,i(Object(u.b)(e.debug))),a.forEach(((e,s)=>{var a;const{widgetConfigs:c,widgetInstances:d,recs:u}=o(),b=t[s],y=(null===(a=n[s])||void 0===a?void 0:a.isInitialFetch)||!1;if(b)if(y){let t=null;if(!d[b])return;const{cfgId:a}=d[b],{widgetMaxInstancesCount:u}=o(),{visibleInstancesUsed:y=[],maxVisibleInstances:v}=u[a]||{};if(d[b]&&Object(l.d)({id:"fetch recs",instanceId:b,cfgId:a}),v&&y.length&&!y.includes(b)&&y.length>v)return i(Object(h.z)({id:b,status:"complete"})),void i(Object(h.x)({id:b}));if(v&&i(Object(p.h)({cfgId:a,id:b})),e.forEach(((e,o)=>{if(!e.length||null!==t)return;t=o;const l=function({cfg:e,payloadIndex:t=0}){if(0===t)return e.payload;const n=e.payload.fallbackPayloads?e.payload.fallbackPayloads[t-1]:{};return Object(f.a)(e.payload,n)}({cfg:c[a],payloadIndex:t});i(Object(h.A)({id:b,index:t})),i(Object(h.p)({id:b,cfg:l})),e.forEach((e=>{e.customRec&&window.loadCustomRec(e.customRec.name)}));const u=n[s].tiles[o],p=Object(m.A)(u,(t=>{var n;const i=(null===(n=Object(r.a)(e,{slotId:t.slotId}))||void 0===n?void 0:n.id)||null;return{...t,recCtx:void 0,recId:i}}));d[b]&&i(M({slots:p,instanceId:b}))})),null===t){const e=Object(m.A)(n[s].tiles[0],(e=>({...e,recCtx:void 0,recId:null})));i(M({slots:e,instanceId:b}))}Object(g.a)(i,o).then((()=>{i(Object(h.z)({id:b,status:"complete"}))}))}else e[0].forEach((e=>{if(d[b]){if(i($({id:b,recId:e.id,slotId:e.slotId})),!e.customRec)return;window.loadCustomRec(e.customRec.name)}}));else e[0].forEach((e=>{if(Object(m.i)(e)){const{slot:t,instanceId:n}=Object(m.x)({widgetInstances:d,recs:u});t&&n&&i(function({id:e,recId:t,slotId:n}){return{type:O,id:e,recId:t,slotId:n}}({id:n,recId:e.id,slotId:t.slotId}))}e.customRec&&window.loadCustomRec(e.customRec.name)}))}))}function q({instances:e=[],extParams:t=[],fetchPromise:n=null}){return(i,r)=>{const{widgetConfigs:o,widgetInstances:s,url:c,seed:d,articleId:u,subPublisher:p,luid:f,vastErrorCount:g}=r(),m=e.reduce(((e,t)=>{var n,r,a;const c=s[t];Object(l.e)({id:"fetch recs",instanceId:t,cfgId:c.cfgId});const d=W({payload:o[c.cfgId].payload,articleId:u,instanceId:t,additionalParams:c.additionalParams,vastErrorCount:g});return!d.length||d.every((e=>!e.length))?(i(Object(h.z)({id:t,status:"complete"})),e):(e.push({widgetCfgId:c.cfgId,isForm:c.isForm,tiles:d,doNotRepeatAds:(null===(n=o[c.cfgId])||void 0===n||null===(r=n.payload)||void 0===r||null===(a=r.recsLackBehaviour)||void 0===a?void 0:a.disableClonning)||void 0,isInitialFetch:!0}),e)}),[]);m.length&&(n||a.a.Recs.getRecs({recsPayload:{url:c||window.parent.location.href,referer:window.parent.location.href,recsSchemaGroup:{seed:d,widgetRecsSchemas:m},extData:t.length?t:void 0,subPublisher:p,luid:f}})).then((t=>{V({resp:t,instances:e,widgetRecsSchemas:m,dispatch:i,getState:r})})).catch((t=>{console.log(t),e.forEach((e=>{i(Object(h.z)({id:e,status:"complete"}))}))}))}}function F({id:e,slotId:t}){return{type:j,id:e,slotId:t}}function U(){return(e,t)=>{const{recs:n,widgetInstances:i}=t(),r=Object.values(n).reduce(((e,t)=>(Object(m.h)({id:t.id,widgetInstances:i})||e.push(t.id),e)),[]);r.length&&e({type:y,recIds:r})}}function H({id:e,instanceId:t,removeAnyway:n}){return(i,r)=>{var o;const s=Object(m.l)((null===(o=r().widgetInstances[t])||void 0===o?void 0:o.slots)||[],{recId:e});if(!s)return;const{slotId:a}=s;i(F({id:t,slotId:a})),Object(g.a)(i,r).then((()=>{var o;Object(m.l)((null===(o=r().widgetInstances[t])||void 0===o?void 0:o.slots)||[],{slotId:a})&&(n&&i(D({recId:e,instanceId:t,removedBy:"widget"})),i(U()))}))}}const G=Object(i.a)((function({dispatch:e,getState:t,instanceId:n}){const{widgetInstances:i}=t();i[n]&&Object(g.a)(e,t).then((()=>{e(Object(h.s)(n))}))}),5e3);function Q({instanceId:e,cfgId:t,slotId:n}){return(i,r)=>{const{widgetInstances:o,widgetConfigs:s,articleId:a,vastErrorCount:c}=r(),l=o[e],d=s[t];if(!l||!d)return;const u=W({payload:d.payload,articleId:a,instanceId:e,additionalParams:l.additionalParams,vastErrorCount:c}),{payloadIndex:p=0}=l,f=u[p];if(!f||!f.length)return;Object(m.m)(Object(m.q)({instance:l,articleId:a})).length<=f.length&&i(function({slotId:e,slots:t,instanceId:n}){return{type:w,slotId:e,slots:t,id:n}}({slotId:n,slots:f,instanceId:e})),i(Object(h.t)(e)),G({dispatch:i,getState:r,instanceId:e})}}function K({id:e,inNewTab:t,cfgId:n}){return(i,r)=>{const{recs:o,widgetConfigs:s}=r(),a=o[e],{payload:c}=s[n]||{};a&&c&&(t?Object(m.C)(Object(m.w)(a.href,a.type,c)):window.global.location.href=Object(m.w)(a.href,a.type,c))}}},1414:function(e,t,n){"use strict";var i=n(0);t.a=e=>{const t=Object(i.useRef)(!0);let n;t.current&&(n=e()||(()=>{})),t.current=!1,Object(i.useEffect)((()=>n),[])}},1421:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return g})),n.d(t,"i",(function(){return m})),n.d(t,"c",(function(){return b})),n.d(t,"g",(function(){return y})),n.d(t,"h",(function(){return v})),n.d(t,"d",(function(){return w})),n.d(t,"f",(function(){return I})),n.d(t,"e",(function(){return C})),n.d(t,"l",(function(){return O})),n.d(t,"m",(function(){return S})),n.d(t,"j",(function(){return R})),n.d(t,"k",(function(){return j})),n.d(t,"n",(function(){return x})),n.d(t,"o",(function(){return E})),n.d(t,"q",(function(){return k})),n.d(t,"w",(function(){return T})),n.d(t,"p",(function(){return P})),n.d(t,"u",(function(){return W})),n.d(t,"v",(function(){return _})),n.d(t,"r",(function(){return L})),n.d(t,"t",(function(){return A})),n.d(t,"s",(function(){return M})),n.d(t,"z",(function(){return D})),n.d(t,"A",(function(){return z})),n.d(t,"x",(function(){return $})),n.d(t,"y",(function(){return N}));var i=n(1496),r=n(1446),o=n(1165),s=(n(1206),n(1379));function a(e,t){function n(e){const{protocol:t}=new URL(e);return"http:"===t||"https:"===t}if("img_overlay"!==e)return;if("IMG"===t.tagName&&n(t.src))return t.src;const i=t.getElementsByTagName("img")[0];return i&&n(i.src)?i.src:void 0}function c({position:e="before",cfg:t,multiInstance:n,isV6Compat:i}){var r;const o=function({cfgId:e,v6CompatCfgId:t,isV6Compat:n}){const i=[];return i.getV7AnchorCandidates=function(){const t=document.querySelectorAll.apply(window.global.document,[[`.js-relap-anchor[data-relap-id="${e}"]`,`.js-relap-form-anchor[data-relap-id="${e}"]`]]);for(let e=0;e<t.length;e++)this.push({anchorEl:t[e],version:"v7"})},i.getV6AnchorCandidate=function(){const e=window.global.document.getElementById(t);e&&this.push({anchorEl:e,version:"v6"})},i.getV6MultiAnchorCandidates=function(){const e=window.global.document.querySelectorAll(`.js-relap-multi-anchor[data-id="${t}"]`);for(let t=0;t<e.length;t++)this.push({anchorEl:e[t],version:"v6"})},i.getV7AnchorCandidates(),n&&(i.getV6AnchorCandidate(),i.getV6MultiAnchorCandidates()),i.slice()}({cfgId:t.id,v6CompatCfgId:(null===(r=t.payload.v6Compat)||void 0===r?void 0:r.widgetCfgId)||"",isV6Compat:i});return(n?o:o.slice(0,1)).map((({anchorEl:n,version:i})=>({anchorEl:n,position:"v7"===i?e:"before",cfgId:t.id,additionalParams:{imgOverlaySrc:a(e,n.parentElement)}})))}function l(e,t){const{payload:{positioning:n}}=e;switch(n.positionBy){case"byAnchorEl":return c({position:(n.byAnchorEl||{}).position,cfg:e,multiInstance:n.multiInstance,isV6Compat:t});case"byAnchorCss":return function({selector:e,position:t="before",cfg:n,multiInstance:i}){let r=[];if(i)r=window.global.document.querySelectorAll(e);else{const t=window.global.document.querySelector(e);t&&r.push(t)}return[].map.call(r,(e=>({anchorEl:e,position:t,cfgId:n.id,additionalParams:{imgOverlaySrc:a(t,e)}})))}({position:n.byAnchorCss.position,selector:n.byAnchorCss.selector,cfg:e,multiInstance:n.multiInstance});case"byArticleCss":return function({arcticleSelector:e,paragraphSelector:t,paragraphNum:n,forbiddenElemSelector:i,position:r="before",cfg:o,multiInstance:c}){let l=[];if(c)l=window.global.document.querySelectorAll(e),i&&(l=[].filter.call(l,(e=>!e.querySelector(i))));else{let t=window.global.document.querySelector(e);i&&t.querySelector(i)&&(t=null),t&&l.push(t)}return[].map.call(l,(e=>{const i=e.querySelectorAll(t);if(n>i.length+1)return Object(s.a)(`No paragraph found for id: ${o.id}`),{};if(n===i.length+1&&"img_overlay"!==r)return{anchorEl:i[i.length-1],position:"after",cfgId:o.id};const c=i[n-1];return c?{anchorEl:c,position:"img_overlay"===r?r:"before",cfgId:o.id,additionalParams:{imgOverlaySrc:a(r,c)}}:(Object(s.a)(`No paragraph found for id: ${o.id}`),{})}))}({arcticleSelector:n.byArticleCss.arcticleSelector,paragraphSelector:n.byArticleCss.paragraphSelector,paragraphNum:n.byArticleCss.paragraphNum,forbiddenElemSelector:n.byArticleCss.forbiddenElemSelector,position:n.byArticleCss.position,cfg:e,multiInstance:n.multiInstance});default:return[]}}var d=n(1382),u=n(1488),h=n(1397),p=n(1438);const f="ADD_WIDGET_CFG",g="ADD_WIDGET_INSTANCE",m="REGISTER_WIDGET_INSTANCE",b="ADD_WIDGET_INSTANCE_CFG",y="MARK_WIDGET_INSTANCE_READY",v="MARK_WIDGET_INSTANCE_VISIBLE",w="MARK_WIDGET_INSTANCE_HIDDEN",I="MARK_WIDGET_INSTANCE_LOAD_MORE_IN_PROGRESS",C="MARK_WIDGET_INSTANCE_LOAD_MORE_FINISHED",O="SET_WIDGET_INSTANCE_INITIAL_FETCH_STATUS",S="SET_WIDGET_INSTANCE_PAYLOAD_INDEX",R="REGISTER_WIDGET_REMOVE_CALLBACK",j="REMOVE_WIDGET_INSTANCE";function x(e){return{type:f,cfg:e}}function E({cfgId:e,anchorEl:t,position:n="before",grouped:i=!1,additionalParams:r,isForm:o,onLoad:s=(()=>{}),onReady:a=(()=>{})}){return(c,l)=>{const{widgetConfigs:d}=l();if(!d[e])return;const{widgetMaxInstancesCount:h,widgetInstances:p}=l(),{maxInstances:f}=h[e]||{};if(f){if(Object.keys(p).filter((t=>{var n;return e===(null===(n=p[t])||void 0===n?void 0:n.cfgId)})).length>=f)return}const m=`${Date.now()}_${e}`;c({type:g,cfgId:e,id:m,positioning:{anchorEl:t,position:n},isForm:o,additionalParams:r,onLoad:s,onReady:a}),c(Object(u.d)(m)),i||c(Object(u.e)())}}function k({cfgId:e,withWindowMinMaxWidth:t=!1,onLoad:n=(()=>{}),onReady:s=(()=>{})}={}){return(a,c)=>{const{widgetConfigs:h,widgetInstances:p,isV6Compat:f}=c();let g=e?[e]:Object.keys(h).filter((e=>!h[e].individualInstall));t&&(g=g.filter((e=>{var t,n,r,o,s,a;const c=window.global.innerWidth,l=null===(t=h[e])||void 0===t||null===(n=t.payload)||void 0===n||null===(r=n.positioning)||void 0===r?void 0:r.windowMaxWidth,d=null===(o=h[e])||void 0===o||null===(s=o.payload)||void 0===s||null===(a=s.positioning)||void 0===a?void 0:a.windowMinWidth;return!(Object(i.a)(l)&&c>l||Object(i.a)(d)&&c<d)})));const m=Object(r.a)(g.map((e=>{Object(d.c)({id:"find place",groupId:`widget ${e}`});return l(h[e],f).filter((e=>e.anchorEl)).filter((({anchorEl:t,position:n})=>!(function({widgetInstances:e,anchorEl:t,position:n,cfgId:i}){const r=Object.values(e).filter((e=>e.cfgId===i));return Object(o.a)(r,{positioning:{anchorEl:t,position:n}})}({widgetInstances:p,anchorEl:t,position:n,cfgId:e})||t.dataset.relapMountedWidgetsCfgs&&t.dataset.relapMountedWidgetsCfgs.includes(e))))})));if(!m.length)return;const b=[],y=[];m.forEach((({anchorEl:e,position:t,cfgId:n,additionalParams:i={}})=>{let r,o;Object(d.b)({id:"find place",groupId:`widget ${n}`}),b.push(new Promise((e=>{r=e}))),y.push(new Promise((e=>{o=e})));const s=!!Array(...e.classList).includes("js-relap-form-anchor")||void 0;e.dataset.relapMountedWidgetsCfgs?e.dataset.relapMountedWidgetsCfgs+=` || ${n}`:e.dataset.relapMountedWidgetsCfgs=n,a(E({cfgId:n,anchorEl:e,position:t,grouped:!0,additionalParams:i,isForm:s,onLoad:r,onReady:o}))})),Promise.all(b).then(n),Promise.all(y).then(s),a(Object(u.e)())}}function T({el:e,local:t,id:n}){return(i,r)=>{const{widgetInstances:o}=r();o[n]&&!o[n].el&&i({type:m,el:e,local:t,id:n})}}function P({id:e,cfg:t}){return(n,i)=>{const{widgetInstances:r}=i();r[e]&&n({type:b,id:e,cfg:t})}}function W(e){return(t,n)=>{var i;const{widgetInstances:r}=n();null!==(i=r[e])&&void 0!==i&&i.ready||t({type:y,id:e})}}function _(e){return(t,n)=>{var i;const{widgetInstances:r}=n();null!==(i=r[e])&&void 0!==i&&i.visible||t({type:v,id:e})}}function L(e){return(t,n)=>{var i;const{widgetInstances:r}=n();null!==(i=r[e])&&void 0!==i&&i.visible&&t({type:w,id:e})}}function A(e){return{type:I,id:e}}function M(e){return{type:C,id:e}}function D({id:e,status:t}){return{type:O,id:e,status:t}}function z({id:e,index:t}){return(n,i)=>{const{widgetInstances:r}=i();r[e]&&n({type:S,id:e,index:t})}}function $({id:e,onRemove:t=(()=>{})}){return(n,i)=>{const{widgetInstances:r,widgetMaxInstancesCount:o}=i();if(!r[e]||!r[e].el)return;const{cfgId:s}=r[e],{maxInstances:a,maxVisibleInstances:c}=o[s]||{};n({type:R,id:e,onRemove:t}),c&&n(Object(p.e)({cfgId:s,id:e})),a&&n(Object(p.f)({cfgId:s,count:a-1})),n({type:j,id:e}),n(Object(h.v)())}}function N({cfgId:e,onRemove:t=(()=>{})}){return(n,i)=>{const{widgetInstances:r}=i(),o=[];Object.values(r).filter((t=>t.cfgId===e)).forEach((({id:e})=>{let t;o.push(new Promise((e=>{t=e}))),n($({id:e,onRemove:t}))})),Promise.all(o).then(t)}}},1422:function(e,t,n){"use strict";n.d(t,"b",(function(){return a}));n(435),n(1207),n(1206);var i=n(1533),r=n.n(i),o=n(1534),s=n.n(o);n(1162);const a=()=>{const e="https://relap.io/api/v7/";return e},c=a(),l={headers:{"Content-Type":"application/json"},credentials:"include",mode:"cors",cache:"default"};function d(e){function t(e){return e.reduce(((e,n)=>{switch(n.type){case"slot":e.push({...n,type:void 0,recId:void 0,swapping:void 0,colsWidth:void 0,rowsHeight:void 0,media:void 0});break;case"grid":e.push(...t(n.slots))}return e}),[])}return{recsPayload:{...e.recsPayload,recsSchemaGroup:{...e.recsPayload.recsSchemaGroup,widgetRecsSchemas:e.recsPayload.recsSchemaGroup.widgetRecsSchemas.map((function(e){return{...e,tiles:e.tiles.map((e=>t(e)))}}))}}}}const u={Widgets:{init:e=>new Promise(((t,n)=>{const i=new URL(`${c}active_widget_cfgs`);i.search=new URLSearchParams(s()(e)),fetch(i,{...l,method:"GET"}).then((e=>{if(e.ok)return e.json();throw new Error(e.statusText)})).then((e=>{t(r()(e))})).catch((e=>{console.error("openApi fetch reject: ",e),n(e)}))}))},Recs:{getRecs:e=>new Promise(((t,n)=>{const i=new URL(`${c}recs`),o=s()(d(e)),a=JSON.stringify(o.recs_payload);fetch(i,{...l,method:"POST",body:a}).then((e=>{if(e.ok)return e.json();throw new Error(e.statusText)})).then((e=>{t(r()(e))})).catch((e=>{n(e)}))}))},Vast:{getVastAdampter:e=>new Promise(((t,n)=>{const i=new URL(`${c}vast_adapter`),o=s()(e),a=JSON.stringify(o.vast_adapter_payload);fetch(i,{...l,method:"POST",body:a}).then((e=>{if(e.ok)return e.json();throw new Error(e.statusText)})).then((e=>{t(r()(e))})).catch((e=>{n(e)}))}))},Stat:{sendStat:e=>new Promise(((t,n)=>{const i=new URL(`${c}stat`),o=s()(e),a=JSON.stringify(o.stat_payload);fetch(i,{...l,method:"POST",body:a}).then((e=>{if(e.ok)return e.json();throw new Error(e.statusText)})).then((e=>{t(r()(e))})).catch((e=>{n(e)}))}))}};t.a=u},1423:function(e,t,n){"use strict";function i({scope:e,funcName:t,args:n,onSuccess:i=(()=>{}),onError:r=(()=>{}),onComplete:o=(()=>{}),interval:s=500,timeout:a=6e3}){let c,l=!1;const d=()=>{if(e[t]&&"function"==typeof e[t]&&(clearInterval(c),!l)){l=!0;try{e[t].apply(this,n),i(),o()}catch(e){console.log(e)}}};d(),l||(c=setInterval(d,s)),setTimeout((()=>{if(!l){try{r(),o()}catch(e){console.log(e)}clearInterval(c)}}),a)}n.d(t,"a",(function(){return i}))},1424:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return a}));var i=n(1442),r=n(1385);function o(e){return`${Object(i.c)(Object(i.b)(e,r.f.base,r.f.ratio))}rem`}function s(e){return Object(i.c)(Object(i.b)(e,r.f.base,r.f.ratio))*r.f.lhRatio+"rem"}function a(e=1){return Object(i.c)(Object(i.b)(0,r.f.base,r.f.ratio))*r.f.lhRatio*e+"rem"}},1435:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var i=n(1372),r=n(0),o=n.n(r),s=n(2),a=n.n(s),c=n(10),l=n(1369),d=n.n(l),u=n(473),h={root:{width:"100%",overflow:"hidden"},content:{position:"relative","&$contentBlock":{display:"block",width:"100%"},"&$contentInline":{display:"inline-block",width:"auto"}},contentBlock:{},contentInline:{},contentObserver:{position:"absolute",top:0,left:0,width:0,height:0,"max-width":"100%","max-height":"100%","min-width":"100%","min-height":"100%","pointer-events":"none","z-index":-1,overflow:"hidden"}};function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const f={},g=new c.b;class m extends r.PureComponent{constructor(e){super(e),p(this,"componentWillUnmount",(()=>{var e,t;const{local:n}=this.context;Object(u.c)({widgetId:n.id,styleSheetsDict:f,sheetsManager:g}),null===(e=this._contentObserverEl)||void 0===e||null===(t=e.contentWindow)||void 0===t||t.removeEventListener("resize",this.handleContentResize),this.handleContentResize.cancel()})),p(this,"updateRootScale",(e=>{const{percent:t,onScale:n}=this.props,i=100!==t,r=this._rootEl,o=this._contentWrapperEl,s=this._contentEl,a=s.offsetWidth,c=s.offsetHeight;if(!e&&this._prevRootWidth===a&&this._prevRootHeight===c)return;const l=(a*t/100-a)/2,d=(c*t/100-c)/2,u=a*t/100,h=c*t/100;r.style.width=i?`${u}px`:"",r.style.height=i?`${h}px`:"",o.style.transform=i?`scale(${t/100})`:"",o.style.position=i?"absolute":"",o.style.left=i?`${l}px`:"",o.style.top=i?`${d}px`:"",o.style.width=i?`${a}px`:"",this._prevRootWidth=a,this._prevRootHeight=c,n({scaledWidth:u,scaledHeight:h,contentWidth:a,contentHeight:c})})),p(this,"handleContentResize",(()=>{this.updateRootScale()})),p(this,"handleContentObserverLoad",(()=>{var e,t,n;const i=this._contentObserverEl;!i||null!==(e=i.contentWindow)&&void 0!==e&&e.initialized||"complete"!==(null===(t=i.contentWindow)||void 0===t||null===(n=t.document)||void 0===n?void 0:n.readyState)||(i.contentWindow.addEventListener("resize",this.handleContentResize),this.handleContentResize(),i.contentWindow.initialized=!0)})),this.handleContentResize=Object(i.a)(this.handleContentResize,200)}componentWillMount(){const{local:e}=this.context;Object(u.b)({jss:e.jss,stylesSrc:h,styleSheetsDict:f,widgetId:e.id,sheetsManager:g})}componentDidMount(){this.handleContentObserverLoad(),this.updateRootScale()}componentDidUpdate(e){const{percent:t}=this.props;this.updateRootScale(e.percent!==t)}render(){const{local:e}=this.context,{display:t,updateOnContentResize:n,children:i}=this.props,{classes:r}=f[e.id].sheet,s=d()(r.content,{[r.contentBlock]:"block"===t,[r.contentInline]:"inline"===t}),a=n?o.a.createElement("iframe",{ref:e=>{this._contentObserverEl=e},title:"contentObserver",className:r.contentObserver,frameBorder:"no",scrolling:"no",src:"about:blank",srcDoc:" ",onLoad:this.handleContentObserverLoad}):null;return o.a.createElement("div",{ref:e=>{this._rootEl=e},className:r.root},o.a.createElement("div",{ref:e=>{this._contentWrapperEl=e}},o.a.createElement("div",{ref:e=>{this._contentEl=e},className:s},i,a)))}}p(m,"propTypes",{percent:a.a.number,display:a.a.oneOf(["block","inline"]),updateOnContentResize:a.a.bool,children:a.a.node.isRequired,onScale:a.a.func}),p(m,"contextTypes",{local:a.a.object.isRequired}),p(m,"defaultProps",{percent:100,display:"block",updateOnContentResize:!1,onScale:()=>{}})},1436:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return h})),n.d(t,"j",(function(){return g})),n.d(t,"k",(function(){return m})),n.d(t,"i",(function(){return b})),n.d(t,"p",(function(){return y})),n.d(t,"t",(function(){return v})),n.d(t,"u",(function(){return w})),n.d(t,"q",(function(){return I})),n.d(t,"n",(function(){return C})),n.d(t,"s",(function(){return O})),n.d(t,"m",(function(){return S})),n.d(t,"l",(function(){return R})),n.d(t,"r",(function(){return j})),n.d(t,"o",(function(){return x})),n.d(t,"e",(function(){return E})),n.d(t,"c",(function(){return k})),n.d(t,"f",(function(){return T})),n.d(t,"g",(function(){return P})),n.d(t,"h",(function(){return W})),n.d(t,"d",(function(){return _}));var i=n(1165),r=n(1978),o=n(1392),s=n(1422),a=n(1162),c=n(1485),l=n(1486);const d={referer:window.global.location.href,sessionId:localStorage.relapSessionId},u="ADD_STAT_EVENT_TO_QUEUE",h="EMPTY_STAT_EVENT_QUEUE";const p=Object(o.a)(((e,t,n)=>{const{sessionSecret:i,statEvents:r}=n();r.length?(s.a.Stat.sendStat({statPayload:{sessionSecret:i,events:r}}).then((()=>{e()})).catch((t=>{console.error("processStatEventQueue reject:",t),e()})),t({type:h})):e()}),500);function f(e,{flush:t=!1,callback:n=(()=>{})}={}){return(i,r)=>{i({type:u,event:e}),p(n,i,r),t&&p.flush()}}function g(){return(e,t)=>{const{token:n,url:i}=t();e(f({type:"page_hit",token:n,url:i||window.global.location.href,...d}))}}function m({pageMeta:e={}}){return(t,n)=>{if(!Object(r.a)(e))return;const{url:i}=n();t(f({type:"page_meta",pageMeta:e,url:i||window.global.location.href,...d}))}}function b(e={}){return(t,n)=>{if(!Object(r.a)(e))return;const{url:i}=n();t(f({type:"page_ext_cfg_error",userAgent:window.navigator.userAgent,errorType:e.errorType,errorText:e.errorText,errorCode:e.errorCode,errorStage:e.errorStage,errorDescription:e.errorDescription,extCfgId:e.extCfgId,url:i||window.global.location.href,...d}))}}function y({recId:e,cfgId:t}){return(n,i)=>{var r;const{recs:o,recsStat:s,url:a}=i(),l=s[e],u=o[e];u&&(l&&l.loaded||(n(f({type:"rec_load",widgetCfgId:t,recCtx:u.recCtx,recGroupCtx:u.recGroupCtx,project:(null==u||null===(r=u.customRec)||void 0===r?void 0:r.name)||void 0,url:a||window.global.location.href,...d})),n(Object(c.p)(e))))}}function v({instanceId:e}){return(t,n)=>{const{widgetInstances:i,widgetInstancesStat:r}=n();if(!i[e])return;const o=r[e];o&&o.loaded||t(Object(l.c)(e))}}function w({recId:e,cfgId:t}){return(n,r)=>{const{recs:o,widgetInstances:s,widgetInstancesStat:c,url:u}=r(),h=o[e];if(!h)return;const p=Object(i.a)(s,(t=>Object(a.D)(t.slots,(t=>t.recId===e))));if(!p)return;const g=c[p.id];g&&g.showed||(n(f({type:"widget_show",widgetCfgId:t,recCtx:h.recCtx,recGroupCtx:h.recGroupCtx,url:u||window.global.location.href,...d})),n(Object(l.d)(p.id)))}}function I({recId:e,cfgId:t}){return(n,i)=>{var r;const{recs:o,recsStat:s,url:a}=i(),l=s[e],u=o[e];u&&(l&&l.showed||(n(f({type:"rec_show",widgetCfgId:t,recCtx:u.recCtx,recGroupCtx:u.recGroupCtx,project:(null==u||null===(r=u.customRec)||void 0===r?void 0:r.name)||void 0,url:a||window.global.location.href,...d})),n(Object(c.q)(e))))}}function C({recId:e,cfgId:t}){return(n,i)=>{const{recs:r,recsStat:o,url:s}=i(),a=o[e],l=r[e];if(!l)return Promise.reject();if(a&&a.clicked)return Promise.reject();const u=new Promise((e=>{var i;n(f({type:"rec_click",widgetCfgId:t,recCtx:l.recCtx,recGroupCtx:l.recGroupCtx,project:(null==l||null===(i=l.customRec)||void 0===i?void 0:i.name)||void 0,url:s||window.global.location.href,...d},{flush:!0,callback:()=>{e()}}))}));return n(Object(c.o)(e)),u}}function O({recId:e,cfgId:t,vastDomain:n,percent:i}){return(r,o)=>{var s;const{recs:a,recsStat:l,url:u}=o(),h=l[e],p=a[e];!p||null!=h&&null!==(s=h.videoTime)&&void 0!==s&&s.includes(i)||(r(f({type:"rec_video_time_update",vastDomain:n,percent:i,widgetCfgId:t,recCtx:p.recCtx,recGroupCtx:p.recGroupCtx,url:u||window.global.location.href,...d})),r(Object(c.r)({id:e,percent:i})))}}function S({recId:e,cfgId:t,percent:n}){return(i,r)=>{var o;const{recs:s,recsStat:a,url:l}=r(),u=a[e],h=s[e];!h||null!=u&&null!==(o=u.articleScroll)&&void 0!==o&&o.includes(n)||(i(f({type:"rec_article_scroll_update",percent:n,widgetCfgId:t,recCtx:h.recCtx,recGroupCtx:h.recGroupCtx,url:l||window.global.location.href,...d})),i(Object(c.n)({id:e,percent:n})))}}function R({recId:e,cfgId:t}){return(n,i)=>{const{recs:r,recsStat:o,url:s}=i(),a=o[e],l=r[e];!l||null!=a&&a.articleClicked||(n(f({type:"rec_article_click",widgetCfgId:t,recCtx:l.recCtx,recGroupCtx:l.recGroupCtx,url:s||window.global.location.href,...d})),n(Object(c.m)({id:e})))}}function j(e={}){return(t,n)=>{const{recs:i,url:o}=n(),s=i[e.recId];s&&Object(r.a)(e)&&t(f({type:"rec_video_error",userAgent:window.navigator.userAgent,errorType:e.errorType,errorText:e.errorText,errorCode:e.errorCode,errorStage:e.errorStage,errorDescription:e.errorDescription,widgetCfgId:e.cfgId,recCtx:s.recCtx,recGroupCtx:s.recGroupCtx,url:o||window.global.location.href,...d}))}}function x({cfgId:e,recId:t,project:n,category:i,action:r,userInput:o,tags:s}){return(a,c)=>{const{recs:l,url:u}=c(),h=l[t];h&&a(f({type:"rec_custom",widgetCfgId:e,recCtx:h.recCtx,recGroupCtx:h.recGroupCtx,project:n,category:i,action:r,userInput:o,tags:s,url:u||window.global.location.href,...d}))}}function E({recId:e,formId:t,sequenceId:n}){return(i,r)=>{var o;const{recs:s,recsStat:a,url:l}=r(),u=a[e],h=s[e];h&&(u&&u.formLoaded||(i(f({type:"form_load",sequenceId:n,formId:t,recCtx:h.recCtx,recGroupCtx:h.recGroupCtx,project:(null==h||null===(o=h.customRec)||void 0===o?void 0:o.name)||void 0,url:l||window.global.location.href,...d})),i(Object(c.k)(e))))}}function k({formId:e,sequenceId:t,questionId:n,answerId:i,isCorrect:r}){return(o,s)=>{const{url:a}=s();o(f({type:"form_result",sequenceId:t,formId:e,questionId:n,answerId:i,isCorrect:r,url:a||window.global.location.href,...d}))}}function T({formId:e,sequenceId:t,sessionTickInterval:n}){return(i,r)=>{const{url:o}=r();i(f({type:"form_session_active",sequenceId:t,sessionTickInterval:n,formId:e,url:o||window.global.location.href,...d}))}}function P({formId:e,sequenceId:t,sessionTickInterval:n}){return(i,r)=>{const{url:o}=r();i(f({type:"form_session_inactive",sequenceId:t,sessionTickInterval:n,formId:e,url:o||window.global.location.href,...d}))}}function W({recId:e,formId:t,sequenceId:n}){return(i,r)=>{const{recs:o,recsStat:s,url:a}=r(),l=s[e],u=o[e];u&&(l&&l.formShowed||(i(f({type:"form_show",formId:t,sequenceId:n,recCtx:u.recCtx,recGroupCtx:u.recGroupCtx,url:a||window.global.location.href,...d})),i(Object(c.l)(e))))}}function _({recId:e,formId:t,sequenceId:n}){return(i,r)=>{const{recs:o,recsStat:s,url:a}=r(),l=s[e];o[e]&&(l&&l.formCompleted||(i(f({type:"form_completed",formId:t,sequenceId:n,url:a||window.global.location.href,...d})),i(Object(c.j)(e))))}}},1438:function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s})),n.d(t,"g",(function(){return a})),n.d(t,"f",(function(){return c})),n.d(t,"h",(function(){return l})),n.d(t,"e",(function(){return d}));const i="SET_VISIBLE_INSTANCES_USED",r="SET_MAX_VISIBLE_INSTANCES",o="SET_MAX_INSTANCES",s="REMOVE_VISIBLE_INSTANCES_USED";function a({cfgId:e,count:t}){return{type:r,count:t,cfgId:e}}function c({cfgId:e,count:t}){return{type:o,count:t,cfgId:e}}function l({cfgId:e,id:t}){return{type:i,id:t,cfgId:e}}function d({cfgId:e,id:t}){return{type:s,id:t,cfgId:e}}},1439:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(1442),r=n(1385);function o(e="primary",t="base",n=r.g.none){const o="lime";if(!r.a[e])return o;const s=r.a[e][t];return s?n===r.g.none?s:"string"==typeof n&&r.g[n]?Object(i.e)(1-r.g[n],s):"number"==typeof n?Object(i.e)(1-n,s):o:o}},1440:function(e,t,n){"use strict";n.d(t,"a",(function(){return z}));var i=n(1532),r=n(1437);const o="SET_IS_V6_COMPAT";var s=n(1478);var a=n(1479);const c="SET_TOKEN";var l=n(1480);const d="SET_SESSION_SECRET";const u="SET_SUB_PUBLISHER";const h="SET_LUID";var p=n(1481);var f=n(1482);var g=n(1483);var m=n(1444);const b=Object(r.c)({adBlockPlus:function(e={},t){switch(t.type){case m.a:return t.params;default:return e}},constant:function(e={},t){switch(t.type){case m.c:return t.params;default:return e}},reinitable:function(e={},t){switch(t.type){case m.f:return t.params;default:return e}}});var y=Object(r.c)({adBlockPlusPromise:function(e=null,t){switch(t.type){case m.b:return t.promise;default:return e}},constantPromise:function(e=null,t){switch(t.type){case m.d:return t.promise;default:return e}},reinitablePromise:function(e=null,t){switch(t.type){case m.g:return t.promise;default:return e}},reinitableParamsStatus:function(e="stale",t){switch(t.type){case m.i:return t.status;default:return e}},constantSrcs:function(e=[],t){switch(t.type){case m.e:return t.cfgs;default:return e}},reinitableSrcs:function(e=[],t){switch(t.type){case m.h:return t.cfgs;default:return e}},values:b}),v=n(1497),w=n(1410),I=n(1421),C=n(1397),O=n(1162);n(435);var S=n(1387),R=n(1446);var j=n(1557),x=n(1485);var E=n(1486);var k=n(1488);var T=n(1436);var P=n(1484);var W=n(1498);var _=n(1438);var L=n(1499);var A=n(1491);var M=Object(r.c)({isV6Compat:function(e=!1,t){switch(t.type){case o:return t.isV6Compat;default:return e}},url:function(e="",t){switch(t.type){case s.a:return t.url;default:return e}},customData:function(e={},t){switch(t.type){case a.a:return{...e,...t.data};default:return e}},token:function(e="",t){switch(t.type){case c:return t.token;default:return e}},seed:function(e="",t){switch(t.type){case l.a:return t.seed;default:return e}},sessionSecret:function(e="",t){switch(t.type){case d:return t.sessionSecret;default:return e}},subPublisher:function(e="",t){switch(t.type){case u:return t.subPublisher;default:return e}},luid:function(e="",t){switch(t.type){case h:return t.luid;default:return e}},perfData:function(e=[],t){switch(t.type){case p.a:return[...e,t.dataItem];default:return e}},articleId:function(e="",t){switch(t.type){case f.a:return t.id;default:return e}},inlineArticlePrefetchPromise:function(e=null,t){switch(t.type){case g.a:return t.promise;default:return e}},extParams:y,widgetConfigs:function(e={},t){switch(t.type){case I.a:return{...e,[t.cfg.id]:t.cfg};default:return e}},widgetInstances:function(e={},t){switch(t.type){case I.b:return{...e,[t.id]:{id:t.id,cfgId:t.cfgId,positioning:t.positioning,additionalParams:t.additionalParams,onReady:t.onReady,onLoad:t.onLoad,isForm:t.isForm,slots:[],initialFetchStatus:"pending",lastSlotRemovedBy:null}};case I.i:return e[t.id]?{...e,[t.id]:{...e[t.id],el:t.el,local:t.local}}:e;case I.c:return e[t.id]?{...e,[t.id]:{...e[t.id],cfg:t.cfg}}:e;case I.g:return e[t.id]?{...e,[t.id]:{...e[t.id],ready:!0}}:e;case I.h:return e[t.id]?{...e,[t.id]:{...e[t.id],visible:!0}}:e;case I.d:return e[t.id]?{...e,[t.id]:{...e[t.id],visible:!1}}:e;case I.f:return e[t.id]?{...e,[t.id]:{...e[t.id],loadMoreInProgress:!0}}:e;case I.e:return e[t.id]?{...e,[t.id]:{...e[t.id],loadMoreInProgress:!1}}:e;case I.l:return e[t.id]?{...e,[t.id]:{...e[t.id],initialFetchStatus:t.status}}:e;case I.m:return e[t.id]?{...e,[t.id]:{...e[t.id],payloadIndex:t.index}}:e;case I.j:return e[t.id]?{...e,[t.id]:{...e[t.id],onRemove:t.onRemove}}:e;case I.k:return Object(w.a)(e,t.id);case C.j:return e[t.id]?{...e,[t.id]:{...e[t.id],slots:t.slots}}:e;case C.c:if(!e[t.id])return e;const n=t.slotId?Object(O.z)(e[t.id].slots,(e=>"grid"!==e.type||e.slotId!==t.slotId?e:{...e,slots:[...e.slots,...t.slots]})):[...e[t.id].slots,...t.slots];return{...e,[t.id]:{...e[t.id],slots:n}};case C.h:return e[t.id]?{...e,[t.id]:{...e[t.id],slots:Object(O.j)(e[t.id].slots,(({recId:e})=>e!==t.recId)),lastSlotRemovedBy:t.removedBy}}:e;case C.i:return e[t.id]?{...e,[t.id]:{...e[t.id],slots:Object(O.A)(e[t.id].slots,(e=>{if(e.slotId!==t.slotId)return e;const n={...e,recId:t.recId};return delete n.swapping,n}))}}:e;case C.a:return e[t.id]?{...e,[t.id]:{...e[t.id],slots:Object(O.A)(e[t.id].slots,(e=>{if(e.slotId!==t.slotId)return e;const n=e.bgRecs||[];return{...e,bgRecs:Object(v.a)([...n,t.recId])}}))}}:e;case C.f:return e[t.id]?{...e,[t.id]:{...e[t.id],slots:Object(O.A)(e[t.id].slots,(e=>{if(e.slotId!==t.slotId)return e;const n=e.bgRecs||[];return{...e,bgRecs:n.filter((e=>e!==t.recId))}}))}}:e;case C.e:return e[t.id]?{...e,[t.id]:{...e[t.id],slots:Object(O.A)(e[t.id].slots,(e=>{if(e.slotId!==t.slotId)return e;const n=e.bgRecs||[];return{...e,bgRecs:n.filter((t=>t===e.recId))}}))}}:e;case C.d:return e[t.id]?{...e,[t.id]:{...e[t.id],slots:Object(O.A)(e[t.id].slots,(e=>e.slotId!==t.slotId?e:{...e,swapping:!0}))}}:e;default:return e}},recs:function(e={},t){switch(t.type){case C.b:const n=Object(R.a)(Object(R.a)(t.recsGroup)).reduce(((e,t)=>({...e,[t.id]:{...t,slotId:void 0}})),{});return{...e,...n};case C.g:return Object(w.a)(e,t.recIds);case C.k:const i={...e[t.id]};return Object(S.a)(i,t.rec),{...e,[t.id]:i};default:return e}},recsStat:function(e={},t){var n,i;switch(t.type){case x.g:return{...e,[t.id]:{...e[t.id],loaded:!0}};case x.h:return{...e,[t.id]:{...e[t.id],showed:!0}};case x.f:return{...e,[t.id]:{...e[t.id],clicked:!0}};case x.i:return{...e,[t.id]:{...e[t.id],videoTime:Object(j.a)([],(null===(n=e[t.id])||void 0===n?void 0:n.videoTime)||[],[t.percent])}};case x.e:return{...e,[t.id]:{...e[t.id],articleScroll:Object(j.a)([],(null===(i=e[t.id])||void 0===i?void 0:i.articleScroll)||[],[t.percent])}};case x.d:return{...e,[t.id]:{...e[t.id],articleClicked:!0}};case x.b:return{...e,[t.id]:{...e[t.id],formLoaded:!0}};case x.c:return{...e,[t.id]:{...e[t.id],formShowed:!0}};case x.a:return{...e,[t.id]:{...e[t.id],formComplete:!0}};case C.g:return Object(w.a)(e,t.recIds);default:return e}},widgetInstancesStat:function(e={},t){switch(t.type){case E.a:return{...e,[t.id]:{...e[t.id],loaded:!0}};case E.b:return{...e,[t.id]:{...e[t.id],showed:!0}};case I.k:return Object(w.a)(e,t.id);default:return e}},widgetInstancesWaitingForRecs:function(e=[],t){switch(t.type){case k.a:return[...e,t.id];case k.c:return e.filter((e=>!t.ids.includes(e)));case k.b:return[];default:return e}},statEvents:function(e=[],t){switch(t.type){case T.a:return[...e,t.event];case T.b:return[];default:return e}},vastCfgs:function(e={},t){switch(t.type){case P.a:return{...e,[t.id]:t.cfg};default:return e}},vastErrorCount:function(e=0,t){switch(t.type){case W.a:return e+t.count;default:return e}},widgetMaxInstancesCount:function(e={},t){switch(t.type){case _.b:return{...e,[t.cfgId]:{...e[t.cfgId],maxInstances:t.count}};case _.c:return{...e,[t.cfgId]:{...e[t.cfgId],maxVisibleInstances:t.count}};case _.d:const{visibleInstancesUsed:n=[]}=e[t.cfgId]||{};return n.length&&n.includes(t.id)?e:{...e,[t.cfgId]:{...e[t.cfgId],visibleInstancesUsed:[...n,t.id]}};case _.a:return{...e,[t.cfgId]:{...e[t.cfgId],visibleInstancesUsed:e[t.cfgId].visibleInstancesUsed.filter((e=>e!==t.id)),maxVisibleInstances:e[t.cfgId].maxVisibleInstances-1}};default:return e}},currentFlyroll:function(e=null,t){switch(t.type){case L.b:return t.instanceId;case L.a:return null;default:return e}},debug:function(e=[],t){switch(t.type){case A.a:return[...e,t.debug];default:return e}}});let D;function z({initialState:e={},withReduxDevtools:t}={}){if(D)return D;let n;return n=Object(r.a)(i.a),D=Object(r.e)(M,e,(e=>e&&"object"==typeof window.global&&window.global.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.global.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({name:"Relap v7"}):r.d)(t)(n)),D}},1443:function(e,t,n){"use strict";function i(e,t){const n={};return Object.keys(t).forEach((i=>{e[i]?n[i]=[...e[i],t[i]]:n[i]=[t[i]]})),{...e,...n}}n.d(t,"a",(function(){return s}));class r{constructor(){this.createEmptyDicts()}createEmptyDicts(){this.globalDict={},this.cfgDict={},this.instanceDict={}}registerGlobalCallbacks(e={}){this.globalDict=i(this.globalDict,e)}registerCfgCallbacks({cbObj:e={},cfgId:t}){this.cfgDict[t]||(this.cfgDict[t]={}),this.cfgDict[t]=i(this.cfgDict[t],e)}registerInstanceCallbacks({cbObj:e={},instanceId:t}){this.instanceDict[t]||(this.instanceDict[t]={}),this.instanceDict[t]=i(this.instanceDict[t],e)}hasGlobalCallback(e){return!!this.globalDict[e]}hasCfgCallback({callbackName:e,cfgId:t}){return!(!this.cfgDict[t]||!this.cfgDict[t][e])}hasInstanceCallback({callbackName:e,instanceId:t}){return!(!this.instanceDict[t]||!this.instanceDict[t][e])}hasCallback({callbackName:e,cfgId:t,instanceId:n}){return!!this.hasGlobalCallback(e)||(!!this.hasCfgCallback({callbackName:e,cfgId:t})||!!this.hasInstanceCallback({callbackName:e,instanceId:n}))}triggerGlobalCallback({callbackName:e,args:t}){this.hasGlobalCallback(e)&&this.globalDict[e].forEach((e=>e.apply(window.global,t)))}triggerCfgCallback({callbackName:e,cfgId:t,args:n}){this.hasCfgCallback({callbackName:e,cfgId:t})&&this.cfgDict[t][e].forEach((e=>e.apply(window.global,n)))}triggerInstanceCallback({callbackName:e,instanceId:t,args:n}){this.hasInstanceCallback({callbackName:e,instanceId:t})&&this.instanceDict[t][e].forEach((e=>e.apply(window.global,n)))}triggerCallback({callbackName:e,args:t,cfgId:n,instanceId:i}){this.triggerInstanceCallback({callbackName:e,args:t,instanceId:i}),this.triggerCfgCallback({callbackName:e,cfgId:n,args:t}),this.triggerGlobalCallback({callbackName:e,args:t})}removeGlobalCallback({callbackName:e}){this.hasGlobalCallback(e)&&delete this.globalDict[e]}removeCfgCallback({callbackName:e,cfgId:t}){this.hasCfgCallback({callbackName:e,cfgId:t})&&delete this.cfgDict[t][e]}removeInstanceCallback({callbackName:e,instanceId:t}){this.hasInstanceCallback({callbackName:e,instanceId:t})&&delete this.instanceDict[t][e]}removeAllInstanceCallbacks(e){this.instanceDict[e]={}}removeAllCfgCallbacks(e){this.cfgDict[e]={}}removeAllGlobalCallbacks(){this.globalDict={}}removeAllCallbacks(){this.createEmptyDicts()}}let o;function s(){return o||(o=new r,o)}},1444:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"e",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"h",(function(){return d})),n.d(t,"f",(function(){return u})),n.d(t,"i",(function(){return h})),n.d(t,"g",(function(){return p})),n.d(t,"j",(function(){return f})),n.d(t,"l",(function(){return g})),n.d(t,"k",(function(){return y})),n.d(t,"n",(function(){return v})),n.d(t,"o",(function(){return S})),n.d(t,"m",(function(){return R}));var i=n(1484),r=n(1436);const o="SET_AD_BLOCK_PLUS_PARAMS",s="SET_AD_BLOCK_PLUS_PROMISE",a="SET_CONSTANT_EXT_PARAMS_SRCS",c="SET_CONSTANT_EXT_PARAMS",l="SET_CONSTANT_EXT_PARAMS_PROMISE",d="SET_REINITABLE_EXT_PARAMS_SRCS",u="SET_REINITABLE_EXT_PARAMS",h="SET_REINITABLE_EXT_PARAMS_STATUS",p="SET_REINITABLE_EXT_PARAMS_PROMISE";function f(e){return t=>{t({type:s,promise:e}),e.then((e=>{t({type:o,params:{results:[e]}})}))}}function g(e){return{type:a,cfgs:e}}function m(e){return{type:c,params:e}}function b({dispatch:e,promise:t,actionType:n,settingParamsAction:o,settingUnresolvedStatusAction:s,settingResolvedStatusAction:a}){e({type:n,promise:t}),s&&e(s()),t.then((({results:t,errors:n,vastCfgs:s})=>{e(o({results:t,errors:n})),a&&e(a()),s.forEach((({id:t,cfg:n})=>{e(Object(i.b)({id:t,cfg:n}))})),n.forEach((t=>{e(Object(r.i)(t))}))}))}function y(e){return t=>{b({dispatch:t,promise:e,actionType:l,settingParamsAction:m})}}function v(e){return{type:d,cfgs:e}}function w(e){return{type:u,params:e}}function I(e){return{type:h,status:e}}function C(){return e=>{e(I("fresh"))}}function O(){return e=>{e(I("pending"))}}function S(){return e=>{e(I("stale"))}}function R(e){return t=>{b({dispatch:t,promise:e,actionType:p,settingParamsAction:w,settingUnresolvedStatusAction:O,settingResolvedStatusAction:C})}}},1445:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c}));n(1207);var i=n(1487),r=n(5),o=n(1379);function s({url:e,postParams:t,timeout:n=1e4,contentType:s="application/x-www-form-urlencoded",onSuccess:a=(()=>{}),onError:c=(()=>{})}){if(!e)return;const l=new XMLHttpRequest,d=e=>{"error"!==e.type&&"timeout"!==e.type&&200===e.target.status?a(l.responseText):c()};if(l.addEventListener("load",d),l.addEventListener("error",d),l.addEventListener("timeout",d),l.withCredentials=!0,t){let a;if(Object(r.a)(t))a=Object.keys(t).map((e=>{const n=`${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`;return"application/x-www-form-urlencoded"===s?n.replace(/%20/,"+","g"):n})).join("&");else{if(!Object(i.a)(t))return Object(o.a)("Unsupported params type"),void c();a=t}l.open("POST",e),l.timeout=n,l.setRequestHeader("Content-Type",s),l.send(a)}else l.open("GET",e),l.timeout=n,l.send()}function a({src:e,timeout:t}){return new Promise(((n,i)=>{s({url:e,timeout:t,onSuccess:n,onError:i})}))}function c({src:e,params:t,timeout:n}){return new Promise(((i,r)=>{s({url:e,postParams:t,timeout:n,onSuccess:i,onError:r})}))}},1449:function(e,t,n){var i=n(0);function r(e){return i.createElement("svg",e,[i.createElement("defs",{key:0},i.createElement("style",null,".relap-logo-small-icon{fill:currentColor;}")),i.createElement("title",{key:1}),i.createElement("path",{className:"relap-logo-small-icon",d:"M32,28.9a3.08,3.08,0,0,1-6.054.822H6.054a3.079,3.079,0,1,1-3.786-3.783V6.062a3.09,3.09,0,1,1,1.644,0V24.771L11.076,7.487a3.506,3.506,0,1,1,1.52.626L5.428,25.4,18.67,12.17a3.05,3.05,0,0,1-.412-1.514,3.126,3.126,0,1,1,1.577,2.675L6.59,26.562l17.3-7.16a3.039,3.039,0,0,1-.038-.375,3.12,3.12,0,1,1,.666,1.892l-17.3,7.159H25.946A3.08,3.08,0,0,1,32,28.9Z",key:2})])}r.defaultProps={viewBox:"0 0 32 32",width:"11",height:"16"},e.exports=r,r.default=r},1450:function(e,t,n){"use strict";t.a=[{family:"Alegreya",variants:["regular","italic","500","500italic","700","700italic","800","800italic","900","900italic"]},{family:"Alegreya SC",variants:["regular","italic","500","500italic","700","700italic","800","800italic","900","900italic"]},{family:"Alegreya Sans",variants:["100","100italic","300","300italic","regular","italic","500","500italic","700","700italic","800","800italic","900","900italic"]},{family:"Alegreya Sans SC",variants:["100","100italic","300","300italic","regular","italic","500","500italic","700","700italic","800","800italic","900","900italic"]},{family:"Alice",variants:["regular"]},{family:"Amatic SC",variants:["regular","700"]},{family:"Andika",variants:["regular"]},{family:"Anonymous Pro",variants:["regular","italic","700","700italic"]},{family:"Arimo",variants:["regular","italic","700","700italic"]},{family:"Arsenal",variants:["regular","italic","700","700italic"]},{family:"Bad Script",variants:["regular"]},{family:"Caveat",variants:["regular","700"]},{family:"Comfortaa",variants:["300","regular","500","600","700"]},{family:"Cormorant",variants:["300","300italic","regular","italic","500","500italic","600","600italic","700","700italic"]},{family:"Cormorant Garamond",variants:["300","300italic","regular","italic","500","500italic","600","600italic","700","700italic"]},{family:"Cormorant Infant",variants:["300","300italic","regular","italic","500","500italic","600","600italic","700","700italic"]},{family:"Cormorant SC",variants:["300","regular","500","600","700"]},{family:"Cormorant Unicase",variants:["300","regular","500","600","700"]},{family:"Cousine",variants:["regular","italic","700","700italic"]},{family:"Cuprum",variants:["regular","italic","700","700italic"]},{family:"Didact Gothic",variants:["regular"]},{family:"EB Garamond",variants:["regular","500","600","700","800","italic","500italic","600italic","700italic","800italic"]},{family:"El Messiri",variants:["regular","500","600","700"]},{family:"Exo 2",variants:["100","100italic","200","200italic","300","300italic","regular","italic","500","500italic","600","600italic","700","700italic","800","800italic","900","900italic"]},{family:"Fira Code",variants:["300","regular","500","600","700"]},{family:"Fira Mono",variants:["regular","500","700"]},{family:"Fira Sans",variants:["100","100italic","200","200italic","300","300italic","regular","italic","500","500italic","600","600italic","700","700italic","800","800italic","900","900italic"]},{family:"Fira Sans Condensed",variants:["100","100italic","200","200italic","300","300italic","regular","italic","500","500italic","600","600italic","700","700italic","800","800italic","900","900italic"]},{family:"Fira Sans Extra Condensed",variants:["100","100italic","200","200italic","300","300italic","regular","italic","500","500italic","600","600italic","700","700italic","800","800italic","900","900italic"]},{family:"Forum",variants:["regular"]},{family:"Gabriela",variants:["regular"]},{family:"IBM Plex Mono",variants:["100","100italic","200","200italic","300","300italic","regular","italic","500","500italic","600","600italic","700","700italic"]},{family:"IBM Plex Sans",variants:["100","100italic","200","200italic","300","300italic","regular","italic","500","500italic","600","600italic","700","700italic"]},{family:"IBM Plex Serif",variants:["100","100italic","200","200italic","300","300italic","regular","italic","500","500italic","600","600italic","700","700italic"]},{family:"Istok Web",variants:["regular","italic","700","700italic"]},{family:"Jura",variants:["300","regular","500","600","700"]},{family:"Kelly Slab",variants:["regular"]},{family:"Kosugi",variants:["regular"]},{family:"Kosugi Maru",variants:["regular"]},{family:"Kurale",variants:["regular"]},{family:"Ledger",variants:["regular"]},{family:"Literata",variants:["regular","500","600","700","italic","500italic","600italic","700italic"]},{family:"Lobster",variants:["regular"]},{family:"Lora",variants:["regular","italic","700","700italic"]},{family:"M PLUS 1p",variants:["100","300","regular","500","700","800","900"]},{family:"M PLUS Rounded 1c",variants:["100","300","regular","500","700","800","900"]},{family:"Marck Script",variants:["regular"]},{family:"Marmelad",variants:["regular"]},{family:"Merriweather",variants:["300","300italic","regular","italic","700","700italic","900","900italic"]},{family:"Montserrat",variants:["100","100italic","200","200italic","300","300italic","regular","italic","500","500italic","600","600italic","700","700italic","800","800italic","900","900italic"]},{family:"Montserrat Alternates",variants:["100","100italic","200","200italic","300","300italic","regular","italic","500","500italic","600","600italic","700","700italic","800","800italic","900","900italic"]},{family:"Neucha",variants:["regular"]},{family:"Noto Sans",variants:["regular","italic","700","700italic"]},{family:"Noto Sans SC",variants:["100","300","regular","500","700","900"]},{family:"Noto Serif",variants:["regular","italic","700","700italic"]},{family:"Noto Serif SC",variants:["200","300","regular","500","600","700","900"]},{family:"Noto Serif TC",variants:["200","300","regular","500","600","700","900"]},{family:"Nunito",variants:["200","200italic","300","300italic","regular","italic","600","600italic","700","700italic","800","800italic","900","900italic"]},{family:"Old Standard TT",variants:["regular","italic","700"]},{family:"Open Sans",variants:["300","300italic","regular","italic","600","600italic","700","700italic","800","800italic"]},{family:"Open Sans Condensed",variants:["300","300italic","700"]},{family:"Oranienbaum",variants:["regular"]},{family:"Oswald",variants:["200","300","regular","500","600","700"]},{family:"PT Mono",variants:["regular"]},{family:"PT Sans",variants:["regular","italic","700","700italic"]},{family:"PT Sans Caption",variants:["regular","700"]},{family:"PT Sans Narrow",variants:["regular","700"]},{family:"PT Serif",variants:["regular","italic","700","700italic"]},{family:"PT Serif Caption",variants:["regular","italic"]},{family:"Pacifico",variants:["regular"]},{family:"Pangolin",variants:["regular"]},{family:"Pattaya",variants:["regular"]},{family:"Philosopher",variants:["regular","italic","700","700italic"]},{family:"Play",variants:["regular","700"]},{family:"Playfair Display",variants:["regular","italic","700","700italic","900","900italic"]},{family:"Playfair Display SC",variants:["regular","italic","700","700italic","900","900italic"]},{family:"Podkova",variants:["regular","500","600","700","800"]},{family:"Poiret One",variants:["regular"]},{family:"Prata",variants:["regular"]},{family:"Press Start 2P",variants:["regular"]},{family:"Prosto One",variants:["regular"]},{family:"Roboto",variants:["100","100italic","300","300italic","regular","italic","500","500italic","700","700italic","900","900italic"]},{family:"Roboto Condensed",variants:["300","300italic","regular","italic","700","700italic"]},{family:"Roboto Mono",variants:["100","100italic","300","300italic","regular","italic","500","500italic","700","700italic"]},{family:"Roboto Slab",variants:["100","200","300","regular","500","600","700","800","900"]},{family:"Rubik",variants:["300","300italic","regular","italic","500","500italic","700","700italic","900","900italic"]},{family:"Rubik Mono One",variants:["regular"]},{family:"Ruslan Display",variants:["regular"]},{family:"Russo One",variants:["regular"]},{family:"Sawarabi Gothic",variants:["regular"]},{family:"Scada",variants:["regular","italic","700","700italic"]},{family:"Seymour One",variants:["regular"]},{family:"Source Code Pro",variants:["200","200italic","300","300italic","regular","italic","500","500italic","600","600italic","700","700italic","900","900italic"]},{family:"Source Sans Pro",variants:["200","200italic","300","300italic","regular","italic","600","600italic","700","700italic","900","900italic"]},{family:"Spectral",variants:["200","200italic","300","300italic","regular","italic","500","500italic","600","600italic","700","700italic","800","800italic"]},{family:"Spectral SC",variants:["200","200italic","300","300italic","regular","italic","500","500italic","600","600italic","700","700italic","800","800italic"]},{family:"Stalinist One",variants:["regular"]},{family:"Tenor Sans",variants:["regular"]},{family:"Tinos",variants:["regular","italic","700","700italic"]},{family:"Ubuntu",variants:["300","300italic","regular","italic","500","500italic","700","700italic"]},{family:"Ubuntu Condensed",variants:["regular"]},{family:"Ubuntu Mono",variants:["regular","italic","700","700italic"]},{family:"Underdog",variants:["regular"]},{family:"Vollkorn",variants:["regular","italic","600","600italic","700","700italic","900","900italic"]},{family:"Vollkorn SC",variants:["regular","600","700","900"]},{family:"Yanone Kaffeesatz",variants:["200","300","regular","700"]},{family:"Yeseva One",variants:["regular"]}]},1475:function(e,t,n){"use strict";n.d(t,"c",(function(){return O})),n.d(t,"b",(function(){return S})),n.d(t,"a",(function(){return R}));n(435);var i=n(1555),r=n(1410),o=n(1379),s=n(1382);class a{constructor({keys:e=[],onComplete:t=(()=>{})}){this.onComplete=t,this.isFinalized=!1,this.dict=e.reduce(((e,t)=>(e[t]={complete:!1,timedout:!1},e)),{}),this._tryToFinalize()}_tryToFinalize(){if(this.isFinalized)return;if(this.isFinalized=Object.values(this.dict).every((e=>e.complete||e.timedout)),!this.isFinalized)return;const e=Object.keys(this.dict).reduce(((e,t)=>{const{value:n}=this.dict[t];return n&&e.push(n),e}),[]);this.onComplete(e,this.dict)}setValue({id:e,value:t}){this.isFinalized||!this.dict[e]||this.dict[e].complete||(this.dict[e]={...this.dict[e],value:t,complete:!0},this._tryToFinalize())}timeOut(e){!this.isFinalized&&this.dict[e]&&(this.dict[e].timedout=!0,this._tryToFinalize())}}var c=n(1490);function l({cbRegistry:e,scriptEl:t,cbName:n}){delete e[n],t.parentNode&&t.parentNode.removeChild(t)}var d=n(1489);const u=[],h=[];function p({id:e,cpm:t,nativePayload:n=null,displayUrl:i=null,width:r=null,height:o=null}){return i?{value:{id:e,cpm:t,displayUrl:i,sizes:{width:r,height:o}},ecpm:t/3}:{value:{id:e,cpm:t,creative:n.products[0],client:{domain:n.advertiser.domain},privacy:n.privacy,imps:n.impression_pixels.map((e=>e.url))},ecpm:t/3}}function f({subid:e,zoneId:t}){let n;window.global.Criteo=window.global.Criteo||{},window.global.Criteo.events=window.global.Criteo.events||[];const i=new Promise((e=>{n=e}));return window.global.Criteo.events.push((function(){window.global.Criteo.RequestBids({placements:[{slotid:"dummy",zoneid:t,publishersubid:e,nativeCallback(){}}]},(function(e){!function({bids:e,resolve:t,zoneId:n}){try{var i,r;let o=e.filter((e=>((null==e?void 0:e.nativePayload)||(null==e?void 0:e.displayUrl))&&!u.includes(e.id)&&e.zoneId===n));if(null!==(i=o[0])&&void 0!==i&&i.nativePayload?o=o.find((({nativePayload:{products:[{title:e}]}})=>!h.includes(e))):[o]=o,!o)return void t(null);const s=p(o);u.push(s.value.id),null!==(r=s.value)&&void 0!==r&&r.creative&&h.push(s.value.creative.title),t(p(o))}catch(e){console.log(e),t(null)}}({bids:e,resolve:n,zoneId:t})}),1e4)})),i}var g=n(1527),m=n(1445);const b=["256034","256092","256094","256096"];const y={rtbhouse:{sizes:[[300,250]],bids:[{bidder:"rtbhouse",params:{region:"prebid-eu",publisherId:"ictYIc4iROlsEQZd59Ra"}},{bidder:"rtbhouse",params:{region:"prebid-eu",publisherId:"ictYIc4iROlsEQZd59Ra"}}]}};function v({id:e,adCount:t=1,bidder:n,bidCfg:{sizes:i,bids:r},resolve:s,reject:a}){const{pbjs:c}=window,l={};for(let e=0;e<t;e++)l[`code${e}`]={code:`code${e}`,sizes:i,bids:r};c.que.push((function(){c.addAdUnits(Object.values(l)),c.requestBids({bidsBackHandler(t){const i=Object.keys(t).reduce(((e,n)=>l[n]?e.concat(t[n].bids):e),[]).reduce(((e,t)=>{const i=function({bid:e,bidder:t}){switch(t){case"rtbhouse":return function({ad:e}){const n=document.createElement("p");n.innerHTML=e;const i=n.querySelector("iframe"),r=n.querySelector("img");return i&&r?{iframe:i.getAttribute("src"),nurl:r.getAttribute("src")}:(Object(o.a)(`PHB: cannot parse ${t} bid: `,e),null)}(e);default:return Object(o.a)(`PHB: no parse logic for ${t}`),null}}({bid:t,bidder:n});return i?(e.push({...i,currency:t.currency,cpm:t.cpm}),e):e}),[]);i.length?s({result:{name:`ext_json_${e}`,value:JSON.stringify(i)}}):a({error:{errorType:"phb_no_bids",extCfgId:e}})},timeout:1e4})}))}function w({id:e,type:t}){Object(s.b)({id:`${t}_${e}`,groupId:"calc ext params"})}function I({extParams:e,id:t,type:n}){w({id:t,type:n}),e.timeOut(t)}const C={token:function({name:e,value:t}){return Promise.resolve({result:{name:e,value:t}})},img:function({id:e,src:t}){let n,i;const r=new Promise(((e,t)=>{n=e,i=t})),o=new Image;return o.onload=()=>{n()},o.onerror=()=>{i({error:{errorType:"img_fetch_failed",extCfgId:e}})},o.src=t,r},jsonp:function({id:e,src:t,callbackParamName:n},i){let r,s;const a=new Promise(((e,t)=>{r=e,s=t}));i.relapCbRegistry||(i.relapCbRegistry={});const c=i.relapCbRegistry,d=`relapCb${String(Math.random()).slice(-10)}`;c[d]=function(t){let n;try{n=JSON.stringify(t)}catch(e){Object(o.a)("JSON stringify failed for: ",t,e)}n?r({result:{name:`ext_json_${e}`,value:n}}):s({error:{errorType:"jsonp_fetch_failed",extCfgId:e}})};const u=document.createElement("script");return setTimeout((()=>{l({cbRegistry:c,scriptEl:u,cbName:d})}),2e4),u.onerror=()=>{l({cbRegistry:c,scriptEl:u,cbName:d}),s({error:{errorType:"jsonp_fetch_failed",extCfgId:e}})},u.src=`${t}${t.includes("?")?"&":"?"}${n}=window.relapCbRegistry.${d}`,i.document.head.appendChild(u),a},chb:function({id:e,adCount:t,subid:n,zoneId:i}){return new Promise((r=>{var o;const s=[];for(let e=0;e<t;e++)s.push(f({subid:n,zoneId:i}));if(null===(o=window.global.Criteo)||void 0===o||!o.RequestBids){const e=document.createElement("script");e.src="https://static.criteo.net/js/ld/publishertag.js",window.global.document.head.appendChild(e)}Promise.all(s).then((t=>{r({result:{name:`ext_json_${e}`,value:JSON.stringify(t.filter((e=>e)).map((e=>e.value)))}})}))}))},iframe:function({id:e,src:t}){let n,i;const r=new Promise(((e,t)=>{n=e,i=t})),o=document.createElement("iframe");return o.src=t,o.style.width="1px",o.style.height="1px",o.style.position="absolute",o.style.left="-9999px",o.style.visibility="hidden",o.onload=()=>{n()},o.onerror=()=>{i({error:{errorType:"iframe_fetch_failed",extCfgId:e}})},document.body.appendChild(o),r},json:function({id:e,src:t,provider:n}){let i,r;const o=new Promise(((e,t)=>{i=e,r=t}));return Object(m.a)({src:t}).then((t=>{var o;let s;try{s=JSON.parse(t)}catch(t){return void r({error:{errorType:"json_parse_failed",extCfgId:e}})}switch(n){case"freakout":const t=((null===(o=s)||void 0===o?void 0:o.items)||[]).map((e=>Object(g.a)(e,["title","creative_url","imp_url","click_url"])));i({result:{name:`ext_json_${e}`,value:JSON.stringify(t)}});break;case"target_mail_ru_carousel":case"target_mail_ru_carousel_tgb":try{const{cards:t}=s[0].json.targetBlock.banners[0];if(Array.isArray(t)&&t.length){const t=`extCfg_${e}_Data`,n={...s[0].json.targetBlock.banners[0]};window.extCfgsDataStorage=window.extCfgsDataStorage||{},window.extCfgsDataStorage[t]=n,s[0].json.targetBlock.banners[0].cards=t}else s[0].json.targetBlock.banners[0].cards=null}catch(e){s=[]}i({result:{name:`ext_json_${e}`,value:JSON.stringify(s)}});break;default:i({result:{name:`ext_json_${e}`,value:JSON.stringify(s)}})}})).catch((t=>{console.error("json_fetch_failed:",t),r({error:{errorType:"json_fetch_failed",extCfgId:e}})})),o},mhb:function({id:e,adCount:t},n){let i,r;const o=new Promise(((e,t)=>{i=e,r=t})),s=b.splice(0,t);s.length||i();const a=JSON.stringify({places:s.map(((e,t)=>({id:`dummy${t}`,placementId:e,sizes:[[240,400]]}))),settings:{currency:"RUB",windowSize:{width:n.document.documentElement.clientWidth,height:n.document.documentElement.clientHeight}}});return Object(m.b)({src:"https://ad.mail.ru/hbid_yandex/",params:a}).then((t=>{let n;try{n=JSON.parse(t)}catch(t){return void r({error:{errorType:"mhb_parse_failed",extCfgId:e}})}const{bids:o=[]}=n,s=o.map((e=>Object(g.a)(e,["cpm","currency","displayUrl"])));i({result:{name:`ext_json_${e}`,value:JSON.stringify(s)}})})).catch((t=>{console.error("MHB ajaxPost reject:",t),r({error:{errorType:"mhb_fetch_failed",extCfgId:e}})})),o},phb:function({id:e,adCount:t,bidder:i}){let r,o;const s=new Promise(((e,t)=>{r=e,o=t})),a=y[i];return a?(window.pbjs?v({id:e,adCount:t,bidder:i,bidCfg:a,resolve:r,reject:o}):n.e(1145).then(n.bind(null,1983)).then((()=>{v({id:e,adCount:t,bidder:i,bidCfg:a,resolve:r,reject:o})})),s):(o({error:{errorType:"phb_unknown_bidder",extCfgId:e}}),s)}},O=(e=[])=>e.reduce(((e,t)=>{switch(t.type){case"token":case"jsonp":case"chb":case"json":case"mhb":case"phb":case"vast2.0":t.nonReinitable?e.constant.push(t):e.reinitable.push(t);break;case"img":case"iframe":default:e.constant.push(t)}return e}),{constant:[],reinitable:[]}),S=({adBlockPlusPromise:e,constantPromise:t,reinitablePromise:n})=>new Promise((r=>{Promise.all([e,t,n]).then((e=>{const t=e.reduce(((e,t)=>Object(i.a)(e,(null==t?void 0:t.results)||[])),[]);r(t)}))})),R=({cfgs:e=[],global:t})=>new Promise((n=>{e.length||n({results:[],vastCfgs:[],errors:[]});const i=new a({keys:e.map((e=>e.id)),onComplete(e){n({results:e.filter((e=>!(null==e||!e.result))).map((e=>e.result)),vastCfgs:e.filter((e=>!(null==e||!e.vastCfg))).map((e=>e.vastCfg)),errors:e.filter((e=>!(null==e||!e.error))).map((e=>e.error))})}});e.forEach((e=>{const{id:n,type:a,timeout:l=500}=e;switch(function({id:e,type:t}){Object(s.c)({id:`${t}_${e}`,groupId:"calc ext params"})}({id:n,type:a}),setTimeout((()=>{I({extParams:i,id:n,type:a})}),Object(c.a)(l)),a){case"token":case"img":case"jsonp":case"chb":case"iframe":case"json":case"mhb":case"phb":const s=e=>{w({id:n,type:a}),i.setValue({id:n,value:e})};C[a](e,t).then(s,s);break;case"vast2.0":Object(d.b)({cfg:Object(r.a)(e,"timeout")}).then((({id:e,vastCfg:t})=>{let n;w({id:e,type:a});const r={MediaFile:t.mediafile,ClickThrough:t.clickthrough};try{n=JSON.stringify(r)}catch(e){Object(o.a)("JSON stringify failed for: ",r,e)}i.setValue({id:e,value:{result:{name:`ext_json_${e}`,value:n},vastCfg:{id:e,cfg:t}}})}),(e=>{w({id:n,type:a}),i.setValue({id:n,value:{error:e}})}));break;default:I({extParams:i,id:n,type:a})}}))}))},1478:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));const i="SET_URL";function r(e){return{type:i,url:e}}},1479:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));const i="SET_CUSTOM_DATA";function r(e){return{type:i,data:e}}},1480:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));const i="SET_SEED";function r(e){return{type:i,seed:e}}},1481:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));const i="ADD_PERF_DATA_ITEM";function r(e){return{type:i,dataItem:e}}},1482:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));const i="SET_ARTICLE_ID";function r(e){return{type:i,id:e}}},1483:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));const i="SET_INLINE_ARTICLE_PREFETCH_PROMISE";function r(e){return{type:i,promise:e}}},1484:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));const i="ADD_VAST_CFG";function r({id:e,cfg:t}){return{type:i,id:e,cfg:t}}},1485:function(e,t,n){"use strict";n.d(t,"g",(function(){return i})),n.d(t,"f",(function(){return r})),n.d(t,"h",(function(){return o})),n.d(t,"i",(function(){return s})),n.d(t,"e",(function(){return a})),n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return u})),n.d(t,"p",(function(){return h})),n.d(t,"o",(function(){return p})),n.d(t,"q",(function(){return f})),n.d(t,"r",(function(){return g})),n.d(t,"n",(function(){return m})),n.d(t,"m",(function(){return b})),n.d(t,"k",(function(){return y})),n.d(t,"l",(function(){return v})),n.d(t,"j",(function(){return w}));const i="MARK_REC_LOADED",r="MARK_REC_CLICKED",o="MARK_REC_SHOWED",s="MARK_REC_VIDEO_TIME",a="MARK_REC_ARTICLE_SCROLL",c="MARK_REC_ARTICLE_CLICKED",l="MARK_FORM_LOADED",d="MARK_FORM_SHOWED",u="MARK_FORM_COMPLETE";function h(e){return{type:i,id:e}}function p(e){return{type:r,id:e}}function f(e){return{type:o,id:e}}function g({id:e,percent:t}){return{type:s,id:e,percent:t}}function m({id:e,percent:t}){return{type:a,id:e,percent:t}}function b({id:e}){return{type:c,id:e}}function y(e){return{type:l,id:e}}function v(e){return{type:d,id:e}}function w(e){return{type:u,id:e}}},1486:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return s}));const i="MARK_WIDGET_INSTANCE_LOADED",r="MARK_WIDGET_INSTANCE_SHOWED";function o(e){return{type:i,id:e}}function s(e){return{type:r,id:e}}},1488:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return u}));var i=n(1165),r=n(1397),o=n(1475);const s="ADD_WIDGET_INSTANCE_WAITING_FOR_RECS_TO_QUEUE",a="REMOVE_WIDGET_INSTANCES_WAITING_FOR_RECS_FROM_QUEUE",c="EMPTY_WAITING_FOR_RECS_QUEUE";function l(e){return{type:s,id:e}}function d(e=[]){return{type:a,ids:e}}function u(){return(e,t)=>{const{extParams:n}=t();!function(e,t){const{inlineArticlePrefetchPromise:n,widgetInstancesWaitingForRecs:o,widgetInstances:s,widgetConfigs:a}=t(),c=o.filter((e=>{var t,n,i,r;const o=s[e],c=a[null==o?void 0:o.cfgId];return(null==c||null===(t=c.payload)||void 0===t||null===(n=t.grid)||void 0===n||null===(i=n.simple)||void 0===i||null===(r=i.schema)||void 0===r?void 0:r.every((({filters:e=[]})=>e.includes("inline_article"))))||!1}));if(!c.length)return;const l=Object(i.a)(c,(e=>{var t;return window.prefetchedInlineArticleWidgetCfgId&&(null===(t=s[e])||void 0===t?void 0:t.cfgId)===window.prefetchedInlineArticleWidgetCfgId}));n&&l?(e(Object(r.m)({instances:[l],fetchPromise:n})),e(d([l]))):(e(Object(r.m)({instances:c})),e(d(c)))}(e,t),Object(o.b)(n).then((n=>{const{widgetInstancesWaitingForRecs:i}=t();i.length&&(e(Object(r.m)({instances:i,extParams:n})),e({type:c}))}))}}},1489:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return h}));n(1207),n(1537),n(1539),n(1541),n(1542),n(1543),n(1544),n(1545),n(1546),n(1547),n(1548),n(1549),n(1550),n(1551),n(1552),n(1553),n(1554),n(1206);var i=n(1445),r=n(1490);function o(e){return e.includes("<![CDATA[")?e.trim().replace("<![CDATA[","").replace("]]>",""):e.trim()}function s(e={},t={}){const n=[...Object.keys(e),...Object.keys(t)],i=Array.from(new Set(n)),r={};return i.length?(i.forEach((n=>{r[n]=[...e[n]||[],...t[n]||[]]})),r):{}}function a(e){const t={raw:e,parseOk:!1,mediafile:[],complete:!0},n={};if(null===e)return t;const i=(new DOMParser).parseFromString(e,"text/xml"),r=i.querySelector("parsererror");if(r)return t.error=!0,t.errorText=r.innerText,t;return 1!==i.querySelectorAll("Creative").length?(t.error=!0,t.errorText='"Creative" nodes more or less than one',t):([{selector:"Tracking",key:"event",additionalTracking:!1},{selector:"Impression",additionalTracking:!0},{selector:"Error",additionalTracking:!0},{selector:"ClickTracking",additionalTracking:!0},{selector:"ClickThrough",additionalTracking:!1},{selector:"NonLinearClickThrough",additionalTracking:!1},{selector:"AdParameters",additionalTracking:!1},{selector:"StaticResource",additionalTracking:!1},{selector:"VASTAdTagURI",additionalTracking:!1}].forEach((e=>{const r=e.selector.toLowerCase(),s=function(e,t){const n=t?{}:[];return null!=e&&e.length?(e.forEach((e=>{if(t){const i=e.getAttribute(t);void 0===n[i]&&(n[i]=[]),n[i].push(o(e.innerHTML))}else n.push(o(e.innerHTML))})),n):n}(i.querySelectorAll(e.selector),e.key);e.additionalTracking?n[r]=s:t[r]=s})),i.querySelectorAll("MediaFile").forEach((e=>{var n,i;const r=null===(n=e.getAttribute("type"))||void 0===n?void 0:n.toLowerCase(),s=null===(i=e.getAttribute("apiFramework"))||void 0===i?void 0:i.toLowerCase();t.playertype="application/javascript"===r&&"vpaid"===s?"vpaid":"regular",t.hasControls="vpaid"!==t.playertype,t.mediafile.push({type:r,src:o(e.innerHTML)})})),t.tracking=s(t.tracking,n),t.complete=!t.vastadtaguri.length,t.parseOk=!(!t.mediafile.length&&!t.vastadtaguri.length),t)}function c(e){const t=a(e);return t.parseOk&&t.complete?t:null}function l({id:e,parsedData:t,state:n,maxRequests:i,resolve:r,reject:o}){const a=t.complete;!function({parsedData:e,state:t}){var n;const i=s(e.tracking,(null===(n=t.parsedData)||void 0===n?void 0:n.tracking)||{}),r={...t.parsedData,...e,tracking:i};t.parsedData=r}({parsedData:t,state:n}),a?r({id:e,vastCfg:n.parsedData}):(n.requestCounter++,n.requestCounter<=i?d({id:e,src:u(t.vastadtaguri[0]),state:n,maxRequests:i,resolve:r,reject:o}):o({errorType:"too_many_nested_vasts",extCfgId:e}))}function d({id:e,src:t,state:n,maxRequests:r,resolve:o,reject:s}){(function({src:e,id:t}){return new Promise(((n,r)=>{Object(i.a)({src:e}).then(n).catch((e=>{console.error("fetchVast reject: ",e),r({errorType:"vast_fetch_failed",extCfgId:t})}))}))})({src:t,id:e}).then((t=>{const i=a(t);i.parseOk?l({id:e,parsedData:i,state:n,maxRequests:r,resolve:o,reject:s}):function({id:e,parsedData:t,reject:n}){n({errorType:"vast_parse_failed",errorText:t.errorText,extCfgId:e})}({id:e,parsedData:i,reject:s})}),(e=>{s(e)}))}function u(e){function t(){return Math.round(99e5*Math.random()+1e5)}const{hostname:n}=new URL(e);let i;switch(n){case"ad.mail.ru":i=function(e){const{searchParams:t}=new URL(window.global.location.toString()),n=t.get("preview"),i=new URL(e);return n&&i.searchParams.set("preview",n),i.searchParams.set("dl",window.global.location.toString()),i.toString()}(e);break;case"instreamvideo.ru":i=function(e){const n=[{a:30,b:60,v:1},{a:61,b:90,v:2},{a:91,b:120,v:3},{a:121,b:180,v:4},{a:181,b:240,v:5},{a:241,b:300,v:6},{a:301,b:600,v:7},{a:601,b:900,v:8},{a:901,b:1800,v:9},{a:1801,b:3600,v:10}],i=t(),r=n[Math.floor(Math.random()*n.length)],o=Math.round(Math.random()*(r.b-r.a)+r.a);return e.replace(/\{rid\}/,i).replace(/\{duration\}/,o).replace(/\{puid8\}/,1)}(e);break;default:i=function(e){const n=encodeURIComponent(window.global.location.host),i=encodeURIComponent(window.global.location.toString()),r=t();return e.replace(/\{DOMAIN\}/,n).replace(/\{ENCODED_REF_URL\}/,i).replace(/\{REFERER\}/,i).replace(/\{RANDOM\}/,r).replace(/\[RANDOM\]/,r).replace(/\[CACHEBUSTING\]/,r)}(e)}return i}function h({cfg:{id:e,src:t,timeout:n},maxRequests:i=3}){const o={requestCounter:1};return new Promise(((s,a)=>{d({id:e,src:u(t),state:o,maxRequests:i,resolve:s,reject:a}),n&&setTimeout((()=>{a({errorType:"vast_fetch_timeout",extCfgId:e})}),Object(r.a)(n))}))}},1490:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));const i=!!navigator.userAgent.match(/(iPad|iPhone|iPod)/i),r=!!navigator.userAgent.match(/(Android)/i),o=!!navigator.userAgent.match(/(Firefox)/i);function s(e=500){const t=o?e+1e3:e,n=i||r?2*e:e,s=Math.max(t,n);return Math.min(s,3e3)}},1491:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));const i="ADD_DEBUG";function r(e){return{type:i,debug:e}}},1492:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));n(435);var i=n(1556),r=n(1397),o=n(1444),s=n(1422),a=n(1475),c=n(1162);const l=[];function d(e,t){return 1===e.slots.length&&1===t.length}const u={},h=({instance:e,payload:t,slots:n,recs:i,articleId:o,vastErrorCount:s})=>{var a,c;return d(e,n)?Object(r.l)({payload:t,articleId:o,instanceId:e.id,additionalParams:e.additionalParams,vastErrorCount:s,swappingRecCtx:null===(a=i[null===(c=n[0])||void 0===c?void 0:c.recId])||void 0===a?void 0:a.recCtx}):[function e({slots:n,articleId:o,vastErrorCount:s}){function a({slot:e,articleId:n,vastErrorCount:o}){var s;const a=function(e,t){return"compositeFooterPlates"!==t||e.types.length<2||!e.types.includes("ad")?e:u[e.slotId]?(u[e.slotId]++,2===u[e.slotId]?{...e,size:"normal"}:{...e,types:e.types.filter((e=>"ad"!==e))}):(u[e.slotId]=1,e)}(o>1?Object(r.w)(e):e,t.preset);return a.swapping&&i[a.recId]&&(a.recCtx=i[a.recId].recCtx),null!==(s=a.filters)&&void 0!==s&&s.includes("inline_article")?(a.articleId=n,a):a}return n.reduce(((t,n)=>{switch(n.type){case"slot":t.push(a({slot:n,articleId:o,vastErrorCount:s}));break;case"grid":if(!n.slots.length)return t;t.push({...n,slots:e({slots:n.slots,articleId:o,vastErrorCount:s})})}return t}),[])}({slots:n,articleId:o,vastErrorCount:s})]},p=()=>{l[0]&&l[0]()},f=(e,t,n)=>{const{widgetInstances:i,articleId:r}=t();n.useCount++;Object(c.d)({widgetInstances:i,articleId:r})&&(e(Object(o.o)()),n.useCount<2)?p():(l.shift(),p(),n.resolve())},g=({dispatch:e,getState:t,task:n,widgetRecsSchemas:i,instances:o})=>{Object(a.b)(t().extParams).then((a=>{const{url:c,seed:l,subPublisher:d,luid:u}=t();s.a.Recs.getRecs({recsPayload:{url:c||window.parent.location.href,referer:window.parent.location.href,recsSchemaGroup:{seed:l,widgetRecsSchemas:i},extData:a.length?a:void 0,subPublisher:d,luid:u}}).then((s=>{Object(r.p)({resp:s,instances:o,widgetRecsSchemas:i,dispatch:e,getState:t}),f(e,t,n)})).catch((i=>{console.error("fill_empty_slot reject: ",i),f(e,t,n)}))}))};function m(e,t){return new Promise((n=>{l.push(((e,t,n)=>()=>{const{widgetConfigs:r,widgetInstances:l,recs:u,articleId:p,extParams:m,token:b,url:y,vastErrorCount:v}=t(),w=Object(c.p)({widgetInstances:l,articleId:p}),I=w.map((({instanceId:e})=>e)),C=w.map((({instanceId:e,slots:t})=>{var n,i,o;return{widgetCfgId:l[e].cfgId,tiles:h({instance:l[e],payload:r[l[e].cfgId].payload,slots:t,recs:u,articleId:p,vastErrorCount:v}),excludeVideo:v>1,doNotRepeatAds:(null===(n=r[l[e].cfgId])||void 0===n||null===(i=n.payload)||void 0===i||null===(o=i.recsLackBehaviour)||void 0===o?void 0:o.disableClonning)||void 0,isInitialFetch:d(l[e],t)}}));C.length?"stale"===m.reinitableParamsStatus?s.a.Widgets.init({token:b,url:y}).then((({extCfgs:r})=>{const{reinitable:s}=Object(a.c)(r),c=Object(i.a)(m.reinitableSrcs,s,"id"),l=[...s,...c];e(Object(o.n)(l));const d=Object(a.a)({cfgs:l,global:window.global});e(Object(o.m)(d)),g({dispatch:e,getState:t,task:n,widgetRecsSchemas:C,instances:I})})):g({dispatch:e,getState:t,task:n,widgetRecsSchemas:C,instances:I}):f(e,t,n)})(e,t,{resolve:n,useCount:0})),1===l.length&&p()}))}},1498:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));const i="INCREASE_VAST_ERROR_COUNT";function r(e){return{type:i,count:e}}},1499:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return s}));const i="SET_CURRENT_FLYROLL_ID",r="REMOVE_CURRENT_FLYROLL_ID";function o(e){return{type:i,instanceId:e}}function s(){return{type:r}}},1502:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n(0),r=n.n(i),o=n(2),s=n.n(o),a=n(1369),c=n.n(a);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class d extends i.PureComponent{constructor(...e){super(...e),l(this,"renderLoadMoreButton",(()=>{const{widgetStyles:e,loadMoreButtonOverlay:t,loadMoreButtonLabel:n,loadMoreInProgress:i}=this.props;if(!t&&!i)return null;const o=c()(e.classes.loadMoreButton,{[e.classes.loadMoreButtonInProgress]:i}),s=i?r.a.createElement("div",{className:e.classes.loadMoreButtonLoader}):null,a=t?r.a.createElement("div",{className:e.classes.loadMoreButtonContent},n):null;return r.a.createElement("div",{className:e.classes.loadMoreButtonWrapper},r.a.createElement("div",{className:o},i?null:t,s,a))}))}render(){const{GridLayout:e,widgetStyles:t,mainTitle:n,gridItems:i,grid:o,logo:s,isFlyrolled:a,slots:l,onMoreRecsLoad:d,loadMoreInProgress:u,positioningAlign:h,onGridOverflow:p,onRecsSizeChange:f,onGridVisibleItemsChange:g}=this.props,m=c()(t.classes.widgetBaseLayout,{[t.classes.widgetBaseLayoutFlyrolled]:a});return r.a.createElement("div",{className:m},r.a.createElement(e,{widgetStyles:t,mainTitle:n,items:i,cfg:o,loadMoreButton:this.renderLoadMoreButton(),logo:s,slots:l,loadMoreInProgress:u,positioningAlign:h,onOverflow:p,onRecsSizeChange:f,onVisibleItemsChange:g,onMoreRecsLoad:d}))}}l(d,"propTypes",{GridLayout:s.a.func.isRequired,widgetStyles:s.a.object,mainTitle:s.a.node,gridItems:s.a.array,grid:s.a.object.isRequired,loadMoreButtonOverlay:s.a.node,loadMoreButtonLabel:s.a.string,loadMoreInProgress:s.a.bool,logo:s.a.node,isFlyrolled:s.a.bool,slots:s.a.array,positioningAlign:s.a.string,onGridOverflow:s.a.func,onRecsSizeChange:s.a.func,onGridVisibleItemsChange:s.a.func,onMoreRecsLoad:s.a.func}),l(d,"defaultProps",{widgetStyles:{classes:{}},mainTitle:null,gridItems:[],loadMoreButtonOverlay:null,loadMoreButtonLabel:"",loadMoreInProgress:!1,logo:null,isFlyrolled:!1,slots:[],positioningAlign:"center",onGridOverflow:()=>{},onRecsSizeChange:()=>{},onGridVisibleItemsChange:()=>{},onMoreRecsLoad:()=>{}})},1503:function(e,t,n){var i=n(0);function r(e){return i.createElement("svg",e,[i.createElement("defs",{key:0},i.createElement("style",null,".collapse-a{opacity:0.3;}.collapse-b{fill:#fff;}")),i.createElement("title",{key:1},"collapse"),i.createElement("path",{className:"collapse-a",d:"M2.361.232.238,2.353,4.879,7,.232,11.64l2.121,2.121L7,9.121l4.64,4.646,2.123-2.12L9.121,7,13.768,2.36,11.647.239,7,4.879,2.361.232Z",key:2}),i.createElement("polyline",{className:"collapse-b",points:"2.36 1.646 7 6.293 11.646 1.652 12.354 2.359 7.707 7.001 12.348 11.646 11.64 12.354 7 7.707 2.354 12.348 1.646 11.641 6.293 7 1.652 2.354 2.36 1.646",key:3})])}r.defaultProps={viewBox:"0 0 14 14"},e.exports=r,r.default=r},1504:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(1188);function r(...e){return Object(i.a)(...e,((e,t,n)=>{if("conditionals"===n)return(e||[]).concat(t)}))}},1505:function(e,t,n){"use strict";n(1381),n(1439)},1506:function(e,t,n){"use strict"},1507:function(e,t,n){"use strict"},1508:function(e,t,n){"use strict"},1509:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s}));var i=n(1440),r=n(1443);function o(e){const{widgetConfigs:t}=Object(i.a)().getState();if(!t[e].payload.v6Compat)return e;const{v6Compat:{widgetCfgId:n}}=t[e].payload;return n}function s(e,t){const{isV6Compat:n,widgetConfigs:o}=Object(i.a)().getState();n&&Object.keys(o).filter((e=>o[e].payload.theme===t)).forEach((t=>{Object(r.a)().registerCfgCallbacks({cbObj:e,cfgId:t})}))}},1529:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i=n(0),r=n.n(i),o=n(2),s=n.n(o),a=n(10),c=n(1369),l=n.n(c),d=n(473),u={recLayoutRoot:{width:"100%"},textContent:{position:"relative","z-index":100}};function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const p={},f=new a.b;class g extends i.PureComponent{constructor(...e){super(...e),h(this,"componentWillUnmount",(()=>{const{local:e}=this.context;Object(d.c)({widgetId:e.id,styleSheetsDict:p,sheetsManager:f})}))}componentWillMount(){const{local:e}=this.context;Object(d.b)({jss:e.jss,stylesSrc:u,styleSheetsDict:p,widgetId:e.id,sheetsManager:f})}render(){const{local:e}=this.context,{styles:t,size:n,linkOverlay:i,closeButton:o,video:s,thumbnail:a,title:c,description:d,disclaimer:u,label:h}=this.props,f=p[e.id].sheet,g=l()(f.classes.recLayoutRoot,t.classes.recLayoutRoot,{[t.classes.recLayoutNormalSize]:"normal"===n,[t.classes.recLayoutWideSize]:"wide"===n}),m=l()(f.classes.textContent,t.classes.textContent);return r.a.createElement("div",{className:g},i,o,s,a,u,r.a.createElement("div",{className:m},c,d,h))}}h(g,"propTypes",{styles:s.a.object,type:s.a.oneOf(["normal","ad","promo","exchange"]),size:s.a.oneOf(["normal","wide"]),linkOverlay:s.a.node,closeButton:s.a.node,video:s.a.node,thumbnail:s.a.node,title:s.a.node,description:s.a.node,disclaimer:s.a.node,label:s.a.node,category:s.a.node,meta:s.a.object}),h(g,"contextTypes",{local:s.a.object.isRequired}),h(g,"defaultProps",{styles:{classes:{}},type:"normal",size:"normal",linkOverlay:null,closeButton:null,video:null,thumbnail:null,title:null,description:null,disclaimer:null,label:null,category:null,meta:{}})},1530:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i=n(0),r=n.n(i),o=n(2),s=n.n(o),a=n(1369),c=n.n(a),l=n(61);function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class u extends i.PureComponent{componentWillMount(){const{local:{el:e}}=this.context,{exposedSliderStyles:t}=this.props;this._actionButtonRoot=document.createElement("div"),this._actionButtonRoot.className=c()(t.classes.actionButtonWrapper,"js-relap-action-button"),e.appendChild(this._actionButtonRoot)}componentDidMount(){const{children:e}=this.props;Object(l.render)(e,this._actionButtonRoot)}componentDidUpdate(){const{children:e}=this.props;Object(l.render)(e,this._actionButtonRoot)}componentWillUnmount(){Object(l.unmountComponentAtNode)(this._actionButtonRoot)}render(){return null}}d(u,"propTypes",{exposedSliderStyles:s.a.object,children:s.a.node.isRequired}),d(u,"defaultProps",{exposedSliderStyles:{classes:{}}}),d(u,"contextTypes",{local:s.a.object.isRequired});var h=n(1503),p=n.n(h);function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class g extends i.PureComponent{render(){const{exposedSliderStyles:e,widgetStyles:t,isCollapsed:n,widgetBase:i,onActionButtonClick:o,isSpecialSlider:s}=this.props,a=c()({[e.classes.actionButton]:!0,[e.classes.actionButtonCollapsed]:n}),l=c()({[t.classes.sliderLayout]:!s,[t.classes.sliderLayoutTransparent]:s});return r.a.createElement("div",{className:l},!s&&r.a.createElement(u,{exposedSliderStyles:e},r.a.createElement("div",{className:a,onClick:o},r.a.createElement(p.a,null))),i)}}f(g,"propTypes",{widgetStyles:s.a.object,exposedSliderStyles:s.a.object,isCollapsed:s.a.bool,widgetBase:s.a.node.isRequired,isSpecialSlider:s.a.bool,onActionButtonClick:s.a.func}),f(g,"defaultProps",{widgetStyles:{classes:{}},exposedSliderStyles:{classes:{}},isCollapsed:!1,isSpecialSlider:!1,onActionButtonClick:()=>{}})},1564:function(e,t,n){var i=n(0);function r(e){return i.createElement("svg",e,[i.createElement("defs",{key:0},i.createElement("style",null,".no-img-a{fill:#fff;}.no-img-b{fill:#e7eaea;}")),i.createElement("title",{key:1},"no_img"),i.createElement("path",{className:"no-img-a",d:"M3.926,5.042A1.081,1.081,0,0,1,5.045,3.929q24.456.011,48.911.006a1.018,1.018,0,0,1,1.082.774,1.114,1.114,0,0,1,.018.24c-.035,0-.063-.013-.1-.013q-24.456,0-48.911-.006A1.081,1.081,0,0,0,4.926,6.042s.008,27.172.009,37.092c0,.042.006.082.007.124a1,1,0,0,1-.987-.788,1.608,1.608,0,0,1-.02-.336C3.934,32.214,3.945,7.485,3.926,5.042ZM60,6.039c0-.075,0-.151,0-.226a4.794,4.794,0,0,0-1.94-3.789,4.893,4.893,0,0,1,.94,2.789c0,.075,0,.15,0,.226Q59,23.6,59,42.165a4.881,4.881,0,0,1-1.238,3.364,4.828,4.828,0,0,1-3.6,1.67H4.973a4.972,4.972,0,0,1-3-.994,4.925,4.925,0,0,0,4,1.994H55.16a4.828,4.828,0,0,0,3.6-1.67A4.881,4.881,0,0,0,60,43.165Q59.993,24.6,60,6.039ZM52.13,40.329s0-9.135,0-13.625a.367.367,0,0,0-.1-.234l-1-1a.367.367,0,0,1,.1.234l0,13.625H7.866l1,1ZM13.758,19.67A5.881,5.881,0,0,1,10.127,18.4,5.893,5.893,0,1,0,18.41,10.14a5.845,5.845,0,0,1,1.255,3.647A5.912,5.912,0,0,1,13.758,19.67Z",key:2}),i.createElement("path",{className:"no-img-b",d:"M53.921,0a4.908,4.908,0,0,1,2.714.724,4.84,4.84,0,0,1,2.36,4.089c0,.075,0,.15,0,.226Q59,23.6,59,42.165a4.879,4.879,0,0,1-1.237,3.364,4.828,4.828,0,0,1-3.6,1.67c-.043,0-.086,0-.129,0H4.973A4.925,4.925,0,0,1,.247,43.819,4.58,4.58,0,0,1,0,42.413c0-.075,0-.15,0-.226Q0,23.6,0,5.013a4.845,4.845,0,0,1,1.7-3.8A4.908,4.908,0,0,1,5.072,0Zm.041,43.266a1.475,1.475,0,0,0,.288-.018,1.012,1.012,0,0,0,.815-1.063V5.06a1.535,1.535,0,0,0-.026-.352,1.018,1.018,0,0,0-1.082-.774q-24.456,0-48.911-.006A1.081,1.081,0,0,0,3.926,5.042l.009,37.092a1.623,1.623,0,0,0,.02.336,1.013,1.013,0,0,0,1.047.8ZM51.126,25.7a.367.367,0,0,0-.1-.234L38.348,12.791,22.61,28.526l-4.915-4.915-9.715,9.7a.36.36,0,0,0-.116.281l0,5.736H51.13ZM19.665,13.787a5.9,5.9,0,1,0-5.907,5.883A5.9,5.9,0,0,0,19.665,13.787Z",key:3})])}r.defaultProps={viewBox:"0 0 60 48.2"},e.exports=r,r.default=r},1569:function(e,t,n){var i=n(0);function r(e){return i.createElement("svg",e,i.createElement("circle",{cx:"44",cy:"44",r:"20.2",fill:"none",stroke:"currentColor",strokeWidth:"3.6",strokeLinecap:"round"}))}r.defaultProps={viewBox:"22 22 44 44"},e.exports=r,r.default=r},1570:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return b}));var i=n(1392),r=n(0),o=n.n(r),s=n(2),a=n.n(s),c=n(10),l=n(1371),d=n(1503),u=n.n(d),h=n(473),p=n(1571);function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const g={},m=new c.b;class b extends r.PureComponent{constructor(t){super(t),f(this,"componentDidMount",(()=>{e.addEventListener("resize",this.handleWindowResize)})),f(this,"componentWillUnmount",(()=>{const{local:t}=this.context;Object(h.c)({widgetId:t.id,styleSheetsDict:g,sheetsManager:m}),e.removeEventListener("resize",this.handleWindowResize),this.handleWindowResize.cancel()})),f(this,"updateStyles",(e=>{const{local:t,global:n}=this.context,i={width:n.innerWidth,height:n.innerHeight};g[t.id].sheet.update({globalWindow:i,cfg:e})})),f(this,"handleWindowResize",(()=>{const{cfg:e}=this.props;this.updateStyles(e)})),this.handleWindowResize=Object(i.a)(this.handleWindowResize,300)}componentWillMount(){const{local:e}=this.context,{widgetStylesSrc:t,cfg:n}=this.props;Object(h.b)({jss:e.jss,stylesSrc:t,styleSheetsDict:g,widgetId:e.id,sheetsManager:m,createStyleSheetOptions:{link:!0}}),this.updateStyles(n)}componentWillReceiveProps({cfg:e}){this.updateStyles(e)}render(){const{local:e}=this.context,{cfg:t,widgetStylesSrc:n,ArticleComponent:i,ArticleHeaderLayout:r,article:s,getScrollableElRef:a,onReady:c,onVisibleAreaUpdate:d,onLinkClick:h,onCloseButtonClick:f}=this.props,m=g[e.id].sheet||{classes:{}};return o.a.createElement("div",{className:m.classes.popupArticle},o.a.createElement("div",{className:m.classes.popupArticleUnderlay}),o.a.createElement("div",{className:m.classes.popupArticleContent},o.a.createElement("div",{type:"button",className:m.classes.popupArticleCloseButton,onClick:f},o.a.createElement(u.a,null)),o.a.createElement(l.a,{Content:p.a,cfg:t,widgetStylesSrc:n,ArticleComponent:i,ArticleHeaderLayout:r,article:s,getScrollableElRef:a,onReady:c,onVisibleAreaUpdate:d,onLinkClick:h})))}}f(b,"propTypes",{cfg:a.a.object.isRequired,widgetStylesSrc:a.a.object.isRequired,ArticleComponent:a.a.func.isRequired,ArticleHeaderLayout:a.a.func,article:a.a.object.isRequired,getScrollableElRef:a.a.func.isRequired,onReady:a.a.func,onVisibleAreaUpdate:a.a.func,onLinkClick:a.a.func,onCloseButtonClick:a.a.func}),f(b,"contextTypes",{local:a.a.object.isRequired,global:a.a.object.isRequired}),f(b,"defaultProps",{ArticleHeaderLayout:void 0,onReady:()=>{},onVisibleAreaUpdate:()=>{},onLinkClick:()=>{},onCloseButtonClick:()=>{}})}).call(this,n(437))},1571:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return f}));var i=n(1392),r=n(0),o=n.n(r),s=n(2),a=n.n(s),c=n(10),l=n(473);function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const h={},p=new c.b;class f extends r.PureComponent{constructor(t){super(t),u(this,"componentDidMount",(()=>{e.addEventListener("resize",this.handleWindowResize)})),u(this,"componentWillUnmount",(()=>{const{local:t}=this.context;Object(l.c)({widgetId:t.id,styleSheetsDict:h,sheetsManager:p}),e.removeEventListener("resize",this.handleWindowResize),this.handleWindowResize.cancel()})),u(this,"updateStyles",(e=>{const{local:t,global:n}=this.context,i={width:n.innerWidth,height:n.innerHeight};h[t.id].sheet.update({globalWindow:i,cfg:e})})),u(this,"handleWindowResize",(()=>{const{cfg:e}=this.props;this.updateStyles(e)})),this.handleWindowResize=Object(i.a)(this.handleWindowResize,300)}componentWillMount(){const{local:e}=this.context,{widgetStylesSrc:t,cfg:n}=this.props;Object(l.b)({jss:e.jss,stylesSrc:t,styleSheetsDict:h,widgetId:e.id,sheetsManager:p,createStyleSheetOptions:{link:!0}}),this.updateStyles(n)}componentWillReceiveProps({cfg:e}){this.updateStyles(e)}render(){const{local:e}=this.context,{ArticleComponent:t,ArticleHeaderLayout:n,article:i,getScrollableElRef:r,onReady:s,onVisibleAreaUpdate:a,onLinkClick:c}=this.props,l=h[e.id].sheet;return o.a.createElement(t,d({},i,{widgetStyles:l,ArticleHeaderLayout:n,getScrollableElRef:r,onReady:s,onVisibleAreaUpdate:a,onLinkClick:c}))}}u(f,"propTypes",{cfg:a.a.object.isRequired,widgetStylesSrc:a.a.object.isRequired,ArticleComponent:a.a.func.isRequired,ArticleHeaderLayout:a.a.func,article:a.a.object.isRequired,getScrollableElRef:a.a.func.isRequired,onReady:a.a.func,onVisibleAreaUpdate:a.a.func,onLinkClick:a.a.func}),u(f,"contextTypes",{local:a.a.object.isRequired,global:a.a.object.isRequired}),u(f,"defaultProps",{ArticleHeaderLayout:void 0,onReady:()=>{},onVisibleAreaUpdate:()=>{},onLinkClick:()=>{}})}).call(this,n(437))},1984:function(e,t,n){"use strict";n.r(t),n.d(t,"publicAPI",(function(){return Re})),n.d(t,"getStartConfig",(function(){return c})),n.d(t,"funcLazyCall",(function(){return L.a})),n.d(t,"markProcessStart",(function(){return P.c})),n.d(t,"markProcessEnd",(function(){return P.b})),n.d(t,"setProcessStart",(function(){return P.g})),n.d(t,"setPerfPoint",(function(){return P.f}));n(1206);var i=n(1372),r=n(439),o=n.n(r),s=n(1440),a=n(1500);function c(){const{relapScriptEl:e,relapScriptSrc:t}=window,n=function(e=""){if(!e.includes("?"))return{};const{searchParams:t}=new URL(e),n=!!t.get("token"),i=t.get("token"),r=t.get("url");return n&&i?{token:i,url:r,isV6Compat:n}:{}}(t);return Object(a.a)(n)?e&&e.getAttribute("data-relap-token")?{token:e.getAttribute("data-relap-token"),url:e.getAttribute("data-relap-url"),preinitInlineArticleWidgetId:e.getAttribute("data-relap-preinit-inline-article-widget-id")||"",subPublisher:e.getAttribute("data-relap-sub-publisher")||"",widgetCfgId:e.getAttribute("data-relap-widget-cfg-id")||null}:{}:n}var l=n(1443),d=n(1422),u=n(0),h=n.n(u),p=n(61),f=n(1441),g=n(2),m=n.n(g),b=n(1449),y=n.n(b),v=n(1163),w=n(1170),I=n(547);function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const O=Object(v.a)([function(e){return[...e].sort(((e,t)=>e.start-t.start)).sort((e=>"browser_load"===e.processId?-1:1)).sort((e=>"browser_DOMContentLoaded"===e.processId?-1:1))}],(e=>e));class S extends u.Component{constructor(...e){super(...e),C(this,"componentWillUnmount",(()=>{this._iframePromise.then((()=>{Object(p.unmountComponentAtNode)(this._widgetRootEl),Object(I.a)({local:this._local})}))})),C(this,"handlePopupRender",(({global:e,perfData:t,debug:i})=>{this._widgetRootEl&&Promise.all([Promise.all([n.e(1),n.e(1142)]).then(n.bind(null,1986)),this._iframePromise]).then((n=>{const r=n[0].default;Object(p.render)(h.a.createElement(r,{perfData:t,global:e,local:this._local,debug:i}),this._widgetRootEl)}))})),C(this,"refRoot",(e=>{this._rootEl=e}))}componentDidMount(){const e=this._rootEl,t="admin-popup",n=`${Date.now()}@${t}`,{el:i,iframeEl:r,promise:o}=Object(w.a)({anchorEl:e,position:"append",frameType:"relapAdmin",instanceId:n,cfgId:t,globalObj:{id:n}});r.contentWindow.el=i,r.contentWindow.iframeEl=r,this._el=i,this._local=r.contentWindow,this._id=n,this._iframePromise=new Promise((e=>{o.then((()=>{this._widgetRootEl=Object(I.b)(r.contentWindow),e()}))})),this._iframePromise.then((()=>{const{global:e,perfData:t,debug:n}=this.props;this.handlePopupRender({global:e,perfData:t,debug:n})}))}componentWillReceiveProps({global:e,perfData:t,debug:n}){this._iframePromise.then((()=>{this.handlePopupRender({global:e,perfData:t,debug:n})}))}shouldComponentUpdate(){return!1}render(){return h.a.createElement("div",{style:{position:"fixed",top:0,right:0,left:0,bottom:0,zIndex:1000001,background:"#fff"},ref:this.refRoot})}}C(S,"propTypes",{global:m.a.object.isRequired,perfData:m.a.array,debug:m.a.array}),C(S,"defaultProps",{perfData:[],debug:[]});var R=Object(f.b)(((e,t)=>({global:t.global,perfData:O(e.perfData),debug:e.debug})))(S);function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class x extends u.PureComponent{constructor(e){super(e),j(this,"handleClick",(()=>{const{isPopupVisible:e}=this.state;this.setState({isPopupRendered:!0,isPopupVisible:!e})})),j(this,"handleMouseEnter",(()=>{this.setState({isHovered:!0})})),j(this,"handleMouseLeave",(()=>{this.setState({isHovered:!1})})),this.state={isPopupRendered:!1,isPopupVisible:!1,isHovered:!1}}render(){const{global:e}=this.props,{isPopupRendered:t,isPopupVisible:n,isHovered:i}=this.state,r=t?h.a.createElement(R,{global:e}):null;return h.a.createElement("div",null,h.a.createElement("div",{style:{position:"fixed",top:"20px",right:"20px",zIndex:1000002,width:"20px",height:"20px",padding:"8px",background:i?"#06b7c2":"#fff",borderRadius:"40px",border:"1px solid #06b7c2",color:i?"#fff":"#06b7c2",cursor:"pointer",transition:"all 300ms ease 0s",boxSizing:"content-box"},onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onClick:this.handleClick},h.a.createElement(y.a,{style:{width:"100%",height:"100%"}})),h.a.createElement("div",{style:{display:n?"":"none"}},r))}}let E;j(x,"propTypes",{global:m.a.object.isRequired});n(435);var k=n(22);function T(e){const t=window.global.document;return Object(k.a)(e).reduce(((n,i)=>{const r=e[i];for(let e=0;e<r.length;e++){const o=t.querySelector(r[e].selector);if(!o)continue;const s=r[e].attribute?o.getAttribute(r[e].attribute):o.textContent;if(s){n[i]=s;break}}return n}),{})}var P=n(1382);function W({checkIndex:e,random:t}){Object(P.c)({id:`adb_${e}`,groupId:"calc ext params"});const n=new Promise((n=>{const i=new Image;i.onload=function(){n({check:!0})},i.onerror=function(){n({check:!1})},setTimeout((()=>{n({timedout:!0})}),1e3),i.src=`https://relap.io/abp.gif?ch=${e}&rn=${t}`}));return n.then((()=>{Object(P.b)({id:`adb_${e}`,groupId:"calc ext params"})})),n}var _=n(1475),L=n(1423),A=n(1444),M=n(1436),D=n(1478),z=n(1479),$=n(1421),N=n(1438),B=n(1483),V=n(1482);var q=n(1561),F=n(1162),U=n(1397),H=n(1498),G=n(1499);const Q=({state:e})=>e.recs,K=({state:e})=>e.widgetConfigs,J=({state:e})=>e.customData,X=({state:e,id:t})=>e.widgetInstances[t],Y=({state:e})=>e.vastCfgs,Z=({state:e,id:t})=>{var n;return(null===(n=X({state:e,id:t}))||void 0===n?void 0:n.slots)||[]},ee=({state:e,id:t})=>{var n;return(null===(n=X({state:e,id:t}))||void 0===n?void 0:n.lastSlotRemovedBy)||"widget"},te=({state:e,id:t})=>e.widgetInstances[t].additionalParams;function ne({WidgetComponent:e,id:t,local:n,global:i,onLoad:r,onReady:o}){const a=Object(v.a)([X],(e=>e&&e.cfgId||"")),c=Object(v.a)([K,X],((e,t)=>{var n;return null!=t&&t.cfg?null==t?void 0:t.cfg:(null===(n=e[null==t?void 0:t.cfgId])||void 0===n?void 0:n.payload)||{}})),d=Object(v.a)([X],(e=>!!e&&e.initialFetchStatus)),u=Object(v.a)([X],(e=>!!e&&e.ready)),h=Object(v.a)([X],(e=>!!e&&e.visible)),p=Object(v.a)([X],(e=>!!e&&e.loadMoreInProgress)),g=({dispatch:e,getState:t,recId:n,instanceId:i,cfgId:r})=>{const o=t(),s=Q({state:o}),a=Z({state:o,id:i}),c=Object(F.n)(a,s);if(Object(F.e)({recId:n,instance:X({state:o,id:i})})){const t=Object(F.k)({recId:n,instance:X({state:o,id:i})})||{};t.slotId&&e(Object(U.s)({id:i,recId:n,slotId:t.slotId})),t.recId===n&&e(Object(U.y)({id:n,instanceId:i,cfgId:r,removeAnyway:1===c.length})),e(Object(U.v)())}else e(Object(U.y)({id:n,instanceId:i,cfgId:r,removeAnyway:1===c.length}))};return Object(f.b)((e=>({id:t,local:n,global:i,additionalParams:te({state:e,id:t}),customData:J({state:e}),cfgId:a({state:e,id:t}),cfg:c({state:e,id:t}),recs:Q({state:e}),initialFetchStatus:d({state:e,id:t}),ready:u({state:e,id:t}),visible:h({state:e,id:t}),loadMoreInProgress:p({state:e,id:t}),vastCfgs:Y({state:e}),isFlyrolled:t===e.currentFlyroll,slots:Z({state:e,id:t}),lastSlotRemovedBy:ee({state:e,id:t}),loadCustomRec:window.loadCustomRec,loadVideoComponent:window.loadVideoComponent,loadArticleComponent:window.loadArticleComponent,loadFormComponent:window.loadFormComponent})),(e=>({onRecLoad:t=>{const{instanceId:n,recId:i}=t,{widgetInstances:r}=Object(s.a)().getState();if(Object(F.f)({recId:i,instance:r[n]})){const{slotId:t}=Object(F.k)({recId:i,instance:r[n]})||{};t&&(e(Object(U.x)({id:n,recId:i,slotId:t})),e(Object(U.t)({id:n,slotId:t})),e(Object(U.v)()))}e(Object(M.p)(t))},onFormLoad:t=>{e(Object(M.e)(t))},onRecShow:t=>{var n,i;const{recId:r}=t,o=Object(s.a)().getState(),a=Q({state:o})[r];null!==(n=a.video)&&void 0!==n&&null!==(i=n.vast20)&&void 0!==i&&i.loadInViewport&&e(Object(U.n)({id:r,recCtx:a.recCtx,cfg:{src:a.video.vast20.src,id:a.video.vast20.id,timeout:4e3}})),e(Object(M.u)(t)),e(Object(M.q)(t))},onFormShow:t=>{e(Object(M.h)(t))},onFormSessionActive:t=>{e(Object(M.f)(t))},onFormSessionInactive:t=>{e(Object(M.g)(t))},onFormAnswer:t=>{e(Object(M.c)(t))},onFormComplete:t=>{e(Object(M.d)(t))},onNewTabOpen:t=>{const n=Object(s.a)().getState(),i=Q({state:n}),r=Z({state:n,id:t.instanceId}),o=Object(F.n)(r,i);Object(l.a)().triggerCallback({callbackName:"onFollow",args:[{...t,linkHref:i[t.recId].href,done:()=>{}}],instanceId:t.instanceId,cfgId:t.cfgId}),e(Object(M.n)(t)).catch((e=>{console.error("addRecClickStatEventToQueue reject: ",e)})),t.manually&&e(Object(U.o)({id:t.recId,inNewTab:t.manually,cfgId:t.cfgId})),"ad"===t.recType&&"banner"===t.clickOrigin&&e(Object(U.y)({id:t.recId,instanceId:t.instanceId,cfgId:t.cfgId,removeAnyway:1===o.length}))},onSameTabOpen:t=>{const n=Object(l.a)(),i=1e3,r=[t.recPromise],o=Object(s.a)().getState(),a=Q({state:o});n.hasInstanceCallback({callbackName:"onFollow",instanceId:t.instanceId})&&r.push(new Promise((e=>{n.triggerInstanceCallback({callbackName:"onFollow",args:[{...t,linkHref:a[t.recId].href,done:e}],instanceId:t.instanceId}),setTimeout(e,i)}))),n.hasCfgCallback({callbackName:"onFollow",cfgId:t.cfgId})&&r.push(new Promise((e=>{n.triggerCfgCallback({callbackName:"onFollow",args:[{...t,linkHref:a[t.recId].href,done:e}],cfgId:t.cfgId}),setTimeout(e,i)}))),n.hasGlobalCallback("onFollow")&&r.push(new Promise((e=>{n.triggerGlobalCallback({callbackName:"onFollow",args:[{...t,linkHref:a[t.recId].href,done:e}]}),setTimeout(e,i)}))),r.push(e(Object(M.n)(t))),Promise.all(r.map((e=>e.catch((e=>e))))).then((()=>{e(Object(U.o)({id:t.recId,cfgId:t.cfgId}))})).catch((n=>{console.error("onSameTabOpen reject: ",n),e(Object(U.o)({id:t.recId,cfgId:t.cfgId}))}))},onRecVideoTimePercentUpdate:t=>{e(Object(M.s)(t))},onRecArticleScrollPercentUpdate:t=>{e(Object(M.m)(t))},onRecArticleClick:t=>{e(Object(M.l)(t))},onRecError:t=>{switch(t.errorGroup){case"video":"video_timeout"===t.errorType&&e(Object(H.b)(3)),"IMA_ad_error"===t.errorType&&e(Object(H.b)(1)),e(Object(M.r)(t))}g({dispatch:e,getState:Object(s.a)().getState,recId:t.recId,instanceId:t.instanceId,cfgId:t.cfgId})},onRecComplete:t=>{g({dispatch:e,getState:Object(s.a)().getState,recId:t.recId,instanceId:t.instanceId,cfgId:t.cfgId})},onRecClose:t=>{e(Object(U.u)({...t,removedBy:"user"})),e(Object(U.v)())},onRecCustomEvent:t=>{e(Object(M.o)(t))},onNoRecsLeft:t=>{Object(l.a)().triggerCallback({callbackName:"onNoContent",args:[t],cfgId:t.cfgId,instanceId:t.instanceId}),setTimeout((()=>{e(Object($.x)({id:t.instanceId}))}),0)},onWidgetCloseByUser:t=>{Object(l.a)().triggerCallback({callbackName:"onClose",args:[t],cfgId:t.cfgId,instanceId:t.instanceId}),setTimeout((()=>{e(Object($.x)({id:t.instanceId}))}),0)},onLoadMoreButtonClick:t=>{e(Object(U.q)(t))},onInfiniteScrollIntersect:t=>{e(Object(U.q)(t))},onFlyrollChange:t=>{const{currentFlyroll:n}=Object(s.a)().getState();!n&&t.isFlyrolled&&e(Object(G.d)(t.instanceId)),n!==t.instanceId||t.isFlyrolled||e(Object(G.c)())},onWidgetLoad:t=>{r(t),Object(l.a)().triggerCallback({callbackName:"onLoad",args:[t],cfgId:t.cfgId,instanceId:t.instanceId}),e(Object(M.t)(t))},onWidgetReady:t=>{o(t),e(Object($.u)(t.instanceId)),Object(l.a)().triggerCallback({callbackName:"onReady",args:[t],cfgId:t.cfgId,instanceId:t.instanceId})},onWidgetShouldBeVisible:t=>{e(Object($.v)(t))},onWidgetShouldBeHidden:t=>{e(Object($.r)(t))},onWidgetShow:e=>{Object(l.a)().triggerCallback({callbackName:"onShow",args:[e],cfgId:e.cfgId,instanceId:e.instanceId})}})))(e)}function ie(e={},t={}){const n=Object.keys(e),i=Object.keys(t);n.length<=i.length||Object(q.a)(n,i).forEach((n=>{if(!e[n]||!e[n].el.parentNode)return;const{el:i,local:r}=e[n];Object(l.a)().removeAllInstanceCallbacks(n),function(e,t){const n=Object.keys(t);for(let i=0;i<n.length;i++)if(t[n[i]].cfgId===e)return!0;return!1}(e[n].cfgId,t)||Object(l.a)().removeAllCfgCallbacks(e[n].cfgId),Object(I.a)({local:r}),i.parentNode.removeChild(i),e[n].onRemove()}))}let re;function oe(){if(re)return re;let e;return re=()=>{const t=Object(s.a)(),{widgetInstances:n,widgetConfigs:i}=t.getState();Object.values(n).filter((e=>!e.el)).forEach((e=>{var n;const{anchorEl:r,position:o}=e.positioning,s=Object(F.g)(null===(n=i[e.cfgId])||void 0===n?void 0:n.payload),{el:a,iframeEl:c,promise:l}=Object(w.a)({anchorEl:r,position:o,frameType:"relapWidget",instanceId:e.id,cfgId:e.cfgId,wrapped:!0,globalObj:{id:e.id},isFlyRollable:s});c.contentWindow.el=a,c.contentWindow.iframeEl=c,t.dispatch(Object($.w)({el:a,local:c.contentWindow,id:e.id})),l.then((()=>{const t=i[e.cfgId];return t?(Object(P.c)({id:`load ${t.payload.theme} theme`,groupId:`widget ${e.cfgId}`}),window.loadTheme(t.payload.theme)):Promise.reject()})).then((n=>{const r=i[e.cfgId];return r&&c.contentWindow?(Object(P.b)({id:`load ${r.payload.theme} theme`,groupId:`widget ${e.cfgId}`}),Object(P.e)({id:"mount",instanceId:e.id,cfgId:e.cfgId}),function({WidgetComponent:e,id:t,local:n,global:i,store:r,onLoad:o,onReady:s}){const a=Object(I.b)(n);if(!a)return;const c=ne({WidgetComponent:e,id:t,local:n,global:i,onLoad:o,onReady:s});Object(p.render)(h.a.createElement(f.a,{store:r},h.a.createElement(c,null)),a)}({id:e.id,WidgetComponent:n,local:c.contentWindow,global:window.global,store:t,onLoad:e.onLoad,onReady:e.onReady}),null):Promise.reject()})).catch((t=>{console.warn(`adding widget failed for widget id: ${e.id}`),console.log(t)}))})),ie(e,n),e=t.getState().widgetInstances},re}var se=n(1492);let ae,ce,le,de,ue,he=null,pe=null;function fe(){clearInterval(pe),pe=null,he=null}function ge(e,t){if(null===he)return;Date.now()-he<3e4||(!function(e,t){const{widgetInstances:n,recsStat:i,recs:r}=e(),o=Object.values(n).reduce(((e,{id:t,slots:n=[]})=>{const o=n.filter((({recId:e})=>{var t,n;return!0===(null===(t=i[e])||void 0===t?void 0:t.showed)&&"ad"===(null===(n=r[e])||void 0===n?void 0:n.type)})).map((e=>({instanceId:t,slot:e})));return e.concat(o)}),[]);o.length&&(o.forEach((({instanceId:e,slot:{slotId:n}})=>{t(Object(U.r)({id:e,slotId:n}))})),Object(se.a)(t,e))}(e,t),fe())}function me({getState:e,dispatch:t}){return function(){switch(window.global.document.visibilityState){case"visible":!function(e,t){null!==pe&&null!==he&&(ge(e,t),fe())}(e,t);break;case"hidden":!function(e,t){pe&&fe(),he=Date.now(),pe=setInterval((()=>{ge(e,t)}),3e3)}(e,t)}}}let be,ye;const ve=Object(i.a)((({onReady:e=(()=>{})}={})=>{be.then((()=>{ce.dispatch(Object($.q)({withWindowMinMaxWidth:!0,onReady:e}))}))}),300),we=()=>{ve()},Ie=()=>{const{searchParams:e}=new URL(window.global.location.toString());return e.get("relap_article_id")};let Ce=null;const Oe={current:0,updateAt:Date.now()},Se={init:({token:e,url:t,preinitInlineArticleWidgetId:n,subPublisher:r,widgetCfgId:a,events:l}={})=>{let u;if(window.initialized)return console.log("relapAPI is already initializing"),be;const g=c(),m=e||g.token,b=t||g.url||window.global.location.href,y=n||g.preinitInlineArticleWidgetId,v=r||g.subPublisher,w=a||g.widgetCfgId,{isV6Compat:I}=g;(!localStorage.relapSessionId||new Date-new Date(localStorage.relapSessionIdStart)>=18e5)&&(e=>{localStorage.relapSessionId=o()(`${e}_${Math.random()}_${new Date}`,Math.random()),localStorage.relapSessionIdStart=new Date})(b),window.initialized=!0;const C=new FormData;return C.append("session_id",localStorage.relapSessionId),C.append("type","page_closed"),C.append("url",b),C.append("referer",window.global.location.href),C.append("domain_name",window.global.location.host),ye=()=>{C.set("time_spent",`${Math.round(Oe.current/1e3)}`),navigator.sendBeacon(`${Object(d.b)()}page_close`,C)},Oe.updateAt=Date.now(),Ce=setInterval((()=>{"visible"===window.global.document.visibilityState&&Date.now()>=Oe.updateAt&&(Oe.current+=Date.now()-Oe.updateAt),Oe.updateAt=Date.now()}),1e3),window.global.addEventListener("beforeunload",ye),y&&(u=function({articleId:e,widgetCfgId:t,url:n}){if(!e||!t)return Promise.reject();let i,r;window.prefetchedInlineArticleWidgetCfgId=t;const o=new Promise(((e,t)=>{i=e,r=t}));return Object(P.c)({id:"prefetch inline article rec",groupId:"init"}),d.a.Recs.getRecs({recsPayload:{url:n,recsSchemaGroup:{seed:"",widgetRecsSchemas:[{tiles:[[{articleId:e,filters:["inline_article"],size:"wide",types:["ad"]}]],widgetCfgId:t}]}}}).then((e=>{Object(P.b)({id:"prefetch inline article rec",groupId:"init"}),i(e)})).catch((e=>{Object(P.b)({id:"prefetch inline article rec",groupId:"init"}),console.warn(e),r()})),o}({articleId:Ie(),widgetCfgId:y,url:b})),be=new Promise(((e,t)=>{if(!m)return void t();const n=new Promise((e=>{const t=11*Math.random();Promise.all([W({checkIndex:1,random:t}),W({checkIndex:2,random:t})]).then((t=>{!0!==t[0].check||!1!==t[1].check?e():e({results:[{name:"_wlabp",value:"1",isTgb:1,isWide:1}]})}))}));Object(P.c)({id:"fetch init data",groupId:"init"});const r={token:m,url:b};d.a.Widgets.init(w?{...r,widgetCfgId:w}:r).then((({widgetCfgs:t,pageMeta:r,extCfgs:o,rights:a=[],luid:c,sessionSecret:d})=>{var g,y;if(Object(P.b)({id:"fetch init data",groupId:"init"}),ce=Object(s.a)({initialState:{isV6Compat:I,url:b,token:m,subPublisher:v,luid:c,sessionSecret:d},withReduxDevtools:a.includes("admin")}),le||(le=ce.subscribe(oe())),y=ce,ae||(ae=me(y)),window.global.document.addEventListener("visibilitychange",ae),ae(),Object(F.c)(window.global.location)&&!window.global.relapLocalDevMode)return Se.destroy(),void(({token:e,url:t})=>{window.global.onRelapLocalDevAPIReady=n=>{n.init({token:e,url:t}).then((()=>n.addWidgets()))},window.global.relapLocalDevMode=!0;const n=document.createElement("script");n.src="http://localhost:3010/dist/relap.js",window.global.document.body.appendChild(n)})({token:m,url:b});Object(P.a)(ce),a.includes("admin")&&function(e,t){E||(E=t.document.createElement("div"),E.id="relap-admin-button",t.document.body.appendChild(E)),Object(p.render)(h.a.createElement(f.a,{store:e},h.a.createElement(x,{global:t})),E)}(ce,window.global),u&&ce.dispatch(Object(B.b)(u)),ce.dispatch(Object(V.b)(Ie())),ce.dispatch(Object(M.j)()),ce.dispatch(Object(A.j)(n));const{constant:w,reinitable:C}=Object(_.c)(o);ce.dispatch(Object(A.l)(w)),ce.dispatch(Object(A.n)(C)),Object(P.c)({id:"calc ext params",groupId:"init"});const O=Object(_.a)({cfgs:w,global:window.global});ce.dispatch(Object(A.k)(O));const S=Object(_.a)({cfgs:C,global:window.global});ce.dispatch(Object(A.m)(S)),Promise.all([n,O,S]).then((()=>{Object(P.b)({id:"calc ext params",groupId:"init"})})),function({func:e,global:t}){const n=()=>{e(),t.removeEventListener("DOMContentLoaded",n)};switch(t.document.readyState){case"interactive":case"complete":n();break;default:t.addEventListener("DOMContentLoaded",n,!1)}}({func:()=>{ce.dispatch(Object(M.k)({pageMeta:T(r)}))},global:window.global}),t.forEach((e=>{ce.dispatch(Object($.n)(e));const{id:t,payload:{positioning:{maxInstances:n,maxVisibleInstances:i}}}=e;n&&ce.dispatch(Object(N.f)({cfgId:t,count:n})),i&&ce.dispatch(Object(N.g)({cfgId:t,count:i}))})),ue=Se,ue.isReady=!0,de||(de=((e,t,n)=>{const r=Object(i.a)((()=>{const{widgetInstances:e}=t.getState();Object.values(e).forEach((({el:e,id:t})=>{e.isConnected||n.removeWidget({instanceId:t})}))}),300),o=new MutationObserver(r);return o.observe(e,{subtree:!0,childList:!0}),()=>{r.cancel(),o.disconnect()}})(window.global.document.body,ce,ue)),l&&ue.addGlobalEventListeners(l),I&&"function"!=typeof(null===(g=window.global.relap)||void 0===g?void 0:g.loadMore)&&(window.global.relap={loadMore:ue.addWidgets,ar(){}}),Object(L.a)({scope:window.global,funcName:"onRelapAPIInit",args:[ue]}),window.global.addEventListener("resize",we),e(ue)}))})),be},destroy:()=>Se.removeWidgets().then((()=>(E&&Object(p.unmountComponentAtNode)(E),fe(),window.global.document.removeEventListener("visibilitychange",ae),le&&(le(),le=null),de&&(de(),de=null),delete window.global.relapAPI,Object(l.a)().removeAllCallbacks(),window.global.removeEventListener("resize",we),window.global.removeEventListener("beforeunload",ye),clearInterval(Ce),ve.cancel(),window.global.document.querySelectorAll("script[data-relap-token]").forEach((e=>e.remove())),window.global.document.querySelectorAll(".relap-runtime-iframe").forEach((e=>e.remove())),Promise.resolve()))),setURL:e=>(ce.dispatch(Object(D.b)(e)),ce.dispatch(Object(M.j)()),Promise.resolve(ue)),setCustomData:Object(i.a)((({data:e}={})=>("object"==typeof e?ce.dispatch(Object(z.b)(e)):console.error("relapAPI.setCustomData error: data is not an object"),Promise.resolve(ue))),500),addGlobalEventListeners:e=>{Object(l.a)().registerGlobalCallbacks(e)},addWidgets:({events:e}={})=>{let t;Object(P.c)({id:"addWidgets",groupId:"init"}),e&&ue.addGlobalEventListeners(e);const n=new Promise((e=>{t=e}));n.then((()=>{Object(P.b)({id:"addWidgets",groupId:"init"})}));let r=15;const o=Object(i.a)(((e,n)=>{ve({onReady:t}),r--,r||n.disconnect()}),300),s=new MutationObserver(o),a=()=>{ve({onReady:t}),s.disconnect(),window.global.removeEventListener("DOMContentLoaded",a,!1),window.global.removeEventListener("load",a,!1)};switch(window.global.document.readyState){case"interactive":case"complete":a();break;default:window.global.addEventListener("load",a,!1),window.global.addEventListener("DOMContentLoaded",a,!1),s.observe(window.global.document.body,{childList:!0,subtree:!0})}return n},addWidget:({cfgId:e,anchorEl:t,position:n,events:i}={})=>{let r;const o=new Promise((e=>{r=e}));if(t){const{widgetConfigs:s}=ce.getState()||{},{payload:{preset:a=""}}=s[e];let c;const d="imgOverlay"===a;if(d){c={imgOverlaySrc:t.parentElement.querySelector("img").src}}return ce.dispatch(Object($.o)({cfgId:e,anchorEl:t,position:d?"img_overlay":n,additionalParams:c,onLoad:e=>{i&&Object(l.a)().registerInstanceCallbacks({cbObj:i,instanceId:e.instanceId})},onReady:e=>{r(e)}})),o}return ce.dispatch(Object($.q)({cfgId:e,onLoad:()=>{i&&Object(l.a)().registerCfgCallbacks({cbObj:i,cfgId:e})},onReady:e=>{r(e)}})),o},removeWidgets:()=>{const{widgetInstances:e}=ce.getState();let t;const n=new Promise((e=>{t=e})),i=[];return Object.values(e).forEach((({id:e})=>{let t;i.push(new Promise((e=>{t=e}))),ce.dispatch(Object($.x)({id:e,onRemove:t}))})),Promise.all(i).then(t),n},removeWidget:({cfgId:e,instanceId:t,el:n}={})=>{let i;const r=new Promise((e=>{i=e})),o=e=>(ce.dispatch(Object($.x)({id:e.instanceId,onRemove:e.onRemove})),e.promise);if(e)return s={cfgId:e,onRemove:i,promise:r},ce.dispatch(Object($.y)({cfgId:s.cfgId,onRemove:s.onRemove})),s.promise;var s;if(t)return o({instanceId:t,onRemove:i,promise:r});if(n instanceof HTMLElement){let e;if(n.classList.contains("js-relap-widget-wrapper")){const t=n.querySelector(".js-relap-widget");t&&(e=t.getAttribute("data-relap-widget-instance-id"))}if(n.classList.contains("js-relap-widget")&&(e=n.getAttribute("data-relap-widget-instance-id")),e)return o({instanceId:e,onRemove:i,promise:r})}return Promise.reject()}};var Re=Se},473:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return u}));var i=n(10),r=n(1202),o=n(439),s=n.n(o),a=n(1162);const c=(e="relap")=>{let t=+`${Math.random()}`.slice(-3);return()=>n=>`relap-${s()(n.key+e,a.B)}${t++}`};function l({insertionPoint:e,id:t}={}){const n=Object(i.c)(Object(r.a)());return n.setup({createGenerateClassName:c(t),insertionPoint:e}),n}function d({jss:e,stylesSrc:t,styleSheetsDict:n,widgetId:i,sheetsManager:r,createStyleSheetOptions:o}){const s=function({jss:e,stylesSrc:t,styleSheetsDict:n,widgetId:i,sheetsManager:r,createStyleSheetOptions:o}){return n[i]||(n[i]={sheet:e.createStyleSheet(t,o)},r.add(n[i],n[i].sheet)),n[i]}({jss:e,stylesSrc:t,styleSheetsDict:n,widgetId:i,sheetsManager:r,createStyleSheetOptions:o});r.manage(s)}function u({widgetId:e,styleSheetsDict:t,sheetsManager:n}){n.unmanage(t[e])}},547:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s}));var i=n(61),r=n(473);function o(e){if(!e)return console.warn("no local window found"),null;if(!e.document)return console.warn("no local document exist"),null;const t=e.document,n=t.createComment("style-insertion-point");t.head.appendChild(n),e.jss=Object(r.a)({insertionPoint:n,id:e.id}),e.exposedJss=Object(r.a)({insertionPoint:e.iframeEl,id:e.id});const i=t.createElement("div");i.style.position="relative",t.body.appendChild(i),t.body.style.height="0";const o=t.createElement("div");return o.id="root",i.appendChild(o),function(e,t,n){n.resizeObserver=new n.ResizeObserver((()=>{t(e)})),n.resizeObserver.observe(e)}(i,function(e){let t=0;return n=>{const i=new CustomEvent("widgetResize",{detail:{height:n.offsetHeight,width:n.offsetHeight}});e.dispatchEvent(i);const r=n.offsetHeight;t!==r&&(function(e,t){const n=t.iframeEl.style;n.setProperty("height",`${e}px`,"important"),n.setProperty("min-height","initial")}(r,e),t=r)}}(e),e),o}function s({local:e}){var t;if(!e)return;const n=e,r=e.document;r.getElementById("root")&&(delete n.jss,delete n.exposedJss,delete n.el,delete n.iframeEl,null===(t=e.resizeObserver)||void 0===t||t.disconnect(),Object(i.unmountComponentAtNode)(r.getElementById("root")))}},852:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return r}));const i=30,r=24}}]);